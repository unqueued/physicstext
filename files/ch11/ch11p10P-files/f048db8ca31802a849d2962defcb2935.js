!function(t,e){function i(t){var e=H[t]={},i,n;for(t=t.split(/\s+/),i=0,n=t.length;n>i;i++)e[t[i]]=!0;return e}function n(t,i,n){if(n===e&&1===t.nodeType){var s="data-"+i.replace(R,"-$1").toLowerCase();if(n=t.getAttribute(s),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:B.isNumeric(n)?parseFloat(n):F.test(n)?B.parseJSON(n):n}catch(o){}B.data(t,i,n)}else n=e}return n}function s(t){for(var e in t)if(("data"!==e||!B.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function o(t,e,i){var n=e+"defer",s=e+"queue",o=e+"mark",r=B._data(t,n);!r||"queue"!==i&&B._data(t,s)||"mark"!==i&&B._data(t,o)||setTimeout(function(){B._data(t,s)||B._data(t,o)||(B.removeData(t,n,!0),r.fire())},0)}function r(){return!1}function a(){return!0}function l(t){return!t||!t.parentNode||11===t.parentNode.nodeType}function c(t,e,i){if(e=e||0,B.isFunction(e))return B.grep(t,function(t,n){var s=!!e.call(t,n,t);return s===i});if(e.nodeType)return B.grep(t,function(t,n){return t===e===i});if("string"==typeof e){var n=B.grep(t,function(t){return 1===t.nodeType});if(dt.test(e))return B.filter(e,n,!i);e=B.filter(e,n)}return B.grep(t,function(t,n){return B.inArray(t,e)>=0===i})}function u(t){var e=ft.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function d(t,e){return B.nodeName(t,"table")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function h(t,e){if(1===e.nodeType&&B.hasData(t)){var i,n,s,o=B._data(t),r=B._data(e,o),a=o.events;if(a){delete r.handle,r.events={};for(i in a)for(n=0,s=a[i].length;s>n;n++)B.event.add(e,i+(a[i][n].namespace?".":"")+a[i][n].namespace,a[i][n],a[i][n].data)}r.data&&(r.data=B.extend({},r.data))}}function g(t,e){var i;1===e.nodeType&&(e.clearAttributes&&e.clearAttributes(),e.mergeAttributes&&e.mergeAttributes(t),i=e.nodeName.toLowerCase(),"object"===i?e.outerHTML=t.outerHTML:"input"!==i||"checkbox"!==t.type&&"radio"!==t.type?"option"===i?e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue):(t.checked&&(e.defaultChecked=e.checked=t.checked),e.value!==t.value&&(e.value=t.value)),e.removeAttribute(B.expando))}function p(t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll("*"):[]}function f(t){("checkbox"===t.type||"radio"===t.type)&&(t.defaultChecked=t.checked)}function m(t){var e=(t.nodeName||"").toLowerCase();"input"===e?f(t):"script"!==e&&"undefined"!=typeof t.getElementsByTagName&&B.grep(t.getElementsByTagName("input"),f)}function v(t){var e=A.createElement("div");return It.appendChild(e),e.innerHTML=t.outerHTML,e.firstChild}function b(t,e){e.src?B.ajax({url:e.src,async:!1,dataType:"script"}):B.globalEval((e.text||e.textContent||e.innerHTML||"").replace(Tt,"/*$0*/")),e.parentNode&&e.parentNode.removeChild(e)}function y(t,e,i){var n="width"===e?t.offsetWidth:t.offsetHeight,s="width"===e?Ht:Pt,o=0,r=s.length;if(n>0){if("border"!==i)for(;r>o;o++)i||(n-=parseFloat(B.css(t,"padding"+s[o]))||0),"margin"===i?n+=parseFloat(B.css(t,i+s[o]))||0:n-=parseFloat(B.css(t,"border"+s[o]+"Width"))||0;return n+"px"}if(n=Ft(t,e,e),(0>n||null==n)&&(n=t.style[e]||0),n=parseFloat(n)||0,i)for(;r>o;o++)n+=parseFloat(B.css(t,"padding"+s[o]))||0,"padding"!==i&&(n+=parseFloat(B.css(t,"border"+s[o]+"Width"))||0),"margin"===i&&(n+=parseFloat(B.css(t,i+s[o]))||0);return n+"px"}function C(t){return function(e,i){if("string"!=typeof e&&(i=e,e="*"),B.isFunction(i))for(var n=e.toLowerCase().split(te),s=0,o=n.length,r,a,l;o>s;s++)r=n[s],l=/^\+/.test(r),l&&(r=r.substr(1)||"*"),a=t[r]=t[r]||[],a[l?"unshift":"push"](i)}}function w(t,i,n,s,o,r){o=o||i.dataTypes[0],r=r||{},r[o]=!0;for(var a=t[o],l=0,c=a?a.length:0,u=t===se,d;c>l&&(u||!d);l++)d=a[l](i,n,s),"string"==typeof d&&(!u||r[d]?d=e:(i.dataTypes.unshift(d),d=w(t,i,n,s,d,r)));return!u&&d||r["*"]||(d=w(t,i,n,s,"*",r)),d}function x(t,i){var n,s,o=B.ajaxSettings.flatOptions||{};for(n in i)i[n]!==e&&((o[n]?t:s||(s={}))[n]=i[n]);s&&B.extend(!0,t,s)}function k(t,e,i,n){if(B.isArray(e))B.each(e,function(e,s){i||qt.test(t)?n(t,s):k(t+"["+("object"==typeof s||B.isArray(s)?e:"")+"]",s,i,n)});else if(i||null==e||"object"!=typeof e)n(t,e);else for(var s in e)k(t+"["+s+"]",e[s],i,n)}function $(t,i,n){var s=t.contents,o=t.dataTypes,r=t.responseFields,a,l,c,u;for(l in r)l in n&&(i[r[l]]=n[l]);for(;"*"===o[0];)o.shift(),a===e&&(a=t.mimeType||i.getResponseHeader("content-type"));if(a)for(l in s)if(s[l]&&s[l].test(a)){o.unshift(l);break}if(o[0]in n)c=o[0];else{for(l in n){if(!o[0]||t.converters[l+" "+o[0]]){c=l;break}u||(u=l)}c=c||u}return c?(c!==o[0]&&o.unshift(c),n[c]):void 0}function S(t,i){t.dataFilter&&(i=t.dataFilter(i,t.dataType));var n=t.dataTypes,s={},o,r,a=n.length,l,c=n[0],u,d,h,g,p;for(o=1;a>o;o++){if(1===o)for(r in t.converters)"string"==typeof r&&(s[r.toLowerCase()]=t.converters[r]);if(u=c,c=n[o],"*"===c)c=u;else if("*"!==u&&u!==c){if(d=u+" "+c,h=s[d]||s["* "+c],!h){p=e;for(g in s)if(l=g.split(" "),(l[0]===u||"*"===l[0])&&(p=s[l[1]+" "+c])){g=s[g],g===!0?h=p:p===!0&&(h=g);break}}h||p||B.error("No conversion from "+d.replace(" "," to ")),h!==!0&&(i=h?h(i):p(g(i)))}}return i}function E(){try{return new t.XMLHttpRequest}catch(e){}}function T(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function _(){return setTimeout(I,0),xe=B.now()}function I(){xe=e}function N(t,e){var i={};return B.each(we.concat.apply([],we.slice(0,e)),function(){i[this]=t}),i}function j(t){if(!fe[t]){var e=A.body,i=B("<"+t+">").appendTo(e),n=i.css("display");i.remove(),("none"===n||""===n)&&(me||(me=A.createElement("iframe"),me.frameBorder=me.width=me.height=0),e.appendChild(me),ve&&me.createElement||(ve=(me.contentWindow||me.contentDocument).document,ve.write(("CSS1Compat"===A.compatMode?"<!doctype html>":"")+"<html><body>"),ve.close()),i=ve.createElement(t),ve.body.appendChild(i),n=B.css(i,"display"),e.removeChild(me)),fe[t]=n}return fe[t]}function L(t){return B.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var A=t.document,D=t.navigator,O=t.location,B=function(){function i(){if(!n.isReady){try{A.documentElement.doScroll("left")}catch(t){return void setTimeout(i,1)}n.ready()}}var n=function(t,e){return new n.fn.init(t,e,r)},s=t.jQuery,o=t.$,r,a=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,l=/\S/,c=/^\s+/,u=/\s+$/,d=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,h=/^[\],:{}\s]*$/,g=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,f=/(?:^|:|,)(?:\s*\[)+/g,m=/(webkit)[ \/]([\w.]+)/,v=/(opera)(?:.*version)?[ \/]([\w.]+)/,b=/(msie) ([\w.]+)/,y=/(mozilla)(?:.*? rv:([\w.]+))?/,C=/-([a-z]|[0-9])/gi,w=/^-ms-/,x=function(t,e){return(e+"").toUpperCase()},k=D.userAgent,$,S,E,T=Object.prototype.toString,_=Object.prototype.hasOwnProperty,I=Array.prototype.push,N=Array.prototype.slice,j=String.prototype.trim,L=Array.prototype.indexOf,O={};return n.fn=n.prototype={constructor:n,init:function(t,i,s){var o,r,l,c;if(!t)return this;if(t.nodeType)return this.context=this[0]=t,this.length=1,this;if("body"===t&&!i&&A.body)return this.context=A,this[0]=A.body,this.selector=t,this.length=1,this;if("string"==typeof t){if(o="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:a.exec(t),!o||!o[1]&&i)return!i||i.jquery?(i||s).find(t):this.constructor(i).find(t);if(o[1])return i=i instanceof n?i[0]:i,c=i?i.ownerDocument||i:A,l=d.exec(t),l?n.isPlainObject(i)?(t=[A.createElement(l[1])],n.fn.attr.call(t,i,!0)):t=[c.createElement(l[1])]:(l=n.buildFragment([o[1]],[c]),t=(l.cacheable?n.clone(l.fragment):l.fragment).childNodes),n.merge(this,t);if(r=A.getElementById(o[2]),r&&r.parentNode){if(r.id!==o[2])return s.find(t);this.length=1,this[0]=r}return this.context=A,this.selector=t,this}return n.isFunction(t)?s.ready(t):(t.selector!==e&&(this.selector=t.selector,this.context=t.context),n.makeArray(t,this))},selector:"",jquery:"1.7.1",length:0,size:function(){return this.length},toArray:function(){return N.call(this,0)},get:function(t){return null==t?this.toArray():0>t?this[this.length+t]:this[t]},pushStack:function(t,e,i){var s=this.constructor();return n.isArray(t)?I.apply(s,t):n.merge(s,t),s.prevObject=this,s.context=this.context,"find"===e?s.selector=this.selector+(this.selector?" ":"")+i:e&&(s.selector=this.selector+"."+e+"("+i+")"),s},each:function(t,e){return n.each(this,t,e)},ready:function(t){return n.bindReady(),S.add(t),this},eq:function(t){return t=+t,-1===t?this.slice(t):this.slice(t,t+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(N.apply(this,arguments),"slice",N.call(arguments).join(","))},map:function(t){return this.pushStack(n.map(this,function(e,i){return t.call(e,i,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:I,sort:[].sort,splice:[].splice},n.fn.init.prototype=n.fn,n.extend=n.fn.extend=function(){var t,i,s,o,r,a,l=arguments[0]||{},c=1,u=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=arguments[1]||{},c=2),"object"==typeof l||n.isFunction(l)||(l={}),u===c&&(l=this,--c);u>c;c++)if(null!=(t=arguments[c]))for(i in t)s=l[i],o=t[i],l!==o&&(d&&o&&(n.isPlainObject(o)||(r=n.isArray(o)))?(r?(r=!1,a=s&&n.isArray(s)?s:[]):a=s&&n.isPlainObject(s)?s:{},l[i]=n.extend(d,a,o)):o!==e&&(l[i]=o));return l},n.extend({noConflict:function(e){return t.$===n&&(t.$=o),e&&t.jQuery===n&&(t.jQuery=s),n},isReady:!1,readyWait:1,holdReady:function(t){t?n.readyWait++:n.ready(!0)},ready:function(t){if(t===!0&&!--n.readyWait||t!==!0&&!n.isReady){if(!A.body)return setTimeout(n.ready,1);if(n.isReady=!0,t!==!0&&--n.readyWait>0)return;S.fireWith(A,[n]),n.fn.trigger&&n(A).trigger("ready").off("ready")}},bindReady:function(){if(!S){if(S=n.Callbacks("once memory"),"complete"===A.readyState)return setTimeout(n.ready,1);if(A.addEventListener)A.addEventListener("DOMContentLoaded",E,!1),t.addEventListener("load",n.ready,!1);else if(A.attachEvent){A.attachEvent("onreadystatechange",E),t.attachEvent("onload",n.ready);var e=!1;try{e=null==t.frameElement}catch(s){}A.documentElement.doScroll&&e&&i()}}},isFunction:function(t){return"function"===n.type(t)},isArray:Array.isArray||function(t){return"array"===n.type(t)},isWindow:function(t){return t&&"object"==typeof t&&"setInterval"in t},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},type:function(t){return null==t?String(t):O[T.call(t)]||"object"},isPlainObject:function(t){if(!t||"object"!==n.type(t)||t.nodeType||n.isWindow(t))return!1;try{if(t.constructor&&!_.call(t,"constructor")&&!_.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var s;for(s in t);return s===e||_.call(t,s)},isEmptyObject:function(t){for(var e in t)return!1;return!0},error:function(t){throw new Error(t)},parseJSON:function(e){return"string"==typeof e&&e?(e=n.trim(e),t.JSON&&t.JSON.parse?t.JSON.parse(e):h.test(e.replace(g,"@").replace(p,"]").replace(f,""))?new Function("return "+e)():void n.error("Invalid JSON: "+e)):null},parseXML:function(i){var s,o;try{t.DOMParser?(o=new DOMParser,s=o.parseFromString(i,"text/xml")):(s=new ActiveXObject("Microsoft.XMLDOM"),s.async="false",s.loadXML(i))}catch(r){s=e}return s&&s.documentElement&&!s.getElementsByTagName("parsererror").length||n.error("Invalid XML: "+i),s},noop:function(){},globalEval:function(e){e&&l.test(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(w,"ms-").replace(C,x)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toUpperCase()===e.toUpperCase()},each:function(t,i,s){var o,r=0,a=t.length,l=a===e||n.isFunction(t);if(s)if(l){for(o in t)if(i.apply(t[o],s)===!1)break}else for(;a>r&&i.apply(t[r++],s)!==!1;);else if(l){for(o in t)if(i.call(t[o],o,t[o])===!1)break}else for(;a>r&&i.call(t[r],r,t[r++])!==!1;);return t},trim:j?function(t){return null==t?"":j.call(t)}:function(t){return null==t?"":t.toString().replace(c,"").replace(u,"")},makeArray:function(t,e){var i=e||[];if(null!=t){var s=n.type(t);null==t.length||"string"===s||"function"===s||"regexp"===s||n.isWindow(t)?I.call(i,t):n.merge(i,t)}return i},inArray:function(t,e,i){var n;if(e){if(L)return L.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,i){var n=t.length,s=0;if("number"==typeof i.length)for(var o=i.length;o>s;s++)t[n++]=i[s];else for(;i[s]!==e;)t[n++]=i[s++];return t.length=n,t},grep:function(t,e,i){var n=[],s;i=!!i;for(var o=0,r=t.length;r>o;o++)s=!!e(t[o],o),i!==s&&n.push(t[o]);return n},map:function(t,i,s){var o,r,a=[],l=0,c=t.length,u=t instanceof n||c!==e&&"number"==typeof c&&(c>0&&t[0]&&t[c-1]||0===c||n.isArray(t));if(u)for(;c>l;l++)o=i(t[l],l,s),null!=o&&(a[a.length]=o);else for(r in t)o=i(t[r],r,s),null!=o&&(a[a.length]=o);return a.concat.apply([],a)},guid:1,proxy:function(t,i){if("string"==typeof i){var s=t[i];i=t,t=s}if(!n.isFunction(t))return e;var o=N.call(arguments,2),r=function(){return t.apply(i,o.concat(N.call(arguments)))};return r.guid=t.guid=t.guid||r.guid||n.guid++,r},access:function(t,i,s,o,r,a){var l=t.length;if("object"==typeof i){for(var c in i)n.access(t,c,i[c],o,r,s);return t}if(s!==e){o=!a&&o&&n.isFunction(s);for(var u=0;l>u;u++)r(t[u],i,o?s.call(t[u],u,r(t[u],i)):s,a);return t}return l?r(t[0],i):e},now:function(){return(new Date).getTime()},uaMatch:function(t){t=t.toLowerCase();var e=m.exec(t)||v.exec(t)||b.exec(t)||t.indexOf("compatible")<0&&y.exec(t)||[];return{browser:e[1]||"",version:e[2]||"0"}},sub:function(){function t(e,i){return new t.fn.init(e,i)}n.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function i(s,o){return o&&o instanceof n&&!(o instanceof t)&&(o=t(o)),n.fn.init.call(this,s,o,e)},t.fn.init.prototype=t.fn;var e=t(A);return t},browser:{}}),n.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(t,e){O["[object "+e+"]"]=e.toLowerCase()}),$=n.uaMatch(k),$.browser&&(n.browser[$.browser]=!0,n.browser.version=$.version),n.browser.webkit&&(n.browser.safari=!0),l.test("Â ")&&(c=/^[\s\xA0]+/,u=/[\s\xA0]+$/),r=n(A),A.addEventListener?E=function(){A.removeEventListener("DOMContentLoaded",E,!1),n.ready()}:A.attachEvent&&(E=function(){"complete"===A.readyState&&(A.detachEvent("onreadystatechange",E),n.ready())}),n}(),H={};B.Callbacks=function(t){t=t?H[t]||i(t):{};var n=[],s=[],o,r,a,l,c,u=function(e){var i,s,o,r,a;for(i=0,s=e.length;s>i;i++)o=e[i],r=B.type(o),"array"===r?u(o):"function"===r&&(t.unique&&h.has(o)||n.push(o))},d=function(e,i){for(i=i||[],o=!t.memory||[e,i],r=!0,c=a||0,a=0,l=n.length;n&&l>c;c++)if(n[c].apply(e,i)===!1&&t.stopOnFalse){o=!0;break}r=!1,n&&(t.once?o===!0?h.disable():n=[]:s&&s.length&&(o=s.shift(),h.fireWith(o[0],o[1])))},h={add:function(){if(n){var t=n.length;u(arguments),r?l=n.length:o&&o!==!0&&(a=t,d(o[0],o[1]))}return this},remove:function(){if(n)for(var e=arguments,i=0,s=e.length;s>i;i++)for(var o=0;o<n.length&&(e[i]!==n[o]||(r&&l>=o&&(l--,c>=o&&c--),n.splice(o--,1),!t.unique));o++);return this},has:function(t){if(n)for(var e=0,i=n.length;i>e;e++)if(t===n[e])return!0;return!1},empty:function(){return n=[],this},disable:function(){return n=s=o=e,this},disabled:function(){return!n},lock:function(){return s=e,o&&o!==!0||h.disable(),this},locked:function(){return!s},fireWith:function(e,i){return s&&(r?t.once||s.push([e,i]):t.once&&o||d(e,i)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!o}};return h};var P=[].slice;B.extend({Deferred:function(t){var e=B.Callbacks("once memory"),i=B.Callbacks("once memory"),n=B.Callbacks("memory"),s="pending",o={resolve:e,reject:i,notify:n},r={done:e.add,fail:i.add,progress:n.add,state:function(){return s},isResolved:e.fired,isRejected:i.fired,then:function(t,e,i){return a.done(t).fail(e).progress(i),this},always:function(){return a.done.apply(a,arguments).fail.apply(a,arguments),this},pipe:function(t,e,i){return B.Deferred(function(n){B.each({done:[t,"resolve"],fail:[e,"reject"],progress:[i,"notify"]},function(t,e){var i=e[0],s=e[1],o;a[t](B.isFunction(i)?function(){o=i.apply(this,arguments),o&&B.isFunction(o.promise)?o.promise().then(n.resolve,n.reject,n.notify):n[s+"With"](this===a?n:this,[o])}:n[s])})}).promise()},promise:function(t){if(null==t)t=r;else for(var e in r)t[e]=r[e];return t}},a=r.promise({}),l;for(l in o)a[l]=o[l].fire,a[l+"With"]=o[l].fireWith;return a.done(function(){s="resolved"},i.disable,n.lock).fail(function(){s="rejected"},e.disable,n.lock),t&&t.call(a,a),a},when:function(t){function e(t){return function(e){n[t]=arguments.length>1?P.call(arguments,0):e,--a||c.resolveWith(c,n)}}function i(t){return function(e){r[t]=arguments.length>1?P.call(arguments,0):e,c.notifyWith(u,r)}}var n=P.call(arguments,0),s=0,o=n.length,r=new Array(o),a=o,l=o,c=1>=o&&t&&B.isFunction(t.promise)?t:B.Deferred(),u=c.promise();if(o>1){for(;o>s;s++)n[s]&&n[s].promise&&B.isFunction(n[s].promise)?n[s].promise().then(e(s),c.reject,i(s)):--a;a||c.resolveWith(c,n)}else c!==t&&c.resolveWith(c,o?[t]:[]);return u}}),B.support=function(){var e,i,n,s,o,r,a,l,c,u,d,h,g,p=A.createElement("div"),f=A.documentElement;if(p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",i=p.getElementsByTagName("*"),n=p.getElementsByTagName("a")[0],!i||!i.length||!n)return{};s=A.createElement("select"),o=s.appendChild(A.createElement("option")),r=p.getElementsByTagName("input")[0],e={leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.55/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===r.value,optSelected:o.selected,getSetAttribute:"t"!==p.className,enctype:!!A.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==A.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0},r.checked=!0,e.noCloneChecked=r.cloneNode(!0).checked,s.disabled=!0,e.optDisabled=!o.disabled;try{delete p.test}catch(m){e.deleteExpando=!1}if(!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){e.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),r=A.createElement("input"),r.value="t",r.setAttribute("type","radio"),e.radioValue="t"===r.value,r.setAttribute("checked","checked"),p.appendChild(r),l=A.createDocumentFragment(),l.appendChild(p.lastChild),e.checkClone=l.cloneNode(!0).cloneNode(!0).lastChild.checked,e.appendChecked=r.checked,l.removeChild(r),l.appendChild(p),p.innerHTML="",t.getComputedStyle&&(a=A.createElement("div"),a.style.width="0",a.style.marginRight="0",p.style.width="2px",p.appendChild(a),e.reliableMarginRight=0===(parseInt((t.getComputedStyle(a,null)||{marginRight:0}).marginRight,10)||0)),p.attachEvent)for(h in{submit:1,change:1,focusin:1})d="on"+h,g=d in p,g||(p.setAttribute(d,"return;"),g="function"==typeof p[d]),e[h+"Bubbles"]=g;return l.removeChild(p),l=s=o=a=p=r=null,B(function(){var t,i,n,s,o,r,a,l,u,d,h,f=A.getElementsByTagName("body")[0];f&&(a=1,l="position:absolute;top:0;left:0;width:1px;height:1px;margin:0;",u="visibility:hidden;border:0;",d="style='"+l+"border:5px solid #000;padding:0;'",h="<div "+d+"><div></div></div><table "+d+" cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",t=A.createElement("div"),t.style.cssText=u+"width:0;height:0;position:static;top:0;margin-top:"+a+"px",f.insertBefore(t,f.firstChild),p=A.createElement("div"),t.appendChild(p),p.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>",c=p.getElementsByTagName("td"),g=0===c[0].offsetHeight,c[0].style.display="",c[1].style.display="none",e.reliableHiddenOffsets=g&&0===c[0].offsetHeight,p.innerHTML="",p.style.width=p.style.paddingLeft="1px",B.boxModel=e.boxModel=2===p.offsetWidth,"undefined"!=typeof p.style.zoom&&(p.style.display="inline",p.style.zoom=1,e.inlineBlockNeedsLayout=2===p.offsetWidth,p.style.display="",p.innerHTML="<div style='width:4px;'></div>",e.shrinkWrapBlocks=2!==p.offsetWidth),p.style.cssText=l+u,p.innerHTML=h,i=p.firstChild,n=i.firstChild,o=i.nextSibling.firstChild.firstChild,r={doesNotAddBorder:5!==n.offsetTop,doesAddBorderForTableAndCells:5===o.offsetTop},n.style.position="fixed",n.style.top="20px",r.fixedPosition=20===n.offsetTop||15===n.offsetTop,n.style.position=n.style.top="",i.style.overflow="hidden",i.style.position="relative",r.subtractsBorderForOverflowNotVisible=-5===n.offsetTop,r.doesNotIncludeMarginInBodyOffset=f.offsetTop!==a,f.removeChild(t),p=t=null,B.extend(e,r))}),e}();var F=/^(?:\{.*\}|\[.*\])$/,R=/([A-Z])/g;B.extend({cache:{},uuid:0,expando:"jQuery"+(B.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(t){return t=t.nodeType?B.cache[t[B.expando]]:t[B.expando],!!t&&!s(t)},data:function(t,i,n,s){if(B.acceptData(t)){var o,r,a,l=B.expando,c="string"==typeof i,u=t.nodeType,d=u?B.cache:t,h=u?t[l]:t[l]&&l,g="events"===i;if(h&&d[h]&&(g||s||d[h].data)||!c||n!==e)return h||(u?t[l]=h=++B.uuid:h=l),d[h]||(d[h]={},u||(d[h].toJSON=B.noop)),("object"==typeof i||"function"==typeof i)&&(s?d[h]=B.extend(d[h],i):d[h].data=B.extend(d[h].data,i)),o=r=d[h],s||(r.data||(r.data={}),r=r.data),n!==e&&(r[B.camelCase(i)]=n),g&&!r[i]?o.events:(c?(a=r[i],null==a&&(a=r[B.camelCase(i)])):a=r,a)}},removeData:function(t,e,i){if(B.acceptData(t)){var n,o,r,a=B.expando,l=t.nodeType,c=l?B.cache:t,u=l?t[a]:a;if(c[u]){if(e&&(n=i?c[u]:c[u].data)){B.isArray(e)||(e in n?e=[e]:(e=B.camelCase(e),e=e in n?[e]:e.split(" ")));for(o=0,r=e.length;r>o;o++)delete n[e[o]];if(!(i?s:B.isEmptyObject)(n))return}(i||(delete c[u].data,s(c[u])))&&(B.support.deleteExpando||!c.setInterval?delete c[u]:c[u]=null,l&&(B.support.deleteExpando?delete t[a]:t.removeAttribute?t.removeAttribute(a):t[a]=null))}}},_data:function(t,e,i){return B.data(t,e,i,!0)},acceptData:function(t){if(t.nodeName){var e=B.noData[t.nodeName.toLowerCase()];if(e)return!(e===!0||t.getAttribute("classid")!==e)}return!0}}),B.fn.extend({data:function(t,i){var s,o,r,a=null;if("undefined"==typeof t){if(this.length&&(a=B.data(this[0]),1===this[0].nodeType&&!B._data(this[0],"parsedAttrs"))){o=this[0].attributes;for(var l=0,c=o.length;c>l;l++)r=o[l].name,0===r.indexOf("data-")&&(r=B.camelCase(r.substring(5)),n(this[0],r,a[r]));B._data(this[0],"parsedAttrs",!0)}return a}return"object"==typeof t?this.each(function(){B.data(this,t)}):(s=t.split("."),s[1]=s[1]?"."+s[1]:"",i===e?(a=this.triggerHandler("getData"+s[1]+"!",[s[0]]),a===e&&this.length&&(a=B.data(this[0],t),a=n(this[0],t,a)),a===e&&s[1]?this.data(s[0]):a):this.each(function(){var e=B(this),n=[s[0],i];e.triggerHandler("setData"+s[1]+"!",n),B.data(this,t,i),e.triggerHandler("changeData"+s[1]+"!",n)}))},removeData:function(t){return this.each(function(){B.removeData(this,t)})}}),B.extend({_mark:function(t,e){t&&(e=(e||"fx")+"mark",B._data(t,e,(B._data(t,e)||0)+1))},_unmark:function(t,e,i){if(t!==!0&&(i=e,e=t,t=!1),e){i=i||"fx";var n=i+"mark",s=t?0:(B._data(e,n)||1)-1;s?B._data(e,n,s):(B.removeData(e,n,!0),o(e,i,"mark"))}},queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=B._data(t,e),i&&(!n||B.isArray(i)?n=B._data(t,e,B.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=B.queue(t,e),n=i.shift(),s={};"inprogress"===n&&(n=i.shift()),n&&("fx"===e&&i.unshift("inprogress"),B._data(t,e+".run",s),n.call(t,function(){B.dequeue(t,e)},s)),i.length||(B.removeData(t,e+"queue "+e+".run",!0),o(t,e,"queue"))}}),B.fn.extend({queue:function(t,i){return"string"!=typeof t&&(i=t,t="fx"),i===e?B.queue(this[0],t):this.each(function(){var e=B.queue(this,t,i);"fx"===t&&"inprogress"!==e[0]&&B.dequeue(this,t)})},dequeue:function(t){return this.each(function(){B.dequeue(this,t)})},delay:function(t,e){return t=B.fx?B.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,i){function n(){--a||s.resolveWith(o,[o])}"string"!=typeof t&&(i=t,t=e),t=t||"fx";for(var s=B.Deferred(),o=this,r=o.length,a=1,l=t+"defer",c=t+"queue",u=t+"mark",d;r--;)(d=B.data(o[r],l,e,!0)||(B.data(o[r],c,e,!0)||B.data(o[r],u,e,!0))&&B.data(o[r],l,B.Callbacks("once memory"),!0))&&(a++,d.add(n));return n(),s.promise()}});var z=/[\n\t\r]/g,M=/\s+/,q=/\r/g,U=/^(?:button|input)$/i,W=/^(?:button|input|object|select|textarea)$/i,V=/^a(?:rea)?$/i,Q=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,J=B.support.getSetAttribute,G,X,K;B.fn.extend({attr:function(t,e){return B.access(this,t,e,!0,B.attr)},removeAttr:function(t){return this.each(function(){B.removeAttr(this,t)})},prop:function(t,e){return B.access(this,t,e,!0,B.prop)},removeProp:function(t){return t=B.propFix[t]||t,this.each(function(){try{this[t]=e,delete this[t]}catch(i){}})},addClass:function(t){var e,i,n,s,o,r,a;if(B.isFunction(t))return this.each(function(e){B(this).addClass(t.call(this,e,this.className))});if(t&&"string"==typeof t)for(e=t.split(M),i=0,n=this.length;n>i;i++)if(s=this[i],1===s.nodeType)if(s.className||1!==e.length){for(o=" "+s.className+" ",r=0,a=e.length;a>r;r++)~o.indexOf(" "+e[r]+" ")||(o+=e[r]+" ");s.className=B.trim(o)}else s.className=t;return this},removeClass:function(t){var i,n,s,o,r,a,l;if(B.isFunction(t))return this.each(function(e){B(this).removeClass(t.call(this,e,this.className))});if(t&&"string"==typeof t||t===e)for(i=(t||"").split(M),n=0,s=this.length;s>n;n++)if(o=this[n],1===o.nodeType&&o.className)if(t){for(r=(" "+o.className+" ").replace(z," "),a=0,l=i.length;l>a;a++)r=r.replace(" "+i[a]+" "," ");o.className=B.trim(r)}else o.className="";return this},toggleClass:function(t,e){var i=typeof t,n="boolean"==typeof e;return this.each(B.isFunction(t)?function(i){B(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var s,o=0,r=B(this),a=e,l=t.split(M);s=l[o++];)a=n?a:!r.hasClass(s),r[a?"addClass":"removeClass"](s);else("undefined"===i||"boolean"===i)&&(this.className&&B._data(this,"__className__",this.className),this.className=this.className||t===!1?"":B._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(z," ").indexOf(e)>-1)return!0;return!1},val:function(t){var i,n,s,o=this[0];{if(arguments.length)return s=B.isFunction(t),this.each(function(n){var o=B(this),r;1===this.nodeType&&(r=s?t.call(this,n,o.val()):t,null==r?r="":"number"==typeof r?r+="":B.isArray(r)&&(r=B.map(r,function(t){return null==t?"":t+""})),i=B.valHooks[this.nodeName.toLowerCase()]||B.valHooks[this.type],i&&"set"in i&&i.set(this,r,"value")!==e||(this.value=r))});if(o)return i=B.valHooks[o.nodeName.toLowerCase()]||B.valHooks[o.type],i&&"get"in i&&(n=i.get(o,"value"))!==e?n:(n=o.value,"string"==typeof n?n.replace(q,""):null==n?"":n)}}}),B.extend({valHooks:{option:{get:function(t){var e=t.attributes.value;return!e||e.specified?t.value:t.text}},select:{get:function(t){var e,i,n,s,o=t.selectedIndex,r=[],a=t.options,l="select-one"===t.type;if(0>o)return null;for(i=l?o:0,n=l?o+1:a.length;n>i;i++)if(s=a[i],!(!s.selected||(B.support.optDisabled?s.disabled:null!==s.getAttribute("disabled"))||s.parentNode.disabled&&B.nodeName(s.parentNode,"optgroup"))){if(e=B(s).val(),l)return e;r.push(e)}return l&&!r.length&&a.length?B(a[o]).val():r},set:function(t,e){var i=B.makeArray(e);return B(t).find("option").each(function(){this.selected=B.inArray(B(this).val(),i)>=0}),i.length||(t.selectedIndex=-1),i}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(t,i,n,s){var o,r,a,l=t.nodeType;if(t&&3!==l&&8!==l&&2!==l)return s&&i in B.attrFn?B(t)[i](n):"undefined"==typeof t.getAttribute?B.prop(t,i,n):(a=1!==l||!B.isXMLDoc(t),a&&(i=i.toLowerCase(),r=B.attrHooks[i]||(Q.test(i)?X:G)),n!==e?null===n?void B.removeAttr(t,i):r&&"set"in r&&a&&(o=r.set(t,n,i))!==e?o:(t.setAttribute(i,""+n),n):r&&"get"in r&&a&&null!==(o=r.get(t,i))?o:(o=t.getAttribute(i),null===o?e:o))},removeAttr:function(t,e){var i,n,s,o,r=0;if(e&&1===t.nodeType)for(n=e.toLowerCase().split(M),o=n.length;o>r;r++)s=n[r],s&&(i=B.propFix[s]||s,B.attr(t,s,""),t.removeAttribute(J?s:i),Q.test(s)&&i in t&&(t[i]=!1))},attrHooks:{type:{set:function(t,e){if(U.test(t.nodeName)&&t.parentNode)B.error("type property can't be changed");else if(!B.support.radioValue&&"radio"===e&&B.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}},value:{get:function(t,e){return G&&B.nodeName(t,"button")?G.get(t,e):e in t?t.value:null},set:function(t,e,i){return G&&B.nodeName(t,"button")?G.set(t,e,i):void(t.value=e)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(t,i,n){var s,o,r,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return r=1!==a||!B.isXMLDoc(t),r&&(i=B.propFix[i]||i,o=B.propHooks[i]),n!==e?o&&"set"in o&&(s=o.set(t,n,i))!==e?s:t[i]=n:o&&"get"in o&&null!==(s=o.get(t,i))?s:t[i]},propHooks:{tabIndex:{get:function(t){var i=t.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):W.test(t.nodeName)||V.test(t.nodeName)&&t.href?0:e}}}}),B.attrHooks.tabindex=B.propHooks.tabIndex,X={get:function(t,i){var n,s=B.prop(t,i);return s===!0||"boolean"!=typeof s&&(n=t.getAttributeNode(i))&&n.nodeValue!==!1?i.toLowerCase():e},set:function(t,e,i){var n;return e===!1?B.removeAttr(t,i):(n=B.propFix[i]||i,n in t&&(t[n]=!0),t.setAttribute(i,i.toLowerCase())),i}},J||(K={name:!0,id:!0},G=B.valHooks.button={get:function(t,i){var n;return n=t.getAttributeNode(i),n&&(K[i]?""!==n.nodeValue:n.specified)?n.nodeValue:e},set:function(t,e,i){var n=t.getAttributeNode(i);return n||(n=A.createAttribute(i),t.setAttributeNode(n)),n.nodeValue=e+""}},B.attrHooks.tabindex.set=G.set,B.each(["width","height"],function(t,e){B.attrHooks[e]=B.extend(B.attrHooks[e],{set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}})}),B.attrHooks.contenteditable={get:G.get,set:function(t,e,i){""===e&&(e="false"),G.set(t,e,i)}}),B.support.hrefNormalized||B.each(["href","src","width","height"],function(t,i){B.attrHooks[i]=B.extend(B.attrHooks[i],{get:function(t){var n=t.getAttribute(i,2);return null===n?e:n}})}),B.support.style||(B.attrHooks.style={get:function(t){return t.style.cssText.toLowerCase()||e},set:function(t,e){return t.style.cssText=""+e}}),B.support.optSelected||(B.propHooks.selected=B.extend(B.propHooks.selected,{get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}})),B.support.enctype||(B.propFix.enctype="encoding"),B.support.checkOn||B.each(["radio","checkbox"],function(){B.valHooks[this]={get:function(t){return null===t.getAttribute("value")?"on":t.value}}}),B.each(["radio","checkbox"],function(){B.valHooks[this]=B.extend(B.valHooks[this],{set:function(t,e){return B.isArray(e)?t.checked=B.inArray(B(t).val(),e)>=0:void 0}})});var Y=/^(?:textarea|input|select)$/i,Z=/^([^\.]*)?(?:\.(.+))?$/,tt=/\bhover(\.\S+)?\b/,et=/^key/,it=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,st=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ot=function(t){var e=st.exec(t);return e&&(e[1]=(e[1]||"").toLowerCase(),e[3]=e[3]&&new RegExp("(?:^|\\s)"+e[3]+"(?:\\s|$)")),e},rt=function(t,e){var i=t.attributes||{};return!(e[1]&&t.nodeName.toLowerCase()!==e[1]||e[2]&&(i.id||{}).value!==e[2]||e[3]&&!e[3].test((i["class"]||{}).value))},at=function(t){return B.event.special.hover?t:t.replace(tt,"mouseenter$1 mouseleave$1");

};B.event={add:function(t,i,n,s,o){var r,a,l,c,u,d,h,g,p,f,m,v;if(3!==t.nodeType&&8!==t.nodeType&&i&&n&&(r=B._data(t))){for(n.handler&&(p=n,n=p.handler),n.guid||(n.guid=B.guid++),l=r.events,l||(r.events=l={}),a=r.handle,a||(r.handle=a=function(t){return"undefined"==typeof B||t&&B.event.triggered===t.type?e:B.event.dispatch.apply(a.elem,arguments)},a.elem=t),i=B.trim(at(i)).split(" "),c=0;c<i.length;c++)u=Z.exec(i[c])||[],d=u[1],h=(u[2]||"").split(".").sort(),v=B.event.special[d]||{},d=(o?v.delegateType:v.bindType)||d,v=B.event.special[d]||{},g=B.extend({type:d,origType:u[1],data:s,handler:n,guid:n.guid,selector:o,quick:ot(o),namespace:h.join(".")},p),m=l[d],m||(m=l[d]=[],m.delegateCount=0,v.setup&&v.setup.call(t,s,h,a)!==!1||(t.addEventListener?t.addEventListener(d,a,!1):t.attachEvent&&t.attachEvent("on"+d,a))),v.add&&(v.add.call(t,g),g.handler.guid||(g.handler.guid=n.guid)),o?m.splice(m.delegateCount++,0,g):m.push(g),B.event.global[d]=!0;t=null}},global:{},remove:function(t,e,i,n,s){var o=B.hasData(t)&&B._data(t),r,a,l,c,u,d,h,g,p,f,m,v;if(o&&(g=o.events)){for(e=B.trim(at(e||"")).split(" "),r=0;r<e.length;r++)if(a=Z.exec(e[r])||[],l=c=a[1],u=a[2],l){for(p=B.event.special[l]||{},l=(n?p.delegateType:p.bindType)||l,m=g[l]||[],d=m.length,u=u?new RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,h=0;h<m.length;h++)v=m[h],!s&&c!==v.origType||i&&i.guid!==v.guid||u&&!u.test(v.namespace)||n&&n!==v.selector&&("**"!==n||!v.selector)||(m.splice(h--,1),v.selector&&m.delegateCount--,p.remove&&p.remove.call(t,v));0===m.length&&d!==m.length&&(p.teardown&&p.teardown.call(t,u)!==!1||B.removeEvent(t,l,o.handle),delete g[l])}else for(l in g)B.event.remove(t,l+e[r],i,n,!0);B.isEmptyObject(g)&&(f=o.handle,f&&(f.elem=null),B.removeData(t,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,s,o){if(!s||3!==s.nodeType&&8!==s.nodeType){var r=i.type||i,a=[],l,c,u,d,h,g,p,f,m,v;if(!nt.test(r+B.event.triggered)&&(r.indexOf("!")>=0&&(r=r.slice(0,-1),c=!0),r.indexOf(".")>=0&&(a=r.split("."),r=a.shift(),a.sort()),s&&!B.event.customEvent[r]||B.event.global[r]))if(i="object"==typeof i?i[B.expando]?i:new B.Event(r,i):new B.Event(r),i.type=r,i.isTrigger=!0,i.exclusive=c,i.namespace=a.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+a.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,g=r.indexOf(":")<0?"on"+r:"",s){if(i.result=e,i.target||(i.target=s),n=null!=n?B.makeArray(n):[],n.unshift(i),p=B.event.special[r]||{},!p.trigger||p.trigger.apply(s,n)!==!1){if(m=[[s,p.bindType||r]],!o&&!p.noBubble&&!B.isWindow(s)){for(v=p.delegateType||r,d=nt.test(v+r)?s:s.parentNode,h=null;d;d=d.parentNode)m.push([d,v]),h=d;h&&h===s.ownerDocument&&m.push([h.defaultView||h.parentWindow||t,v])}for(u=0;u<m.length&&!i.isPropagationStopped();u++)d=m[u][0],i.type=m[u][1],f=(B._data(d,"events")||{})[i.type]&&B._data(d,"handle"),f&&f.apply(d,n),f=g&&d[g],f&&B.acceptData(d)&&f.apply(d,n)===!1&&i.preventDefault();return i.type=r,o||i.isDefaultPrevented()||p._default&&p._default.apply(s.ownerDocument,n)!==!1||"click"===r&&B.nodeName(s,"a")||!B.acceptData(s)||g&&s[r]&&("focus"!==r&&"blur"!==r||0!==i.target.offsetWidth)&&!B.isWindow(s)&&(h=s[g],h&&(s[g]=null),B.event.triggered=r,s[r](),B.event.triggered=e,h&&(s[g]=h)),i.result}}else{l=B.cache;for(u in l)l[u].events&&l[u].events[r]&&B.event.trigger(i,n,l[u].handle.elem,!0)}}},dispatch:function(i){i=B.event.fix(i||t.event);var n=(B._data(this,"events")||{})[i.type]||[],s=n.delegateCount,o=[].slice.call(arguments,0),r=!i.exclusive&&!i.namespace,a=[],l,c,u,d,h,g,p,f,m,v,b;if(o[0]=i,i.delegateTarget=this,s&&!i.target.disabled&&(!i.button||"click"!==i.type))for(d=B(this),d.context=this.ownerDocument||this,u=i.target;u!=this;u=u.parentNode||this){for(g={},f=[],d[0]=u,l=0;s>l;l++)m=n[l],v=m.selector,g[v]===e&&(g[v]=m.quick?rt(u,m.quick):d.is(v)),g[v]&&f.push(m);f.length&&a.push({elem:u,matches:f})}for(n.length>s&&a.push({elem:this,matches:n.slice(s)}),l=0;l<a.length&&!i.isPropagationStopped();l++)for(p=a[l],i.currentTarget=p.elem,c=0;c<p.matches.length&&!i.isImmediatePropagationStopped();c++)m=p.matches[c],(r||!i.namespace&&!m.namespace||i.namespace_re&&i.namespace_re.test(m.namespace))&&(i.data=m.data,i.handleObj=m,h=((B.event.special[m.origType]||{}).handle||m.handler).apply(p.elem,o),h!==e&&(i.result=h,h===!1&&(i.preventDefault(),i.stopPropagation())));return i.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,i){var n,s,o,r=i.button,a=i.fromElement;return null==t.pageX&&null!=i.clientX&&(n=t.target.ownerDocument||A,s=n.documentElement,o=n.body,t.pageX=i.clientX+(s&&s.scrollLeft||o&&o.scrollLeft||0)-(s&&s.clientLeft||o&&o.clientLeft||0),t.pageY=i.clientY+(s&&s.scrollTop||o&&o.scrollTop||0)-(s&&s.clientTop||o&&o.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?i.toElement:a),t.which||r===e||(t.which=1&r?1:2&r?3:4&r?2:0),t}},fix:function(t){if(t[B.expando])return t;var i,n,s=t,o=B.event.fixHooks[t.type]||{},r=o.props?this.props.concat(o.props):this.props;for(t=B.Event(s),i=r.length;i;)n=r[--i],t[n]=s[n];return t.target||(t.target=s.srcElement||A),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey===e&&(t.metaKey=t.ctrlKey),o.filter?o.filter(t,s):t},special:{ready:{setup:B.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(t,e,i){B.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(t,e){this.onbeforeunload===e&&(this.onbeforeunload=null)}}},simulate:function(t,e,i,n){var s=B.extend(new B.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?B.event.trigger(s,null,e):B.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},B.event.handle=B.event.dispatch,B.removeEvent=A.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){t.detachEvent&&t.detachEvent("on"+e,i)},B.Event=function(t,e){return this instanceof B.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault()?a:r):this.type=t,e&&B.extend(this,e),this.timeStamp=t&&t.timeStamp||B.now(),void(this[B.expando]=!0)):new B.Event(t,e)},B.Event.prototype={preventDefault:function(){this.isDefaultPrevented=a;var t=this.originalEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=a;var t=this.originalEvent;t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=a,this.stopPropagation()},isDefaultPrevented:r,isPropagationStopped:r,isImmediatePropagationStopped:r},B.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){B.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i=this,n=t.relatedTarget,s=t.handleObj,o=s.selector,r;return(!n||n!==i&&!B.contains(i,n))&&(t.type=s.origType,r=s.handler.apply(this,arguments),t.type=e),r}}}),B.support.submitBubbles||(B.event.special.submit={setup:function(){return B.nodeName(this,"form")?!1:void B.event.add(this,"click._submit keypress._submit",function(t){var i=t.target,n=B.nodeName(i,"input")||B.nodeName(i,"button")?i.form:e;n&&!n._submit_attached&&(B.event.add(n,"submit._submit",function(t){this.parentNode&&!t.isTrigger&&B.event.simulate("submit",this.parentNode,t,!0)}),n._submit_attached=!0)})},teardown:function(){return B.nodeName(this,"form")?!1:void B.event.remove(this,"._submit")}}),B.support.changeBubbles||(B.event.special.change={setup:function(){return Y.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(B.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),B.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1,B.event.simulate("change",this,t,!0))})),!1):void B.event.add(this,"beforeactivate._change",function(t){var e=t.target;Y.test(e.nodeName)&&!e._change_attached&&(B.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||B.event.simulate("change",this.parentNode,t,!0)}),e._change_attached=!0)})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return B.event.remove(this,"._change"),Y.test(this.nodeName)}}),B.support.focusinBubbles||B.each({focus:"focusin",blur:"focusout"},function(t,e){var i=0,n=function(t){B.event.simulate(e,t.target,B.event.fix(t),!0)};B.event.special[e]={setup:function(){0===i++&&A.addEventListener(t,n,!0)},teardown:function(){0===--i&&A.removeEventListener(t,n,!0)}}}),B.fn.extend({on:function(t,i,n,s,o){var a,l;if("object"==typeof t){"string"!=typeof i&&(n=i,i=e);for(l in t)this.on(l,i,n,t[l],o);return this}if(null==n&&null==s?(s=i,n=i=e):null==s&&("string"==typeof i?(s=n,n=e):(s=n,n=i,i=e)),s===!1)s=r;else if(!s)return this;return 1===o&&(a=s,s=function(t){return B().off(t),a.apply(this,arguments)},s.guid=a.guid||(a.guid=B.guid++)),this.each(function(){B.event.add(this,t,s,n,i)})},one:function(t,e,i,n){return this.on.call(this,t,e,i,n,1)},off:function(t,i,n){if(t&&t.preventDefault&&t.handleObj){var s=t.handleObj;return B(t.delegateTarget).off(s.namespace?s.type+"."+s.namespace:s.type,s.selector,s.handler),this}if("object"==typeof t){for(var o in t)this.off(o,i,t[o]);return this}return(i===!1||"function"==typeof i)&&(n=i,i=e),n===!1&&(n=r),this.each(function(){B.event.remove(this,t,n,i)})},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},live:function(t,e,i){return B(this.context).on(t,this.selector,e,i),this},die:function(t,e){return B(this.context).off(t,this.selector||"**",e),this},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1==arguments.length?this.off(t,"**"):this.off(e,t,i)},trigger:function(t,e){return this.each(function(){B.event.trigger(t,e,this)})},triggerHandler:function(t,e){return this[0]?B.event.trigger(t,e,this[0],!0):void 0},toggle:function(t){var e=arguments,i=t.guid||B.guid++,n=0,s=function(i){var s=(B._data(this,"lastToggle"+t.guid)||0)%n;return B._data(this,"lastToggle"+t.guid,s+1),i.preventDefault(),e[s].apply(this,arguments)||!1};for(s.guid=i;n<e.length;)e[n++].guid=i;return this.click(s)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),B.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){B.fn[e]=function(t,i){return null==i&&(i=t,t=null),arguments.length>0?this.on(e,null,t,i):this.trigger(e)},B.attrFn&&(B.attrFn[e]=!0),et.test(e)&&(B.event.fixHooks[e]=B.event.keyHooks),it.test(e)&&(B.event.fixHooks[e]=B.event.mouseHooks)}),function(){function t(t,e,i,n,o,r){for(var a=0,l=n.length;l>a;a++){var c=n[a];if(c){var u=!1;for(c=c[t];c;){if(c[s]===i){u=n[c.sizset];break}if(1!==c.nodeType||r||(c[s]=i,c.sizset=a),c.nodeName.toLowerCase()===e){u=c;break}c=c[t]}n[a]=u}}}function i(t,e,i,n,o,r){for(var a=0,l=n.length;l>a;a++){var c=n[a];if(c){var u=!1;for(c=c[t];c;){if(c[s]===i){u=n[c.sizset];break}if(1===c.nodeType)if(r||(c[s]=i,c.sizset=a),"string"!=typeof e){if(c===e){u=!0;break}}else if(h.filter(e,[c]).length>0){u=c;break}c=c[t]}n[a]=u}}}var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,s="sizcache"+(Math.random()+"").replace(".",""),o=0,r=Object.prototype.toString,a=!1,l=!0,c=/\\/g,u=/\r\n/g,d=/\W/;[0,0].sort(function(){return l=!1,0});var h=function(t,e,i,s){i=i||[],e=e||A;var o=e;if(1!==e.nodeType&&9!==e.nodeType)return[];if(!t||"string"!=typeof t)return i;var a,l,c,u,d,g,m,v,y=!0,C=h.isXML(e),w=[],k=t;do if(n.exec(""),a=n.exec(k),a&&(k=a[3],w.push(a[1]),a[2])){u=a[3];break}while(a);if(w.length>1&&f.exec(t))if(2===w.length&&p.relative[w[0]])l=x(w[0]+w[1],e,s);else for(l=p.relative[w[0]]?[e]:h(w.shift(),e);w.length;)t=w.shift(),p.relative[t]&&(t+=w.shift()),l=x(t,l,s);else if(!s&&w.length>1&&9===e.nodeType&&!C&&p.match.ID.test(w[0])&&!p.match.ID.test(w[w.length-1])&&(d=h.find(w.shift(),e,C),e=d.expr?h.filter(d.expr,d.set)[0]:d.set[0]),e)for(d=s?{expr:w.pop(),set:b(s)}:h.find(w.pop(),1!==w.length||"~"!==w[0]&&"+"!==w[0]||!e.parentNode?e:e.parentNode,C),l=d.expr?h.filter(d.expr,d.set):d.set,w.length>0?c=b(l):y=!1;w.length;)g=w.pop(),m=g,p.relative[g]?m=w.pop():g="",null==m&&(m=e),p.relative[g](c,m,C);else c=w=[];if(c||(c=l),c||h.error(g||t),"[object Array]"===r.call(c))if(y)if(e&&1===e.nodeType)for(v=0;null!=c[v];v++)c[v]&&(c[v]===!0||1===c[v].nodeType&&h.contains(e,c[v]))&&i.push(l[v]);else for(v=0;null!=c[v];v++)c[v]&&1===c[v].nodeType&&i.push(l[v]);else i.push.apply(i,c);else b(c,i);return u&&(h(u,o,i,s),h.uniqueSort(i)),i};h.uniqueSort=function(t){if(C&&(a=l,t.sort(C),a))for(var e=1;e<t.length;e++)t[e]===t[e-1]&&t.splice(e--,1);return t},h.matches=function(t,e){return h(t,null,null,e)},h.matchesSelector=function(t,e){return h(e,null,null,[t]).length>0},h.find=function(t,e,i){var n,s,o,r,a,l;if(!t)return[];for(s=0,o=p.order.length;o>s;s++)if(a=p.order[s],(r=p.leftMatch[a].exec(t))&&(l=r[1],r.splice(1,1),"\\"!==l.substr(l.length-1)&&(r[1]=(r[1]||"").replace(c,""),n=p.find[a](r,e,i),null!=n))){t=t.replace(p.match[a],"");break}return n||(n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):[]),{set:n,expr:t}},h.filter=function(t,i,n,s){for(var o,r,a,l,c,u,d,g,f,m=t,v=[],b=i,y=i&&i[0]&&h.isXML(i[0]);t&&i.length;){for(a in p.filter)if(null!=(o=p.leftMatch[a].exec(t))&&o[2]){if(u=p.filter[a],d=o[1],r=!1,o.splice(1,1),"\\"===d.substr(d.length-1))continue;if(b===v&&(v=[]),p.preFilter[a])if(o=p.preFilter[a](o,b,n,v,s,y)){if(o===!0)continue}else r=l=!0;if(o)for(g=0;null!=(c=b[g]);g++)c&&(l=u(c,o,g,b),f=s^l,n&&null!=l?f?r=!0:b[g]=!1:f&&(v.push(c),r=!0));if(l!==e){if(n||(b=v),t=t.replace(p.match[a],""),!r)return[];break}}if(t===m){if(null!=r)break;h.error(t)}m=t}return b},h.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)};var g=h.getText=function(t){var e,i,n=t.nodeType,s="";if(n){if(1===n||9===n){if("string"==typeof t.textContent)return t.textContent;if("string"==typeof t.innerText)return t.innerText.replace(u,"");for(t=t.firstChild;t;t=t.nextSibling)s+=g(t)}else if(3===n||4===n)return t.nodeValue}else for(e=0;i=t[e];e++)8!==i.nodeType&&(s+=g(i));return s},p=h.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(t){return t.getAttribute("href")},type:function(t){return t.getAttribute("type")}},relative:{"+":function(t,e){var i="string"==typeof e,n=i&&!d.test(e),s=i&&!n;n&&(e=e.toLowerCase());for(var o=0,r=t.length,a;r>o;o++)if(a=t[o]){for(;(a=a.previousSibling)&&1!==a.nodeType;);t[o]=s||a&&a.nodeName.toLowerCase()===e?a||!1:a===e}s&&h.filter(e,t,!0)},">":function(t,e){var i,n="string"==typeof e,s=0,o=t.length;if(n&&!d.test(e)){for(e=e.toLowerCase();o>s;s++)if(i=t[s]){var r=i.parentNode;t[s]=r.nodeName.toLowerCase()===e?r:!1}}else{for(;o>s;s++)i=t[s],i&&(t[s]=n?i.parentNode:i.parentNode===e);n&&h.filter(e,t,!0)}},"":function(e,n,s){var r,a=o++,l=i;"string"!=typeof n||d.test(n)||(n=n.toLowerCase(),r=n,l=t),l("parentNode",n,a,e,r,s)},"~":function(e,n,s){var r,a=o++,l=i;"string"!=typeof n||d.test(n)||(n=n.toLowerCase(),r=n,l=t),l("previousSibling",n,a,e,r,s)}},find:{ID:function(t,e,i){if("undefined"!=typeof e.getElementById&&!i){var n=e.getElementById(t[1]);return n&&n.parentNode?[n]:[]}},NAME:function(t,e){if("undefined"!=typeof e.getElementsByName){for(var i=[],n=e.getElementsByName(t[1]),s=0,o=n.length;o>s;s++)n[s].getAttribute("name")===t[1]&&i.push(n[s]);return 0===i.length?null:i}},TAG:function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t[1]):void 0}},preFilter:{CLASS:function(t,e,i,n,s,o){if(t=" "+t[1].replace(c,"")+" ",o)return t;for(var r=0,a;null!=(a=e[r]);r++)a&&(s^(a.className&&(" "+a.className+" ").replace(/[\t\n\r]/g," ").indexOf(t)>=0)?i||n.push(a):i&&(e[r]=!1));return!1},ID:function(t){return t[1].replace(c,"")},TAG:function(t,e){return t[1].replace(c,"").toLowerCase()},CHILD:function(t){if("nth"===t[1]){t[2]||h.error(t[0]),t[2]=t[2].replace(/^\+|\s*/g,"");var e=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===t[2]&&"2n"||"odd"===t[2]&&"2n+1"||!/\D/.test(t[2])&&"0n+"+t[2]||t[2]);t[2]=e[1]+(e[2]||1)-0,t[3]=e[3]-0}else t[2]&&h.error(t[0]);return t[0]=o++,t},ATTR:function(t,e,i,n,s,o){var r=t[1]=t[1].replace(c,"");return!o&&p.attrMap[r]&&(t[1]=p.attrMap[r]),t[4]=(t[4]||t[5]||"").replace(c,""),"~="===t[2]&&(t[4]=" "+t[4]+" "),t},PSEUDO:function(t,e,i,s,o){if("not"===t[1]){if(!((n.exec(t[3])||"").length>1||/^\w/.test(t[3]))){var r=h.filter(t[3],e,i,!0^o);return i||s.push.apply(s,r),!1}t[3]=h(t[3],null,null,e)}else if(p.match.POS.test(t[0])||p.match.CHILD.test(t[0]))return!0;return t},POS:function(t){return t.unshift(!0),t}},filters:{enabled:function(t){return t.disabled===!1&&"hidden"!==t.type},disabled:function(t){return t.disabled===!0},checked:function(t){return t.checked===!0},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},parent:function(t){return!!t.firstChild},empty:function(t){return!t.firstChild},has:function(t,e,i){return!!h(i[3],t).length},header:function(t){return/h\d/i.test(t.nodeName)},text:function(t){var e=t.getAttribute("type"),i=t.type;return"input"===t.nodeName.toLowerCase()&&"text"===i&&(e===i||null===e)},radio:function(t){return"input"===t.nodeName.toLowerCase()&&"radio"===t.type},checkbox:function(t){return"input"===t.nodeName.toLowerCase()&&"checkbox"===t.type},file:function(t){return"input"===t.nodeName.toLowerCase()&&"file"===t.type},password:function(t){return"input"===t.nodeName.toLowerCase()&&"password"===t.type},submit:function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&"submit"===t.type},image:function(t){return"input"===t.nodeName.toLowerCase()&&"image"===t.type},reset:function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&"reset"===t.type},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},input:function(t){return/input|select|textarea|button/i.test(t.nodeName)},focus:function(t){return t===t.ownerDocument.activeElement}},setFilters:{first:function(t,e){return 0===e},last:function(t,e,i,n){return e===n.length-1},even:function(t,e){return e%2===0},odd:function(t,e){return e%2===1},lt:function(t,e,i){return e<i[3]-0},gt:function(t,e,i){return e>i[3]-0},nth:function(t,e,i){return i[3]-0===e},eq:function(t,e,i){return i[3]-0===e}},filter:{PSEUDO:function(t,e,i,n){var s=e[1],o=p.filters[s];if(o)return o(t,i,e,n);if("contains"===s)return(t.textContent||t.innerText||g([t])||"").indexOf(e[3])>=0;if("not"===s){for(var r=e[3],a=0,l=r.length;l>a;a++)if(r[a]===t)return!1;return!0}h.error(s)},CHILD:function(t,e){var i,n,o,r,a,l,c,u=e[1],d=t;switch(u){case"only":case"first":for(;d=d.previousSibling;)if(1===d.nodeType)return!1;if("first"===u)return!0;d=t;case"last":for(;d=d.nextSibling;)if(1===d.nodeType)return!1;return!0;case"nth":if(i=e[2],n=e[3],1===i&&0===n)return!0;if(o=e[0],r=t.parentNode,r&&(r[s]!==o||!t.nodeIndex)){for(l=0,d=r.firstChild;d;d=d.nextSibling)1===d.nodeType&&(d.nodeIndex=++l);r[s]=o}return c=t.nodeIndex-n,0===i?0===c:c%i===0&&c/i>=0}},ID:function(t,e){return 1===t.nodeType&&t.getAttribute("id")===e},TAG:function(t,e){return"*"===e&&1===t.nodeType||!!t.nodeName&&t.nodeName.toLowerCase()===e},CLASS:function(t,e){return(" "+(t.className||t.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(t,e){var i=e[1],n=h.attr?h.attr(t,i):p.attrHandle[i]?p.attrHandle[i](t):null!=t[i]?t[i]:t.getAttribute(i),s=n+"",o=e[2],r=e[4];return null==n?"!="===o:!o&&h.attr?null!=n:"="===o?s===r:"*="===o?s.indexOf(r)>=0:"~="===o?(" "+s+" ").indexOf(r)>=0:r?"!="===o?s!==r:"^="===o?0===s.indexOf(r):"$="===o?s.substr(s.length-r.length)===r:"|="===o?s===r||s.substr(0,r.length+1)===r+"-":!1:s&&n!==!1},POS:function(t,e,i,n){var s=e[2],o=p.setFilters[s];return o?o(t,i,e,n):void 0}}},f=p.match.POS,m=function(t,e){return"\\"+(e-0+1)};for(var v in p.match)p.match[v]=new RegExp(p.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source),p.leftMatch[v]=new RegExp(/(^(?:.|\r|\n)*?)/.source+p.match[v].source.replace(/\\(\d+)/g,m));var b=function(t,e){return t=Array.prototype.slice.call(t,0),e?(e.push.apply(e,t),e):t};try{Array.prototype.slice.call(A.documentElement.childNodes,0)[0].nodeType}catch(y){b=function(t,e){var i=0,n=e||[];if("[object Array]"===r.call(t))Array.prototype.push.apply(n,t);else if("number"==typeof t.length)for(var s=t.length;s>i;i++)n.push(t[i]);else for(;t[i];i++)n.push(t[i]);return n}}var C,w;A.documentElement.compareDocumentPosition?C=function(t,e){return t===e?(a=!0,0):t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e)?-1:1:t.compareDocumentPosition?-1:1}:(C=function(t,e){if(t===e)return a=!0,0;if(t.sourceIndex&&e.sourceIndex)return t.sourceIndex-e.sourceIndex;var i,n,s=[],o=[],r=t.parentNode,l=e.parentNode,c=r;if(r===l)return w(t,e);if(!r)return-1;if(!l)return 1;for(;c;)s.unshift(c),c=c.parentNode;for(c=l;c;)o.unshift(c),c=c.parentNode;i=s.length,n=o.length;for(var u=0;i>u&&n>u;u++)if(s[u]!==o[u])return w(s[u],o[u]);return u===i?w(t,o[u],-1):w(s[u],e,1)},w=function(t,e,i){if(t===e)return i;for(var n=t.nextSibling;n;){if(n===e)return-1;n=n.nextSibling}return 1}),function(){var t=A.createElement("div"),i="script"+(new Date).getTime(),n=A.documentElement;t.innerHTML="<a name='"+i+"'/>",n.insertBefore(t,n.firstChild),A.getElementById(i)&&(p.find.ID=function(t,i,n){if("undefined"!=typeof i.getElementById&&!n){var s=i.getElementById(t[1]);return s?s.id===t[1]||"undefined"!=typeof s.getAttributeNode&&s.getAttributeNode("id").nodeValue===t[1]?[s]:e:[]}},p.filter.ID=function(t,e){var i="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return 1===t.nodeType&&i&&i.nodeValue===e}),n.removeChild(t),n=t=null}(),function(){var t=A.createElement("div");t.appendChild(A.createComment("")),t.getElementsByTagName("*").length>0&&(p.find.TAG=function(t,e){var i=e.getElementsByTagName(t[1]);if("*"===t[1]){for(var n=[],s=0;i[s];s++)1===i[s].nodeType&&n.push(i[s]);i=n}return i}),t.innerHTML="<a href='#'></a>",t.firstChild&&"undefined"!=typeof t.firstChild.getAttribute&&"#"!==t.firstChild.getAttribute("href")&&(p.attrHandle.href=function(t){return t.getAttribute("href",2)}),t=null}(),A.querySelectorAll&&!function(){var t=h,e=A.createElement("div"),i="__sizzle__";if(e.innerHTML="<p class='TEST'></p>",!e.querySelectorAll||0!==e.querySelectorAll(".TEST").length){h=function(e,n,s,o){if(n=n||A,!o&&!h.isXML(n)){var r=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(e);if(r&&(1===n.nodeType||9===n.nodeType)){if(r[1])return b(n.getElementsByTagName(e),s);if(r[2]&&p.find.CLASS&&n.getElementsByClassName)return b(n.getElementsByClassName(r[2]),s)}if(9===n.nodeType){if("body"===e&&n.body)return b([n.body],s);if(r&&r[3]){var a=n.getElementById(r[3]);if(!a||!a.parentNode)return b([],s);if(a.id===r[3])return b([a],s)}try{return b(n.querySelectorAll(e),s)}catch(l){}}else if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){var c=n,u=n.getAttribute("id"),d=u||i,g=n.parentNode,f=/^\s*[+~]/.test(e);u?d=d.replace(/'/g,"\\$&"):n.setAttribute("id",d),f&&g&&(n=n.parentNode);try{if(!f||g)return b(n.querySelectorAll("[id='"+d+"'] "+e),s)}catch(m){}finally{u||c.removeAttribute("id")}}}return t(e,n,s,o)};for(var n in t)h[n]=t[n];e=null}}(),function(){var t=A.documentElement,e=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.msMatchesSelector;if(e){var i=!e.call(A.createElement("div"),"div"),n=!1;try{e.call(A.documentElement,"[test!='']:sizzle")}catch(s){n=!0}h.matchesSelector=function(t,s){if(s=s.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!h.isXML(t))try{if(n||!p.match.PSEUDO.test(s)&&!/!=/.test(s)){var o=e.call(t,s);if(o||!i||t.document&&11!==t.document.nodeType)return o}}catch(r){}return h(s,null,null,[t]).length>0}}}(),function(){var t=A.createElement("div");t.innerHTML="<div class='test e'></div><div class='test'></div>",t.getElementsByClassName&&0!==t.getElementsByClassName("e").length&&(t.lastChild.className="e",1!==t.getElementsByClassName("e").length&&(p.order.splice(1,0,"CLASS"),p.find.CLASS=function(t,e,i){return"undefined"==typeof e.getElementsByClassName||i?void 0:e.getElementsByClassName(t[1])},t=null))}(),h.contains=A.documentElement.contains?function(t,e){return t!==e&&(t.contains?t.contains(e):!0)}:A.documentElement.compareDocumentPosition?function(t,e){return!!(16&t.compareDocumentPosition(e))}:function(){return!1},h.isXML=function(t){var e=(t?t.ownerDocument||t:0).documentElement;return e?"HTML"!==e.nodeName:!1};var x=function(t,e,i){for(var n,s=[],o="",r=e.nodeType?[e]:e;n=p.match.PSEUDO.exec(t);)o+=n[0],t=t.replace(p.match.PSEUDO,"");t=p.relative[t]?t+"*":t;for(var a=0,l=r.length;l>a;a++)h(t,r[a],s,i);return h.filter(o,s)};h.attr=B.attr,h.selectors.attrMap={},B.find=h,B.expr=h.selectors,B.expr[":"]=B.expr.filters,B.unique=h.uniqueSort,B.text=h.getText,B.isXMLDoc=h.isXML,B.contains=h.contains}();var lt=/Until$/,ct=/^(?:parents|prevUntil|prevAll)/,ut=/,/,dt=/^.[^:#\[\.,]*$/,ht=Array.prototype.slice,gt=B.expr.match.POS,pt={children:!0,contents:!0,next:!0,prev:!0};B.fn.extend({find:function(t){var e=this,i,n;if("string"!=typeof t)return B(t).filter(function(){for(i=0,n=e.length;n>i;i++)if(B.contains(e[i],this))return!0});var s=this.pushStack("","find",t),o,r,a;for(i=0,n=this.length;n>i;i++)if(o=s.length,B.find(t,this[i],s),i>0)for(r=o;r<s.length;r++)for(a=0;o>a;a++)if(s[a]===s[r]){s.splice(r--,1);break}return s},has:function(t){var e=B(t);return this.filter(function(){for(var t=0,i=e.length;i>t;t++)if(B.contains(this,e[t]))return!0})},not:function(t){return this.pushStack(c(this,t,!1),"not",t)},filter:function(t){return this.pushStack(c(this,t,!0),"filter",t)},is:function(t){return!!t&&("string"==typeof t?gt.test(t)?B(t,this.context).index(this[0])>=0:B.filter(t,this).length>0:this.filter(t).length>0)},closest:function(t,e){var i=[],n,s,o=this[0];if(B.isArray(t)){for(var r=1;o&&o.ownerDocument&&o!==e;){for(n=0;n<t.length;n++)B(o).is(t[n])&&i.push({selector:t[n],elem:o,level:r});o=o.parentNode,r++}return i}var a=gt.test(t)||"string"!=typeof t?B(t,e||this.context):0;for(n=0,s=this.length;s>n;n++)for(o=this[n];o;){if(a?a.index(o)>-1:B.find.matchesSelector(o,t)){i.push(o);break}if(o=o.parentNode,!o||!o.ownerDocument||o===e||11===o.nodeType)break}return i=i.length>1?B.unique(i):i,this.pushStack(i,"closest",t)},index:function(t){return t?"string"==typeof t?B.inArray(this[0],B(t)):B.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(t,e){var i="string"==typeof t?B(t,e):B.makeArray(t&&t.nodeType?[t]:t),n=B.merge(this.get(),i);return this.pushStack(l(i[0])||l(n[0])?n:B.unique(n))},andSelf:function(){return this.add(this.prevObject)}}),B.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return B.dir(t,"parentNode")},parentsUntil:function(t,e,i){return B.dir(t,"parentNode",i)},next:function(t){return B.nth(t,2,"nextSibling")},prev:function(t){return B.nth(t,2,"previousSibling")},nextAll:function(t){return B.dir(t,"nextSibling")},prevAll:function(t){return B.dir(t,"previousSibling")},nextUntil:function(t,e,i){return B.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return B.dir(t,"previousSibling",i)},siblings:function(t){return B.sibling(t.parentNode.firstChild,t)},children:function(t){return B.sibling(t.firstChild)},contents:function(t){return B.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:B.makeArray(t.childNodes)}},function(t,e){B.fn[t]=function(i,n){var s=B.map(this,e,i);return lt.test(t)||(n=i),n&&"string"==typeof n&&(s=B.filter(n,s)),s=this.length>1&&!pt[t]?B.unique(s):s,(this.length>1||ut.test(n))&&ct.test(t)&&(s=s.reverse()),this.pushStack(s,t,ht.call(arguments).join(","))}}),B.extend({filter:function(t,e,i){return i&&(t=":not("+t+")"),1===e.length?B.find.matchesSelector(e[0],t)?[e[0]]:[]:B.find.matches(t,e)},dir:function(t,i,n){for(var s=[],o=t[i];o&&9!==o.nodeType&&(n===e||1!==o.nodeType||!B(o).is(n));)1===o.nodeType&&s.push(o),o=o[i];return s},nth:function(t,e,i,n){e=e||1;for(var s=0;t&&(1!==t.nodeType||++s!==e);t=t[i]);return t},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}});var ft="abbr|article|aside|audio|canvas|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",mt=/ jQuery\d+="(?:\d+|null)"/g,vt=/^\s+/,bt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,yt=/<([\w:]+)/,Ct=/<tbody/i,wt=/<|&#?\w+;/,xt=/<(?:script|style)/i,kt=/<(?:script|object|embed|option|style)/i,$t=new RegExp("<(?:"+ft+")","i"),St=/checked\s*(?:[^=]|=\s*.checked.)/i,Et=/\/(java|ecma)script/i,Tt=/^\s*<!(?:\[CDATA\[|\-\-)/,_t={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},It=u(A);_t.optgroup=_t.option,_t.tbody=_t.tfoot=_t.colgroup=_t.caption=_t.thead,_t.th=_t.td,B.support.htmlSerialize||(_t._default=[1,"div<div>","</div>"]),B.fn.extend({text:function(t){return B.isFunction(t)?this.each(function(e){var i=B(this);i.text(t.call(this,e,i.text()))}):"object"!=typeof t&&t!==e?this.empty().append((this[0]&&this[0].ownerDocument||A).createTextNode(t)):B.text(this)},wrapAll:function(t){if(B.isFunction(t))return this.each(function(e){B(this).wrapAll(t.call(this,e))});if(this[0]){var e=B(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(B.isFunction(t)?function(e){B(this).wrapInner(t.call(this,e))}:function(){var e=B(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=B.isFunction(t);return this.each(function(i){B(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){B.nodeName(this,"body")||B(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(t){1===this.nodeType&&this.appendChild(t)})},prepend:function(){return this.domManip(arguments,!0,function(t){1===this.nodeType&&this.insertBefore(t,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this)});if(arguments.length){var t=B.clean(arguments);return t.push.apply(t,this.toArray()),
this.pushStack(t,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(t){this.parentNode.insertBefore(t,this.nextSibling)});if(arguments.length){var t=this.pushStack(this,"after",arguments);return t.push.apply(t,B.clean(arguments)),t}},remove:function(t,e){for(var i=0,n;null!=(n=this[i]);i++)(!t||B.filter(t,[n]).length)&&(e||1!==n.nodeType||(B.cleanData(n.getElementsByTagName("*")),B.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var t=0,e;null!=(e=this[t]);t++)for(1===e.nodeType&&B.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return B.clone(this,t,e)})},html:function(t){if(t===e)return this[0]&&1===this[0].nodeType?this[0].innerHTML.replace(mt,""):null;if("string"!=typeof t||xt.test(t)||!B.support.leadingWhitespace&&vt.test(t)||_t[(yt.exec(t)||["",""])[1].toLowerCase()])B.isFunction(t)?this.each(function(e){var i=B(this);i.html(t.call(this,e,i.html()))}):this.empty().append(t);else{t=t.replace(bt,"<$1></$2>");try{for(var i=0,n=this.length;n>i;i++)1===this[i].nodeType&&(B.cleanData(this[i].getElementsByTagName("*")),this[i].innerHTML=t)}catch(s){this.empty().append(t)}}return this},replaceWith:function(t){return this[0]&&this[0].parentNode?B.isFunction(t)?this.each(function(e){var i=B(this),n=i.html();i.replaceWith(t.call(this,e,n))}):("string"!=typeof t&&(t=B(t).detach()),this.each(function(){var e=this.nextSibling,i=this.parentNode;B(this).remove(),e?B(e).before(t):B(i).append(t)})):this.length?this.pushStack(B(B.isFunction(t)?t():t),"replaceWith",t):this},detach:function(t){return this.remove(t,!0)},domManip:function(t,i,n){var s,o,r,a,l=t[0],c=[];if(!B.support.checkClone&&3===arguments.length&&"string"==typeof l&&St.test(l))return this.each(function(){B(this).domManip(t,i,n,!0)});if(B.isFunction(l))return this.each(function(s){var o=B(this);t[0]=l.call(this,s,i?o.html():e),o.domManip(t,i,n)});if(this[0]){if(a=l&&l.parentNode,s=B.support.parentNode&&a&&11===a.nodeType&&a.childNodes.length===this.length?{fragment:a}:B.buildFragment(t,this,c),r=s.fragment,o=1===r.childNodes.length?r=r.firstChild:r.firstChild){i=i&&B.nodeName(o,"tr");for(var u=0,h=this.length,g=h-1;h>u;u++)n.call(i?d(this[u],o):this[u],s.cacheable||h>1&&g>u?B.clone(r,!0,!0):r)}c.length&&B.each(c,b)}return this}}),B.buildFragment=function(t,e,i){var n,s,o,r,a=t[0];return e&&e[0]&&(r=e[0].ownerDocument||e[0]),r.createDocumentFragment||(r=A),!(1===t.length&&"string"==typeof a&&a.length<512&&r===A&&"<"===a.charAt(0))||kt.test(a)||!B.support.checkClone&&St.test(a)||!B.support.html5Clone&&$t.test(a)||(s=!0,o=B.fragments[a],o&&1!==o&&(n=o)),n||(n=r.createDocumentFragment(),B.clean(t,r,n,i)),s&&(B.fragments[a]=o?n:1),{fragment:n,cacheable:s}},B.fragments={},B.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){B.fn[t]=function(i){var n=[],s=B(i),o=1===this.length&&this[0].parentNode;if(o&&11===o.nodeType&&1===o.childNodes.length&&1===s.length)return s[e](this[0]),this;for(var r=0,a=s.length;a>r;r++){var l=(r>0?this.clone(!0):this).get();B(s[r])[e](l),n=n.concat(l)}return this.pushStack(n,t,s.selector)}}),B.extend({clone:function(t,e,i){var n,s,o,r=B.support.html5Clone||!$t.test("<"+t.nodeName)?t.cloneNode(!0):v(t);if(!(B.support.noCloneEvent&&B.support.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||B.isXMLDoc(t)))for(g(t,r),n=p(t),s=p(r),o=0;n[o];++o)s[o]&&g(n[o],s[o]);if(e&&(h(t,r),i))for(n=p(t),s=p(r),o=0;n[o];++o)h(n[o],s[o]);return n=s=null,r},clean:function(t,e,i,n){var s;e=e||A,"undefined"==typeof e.createElement&&(e=e.ownerDocument||e[0]&&e[0].ownerDocument||A);for(var o=[],r,a=0,l;null!=(l=t[a]);a++)if("number"==typeof l&&(l+=""),l){if("string"==typeof l)if(wt.test(l)){l=l.replace(bt,"<$1></$2>");var c=(yt.exec(l)||["",""])[1].toLowerCase(),d=_t[c]||_t._default,h=d[0],g=e.createElement("div");for(e===A?It.appendChild(g):u(e).appendChild(g),g.innerHTML=d[1]+l+d[2];h--;)g=g.lastChild;if(!B.support.tbody){var p=Ct.test(l),f="table"!==c||p?"<table>"!==d[1]||p?[]:g.childNodes:g.firstChild&&g.firstChild.childNodes;for(r=f.length-1;r>=0;--r)B.nodeName(f[r],"tbody")&&!f[r].childNodes.length&&f[r].parentNode.removeChild(f[r])}!B.support.leadingWhitespace&&vt.test(l)&&g.insertBefore(e.createTextNode(vt.exec(l)[0]),g.firstChild),l=g.childNodes}else l=e.createTextNode(l);var v;if(!B.support.appendChecked)if(l[0]&&"number"==typeof(v=l.length))for(r=0;v>r;r++)m(l[r]);else m(l);l.nodeType?o.push(l):o=B.merge(o,l)}if(i)for(s=function(t){return!t.type||Et.test(t.type)},a=0;o[a];a++)if(!n||!B.nodeName(o[a],"script")||o[a].type&&"text/javascript"!==o[a].type.toLowerCase()){if(1===o[a].nodeType){var b=B.grep(o[a].getElementsByTagName("script"),s);o.splice.apply(o,[a+1,0].concat(b))}i.appendChild(o[a])}else n.push(o[a].parentNode?o[a].parentNode.removeChild(o[a]):o[a]);return o},cleanData:function(t){for(var e,i,n=B.cache,s=B.event.special,o=B.support.deleteExpando,r=0,a;null!=(a=t[r]);r++)if((!a.nodeName||!B.noData[a.nodeName.toLowerCase()])&&(i=a[B.expando])){if(e=n[i],e&&e.events){for(var l in e.events)s[l]?B.event.remove(a,l):B.removeEvent(a,l,e.handle);e.handle&&(e.handle.elem=null)}o?delete a[B.expando]:a.removeAttribute&&a.removeAttribute(B.expando),delete n[i]}}});var Nt=/alpha\([^)]*\)/i,jt=/opacity=([^)]*)/,Lt=/([A-Z]|^ms)/g,At=/^-?\d+(?:px)?$/i,Dt=/^-?\d/,Ot=/^([\-+])=([\-+.\de]+)/,Bt={position:"absolute",visibility:"hidden",display:"block"},Ht=["Left","Right"],Pt=["Top","Bottom"],Ft,Rt,zt;B.fn.css=function(t,i){return 2===arguments.length&&i===e?this:B.access(this,t,i,!0,function(t,i,n){return n!==e?B.style(t,i,n):B.css(t,i)})},B.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Ft(t,"opacity","opacity");return""===i?"1":i}return t.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":B.support.cssFloat?"cssFloat":"styleFloat"},style:function(t,i,n,s){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var o,r,a=B.camelCase(i),l=t.style,c=B.cssHooks[a];if(i=B.cssProps[a]||a,n===e)return c&&"get"in c&&(o=c.get(t,!1,s))!==e?o:l[i];if(r=typeof n,"string"===r&&(o=Ot.exec(n))&&(n=+(o[1]+1)*+o[2]+parseFloat(B.css(t,i)),r="number"),!(null==n||"number"===r&&isNaN(n)||("number"!==r||B.cssNumber[a]||(n+="px"),c&&"set"in c&&(n=c.set(t,n))===e)))try{l[i]=n}catch(u){}}},css:function(t,i,n){var s,o;return i=B.camelCase(i),o=B.cssHooks[i],i=B.cssProps[i]||i,"cssFloat"===i&&(i="float"),o&&"get"in o&&(s=o.get(t,!0,n))!==e?s:Ft?Ft(t,i):void 0},swap:function(t,e,i){var n={};for(var s in e)n[s]=t.style[s],t.style[s]=e[s];i.call(t);for(s in e)t.style[s]=n[s]}}),B.curCSS=B.css,B.each(["height","width"],function(t,e){B.cssHooks[e]={get:function(t,i,n){var s;return i?0!==t.offsetWidth?y(t,e,n):(B.swap(t,Bt,function(){s=y(t,e,n)}),s):void 0},set:function(t,e){return At.test(e)?(e=parseFloat(e),e>=0?e+"px":void 0):e}}}),B.support.opacity||(B.cssHooks.opacity={get:function(t,e){return jt.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,s=B.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,e>=1&&""===B.trim(o.replace(Nt,""))&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=Nt.test(o)?o.replace(Nt,s):o+" "+s)}}),B(function(){B.support.reliableMarginRight||(B.cssHooks.marginRight={get:function(t,e){var i;return B.swap(t,{display:"inline-block"},function(){i=e?Ft(t,"margin-right","marginRight"):t.style.marginRight}),i}})}),A.defaultView&&A.defaultView.getComputedStyle&&(Rt=function(t,e){var i,n,s;return e=e.replace(Lt,"-$1").toLowerCase(),(n=t.ownerDocument.defaultView)&&(s=n.getComputedStyle(t,null))&&(i=s.getPropertyValue(e),""!==i||B.contains(t.ownerDocument.documentElement,t)||(i=B.style(t,e))),i}),A.documentElement.currentStyle&&(zt=function(t,e){var i,n,s,o=t.currentStyle&&t.currentStyle[e],r=t.style;return null===o&&r&&(s=r[e])&&(o=s),!At.test(o)&&Dt.test(o)&&(i=r.left,n=t.runtimeStyle&&t.runtimeStyle.left,n&&(t.runtimeStyle.left=t.currentStyle.left),r.left="fontSize"===e?"1em":o||0,o=r.pixelLeft+"px",r.left=i,n&&(t.runtimeStyle.left=n)),""===o?"auto":o}),Ft=Rt||zt,B.expr&&B.expr.filters&&(B.expr.filters.hidden=function(t){var e=t.offsetWidth,i=t.offsetHeight;return 0===e&&0===i||!B.support.reliableHiddenOffsets&&"none"===(t.style&&t.style.display||B.css(t,"display"))},B.expr.filters.visible=function(t){return!B.expr.filters.hidden(t)});var Mt=/%20/g,qt=/\[\]$/,Ut=/\r?\n/g,Wt=/#.*$/,Vt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Qt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Jt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Gt=/^(?:GET|HEAD)$/,Xt=/^\/\//,Kt=/\?/,Yt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Zt=/^(?:select|textarea)/i,te=/\s+/,ee=/([?&])_=[^&]*/,ie=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,ne=B.fn.load,se={},oe={},re,ae,le=["*/"]+["*"];try{re=O.href}catch(ce){re=A.createElement("a"),re.href="",re=re.href}ae=ie.exec(re.toLowerCase())||[],B.fn.extend({load:function(t,i,n){if("string"!=typeof t&&ne)return ne.apply(this,arguments);if(!this.length)return this;var s=t.indexOf(" ");if(s>=0){var o=t.slice(s,t.length);t=t.slice(0,s)}var r="GET";i&&(B.isFunction(i)?(n=i,i=e):"object"==typeof i&&(i=B.param(i,B.ajaxSettings.traditional),r="POST"));var a=this;return B.ajax({url:t,type:r,dataType:"html",data:i,complete:function(t,e,i){i=t.responseText,t.isResolved()&&(t.done(function(t){i=t}),a.html(o?B("<div>").append(i.replace(Yt,"")).find(o):i)),n&&a.each(n,[i,e,t])}}),this},serialize:function(){return B.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?B.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Zt.test(this.nodeName)||Qt.test(this.type))}).map(function(t,e){var i=B(this).val();return null==i?null:B.isArray(i)?B.map(i,function(t,i){return{name:e.name,value:t.replace(Ut,"\r\n")}}):{name:e.name,value:i.replace(Ut,"\r\n")}}).get()}}),B.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(t,e){B.fn[e]=function(t){return this.on(e,t)}}),B.each(["get","post"],function(t,i){B[i]=function(t,n,s,o){return B.isFunction(n)&&(o=o||s,s=n,n=e),B.ajax({type:i,url:t,data:n,success:s,dataType:o})}}),B.extend({getScript:function(t,i){return B.get(t,e,i,"script")},getJSON:function(t,e,i){return B.get(t,e,i,"json")},ajaxSetup:function(t,e){return e?x(t,B.ajaxSettings):(e=t,t=B.ajaxSettings),x(t,e),t},ajaxSettings:{url:re,isLocal:Jt.test(ae[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":le},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":t.String,"text html":!0,"text json":B.parseJSON,"text xml":B.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:C(se),ajaxTransport:C(oe),ajax:function(t,i){function n(t,i,n,d){if(2!==b){b=2,m&&clearTimeout(m),f=e,g=d||"",x.readyState=t>0?4:0;var h,p,v,C=i,w=n?$(s,x,n):e,k,E;if(t>=200&&300>t||304===t)if(s.ifModified&&((k=x.getResponseHeader("Last-Modified"))&&(B.lastModified[u]=k),(E=x.getResponseHeader("Etag"))&&(B.etag[u]=E)),304===t)C="notmodified",h=!0;else try{p=S(s,w),C="success",h=!0}catch(T){C="parsererror",v=T}else v=C,(!C||t)&&(C="error",0>t&&(t=0));x.status=t,x.statusText=""+(i||C),h?a.resolveWith(o,[p,C,x]):a.rejectWith(o,[x,C,v]),x.statusCode(c),c=e,y&&r.trigger("ajax"+(h?"Success":"Error"),[x,s,h?p:v]),l.fireWith(o,[x,C]),y&&(r.trigger("ajaxComplete",[x,s]),--B.active||B.event.trigger("ajaxStop"))}}"object"==typeof t&&(i=t,t=e),i=i||{};var s=B.ajaxSetup({},i),o=s.context||s,r=o!==s&&(o.nodeType||o instanceof B)?B(o):B.event,a=B.Deferred(),l=B.Callbacks("once memory"),c=s.statusCode||{},u,d={},h={},g,p,f,m,v,b=0,y,C,x={readyState:0,setRequestHeader:function(t,e){if(!b){var i=t.toLowerCase();t=h[i]=h[i]||t,d[t]=e}return this},getAllResponseHeaders:function(){return 2===b?g:null},getResponseHeader:function(t){var i;if(2===b){if(!p)for(p={};i=Vt.exec(g);)p[i[1].toLowerCase()]=i[2];i=p[t.toLowerCase()]}return i===e?null:i},overrideMimeType:function(t){return b||(s.mimeType=t),this},abort:function(t){return t=t||"abort",f&&f.abort(t),n(0,t),this}};if(a.promise(x),x.success=x.done,x.error=x.fail,x.complete=l.add,x.statusCode=function(t){if(t){var e;if(2>b)for(e in t)c[e]=[c[e],t[e]];else e=t[x.status],x.then(e,e)}return this},s.url=((t||s.url)+"").replace(Wt,"").replace(Xt,ae[1]+"//"),s.dataTypes=B.trim(s.dataType||"*").toLowerCase().split(te),null==s.crossDomain&&(v=ie.exec(s.url.toLowerCase()),s.crossDomain=!(!v||v[1]==ae[1]&&v[2]==ae[2]&&(v[3]||("http:"===v[1]?80:443))==(ae[3]||("http:"===ae[1]?80:443)))),s.data&&s.processData&&"string"!=typeof s.data&&(s.data=B.param(s.data,s.traditional)),w(se,s,i,x),2===b)return!1;if(y=s.global,s.type=s.type.toUpperCase(),s.hasContent=!Gt.test(s.type),y&&0===B.active++&&B.event.trigger("ajaxStart"),!s.hasContent&&(s.data&&(s.url+=(Kt.test(s.url)?"&":"?")+s.data,delete s.data),u=s.url,s.cache===!1)){var k=B.now(),E=s.url.replace(ee,"$1_="+k);s.url=E+(E===s.url?(Kt.test(s.url)?"&":"?")+"_="+k:"")}(s.data&&s.hasContent&&s.contentType!==!1||i.contentType)&&x.setRequestHeader("Content-Type",s.contentType),s.ifModified&&(u=u||s.url,B.lastModified[u]&&x.setRequestHeader("If-Modified-Since",B.lastModified[u]),B.etag[u]&&x.setRequestHeader("If-None-Match",B.etag[u])),x.setRequestHeader("Accept",s.dataTypes[0]&&s.accepts[s.dataTypes[0]]?s.accepts[s.dataTypes[0]]+("*"!==s.dataTypes[0]?", "+le+"; q=0.01":""):s.accepts["*"]);for(C in s.headers)x.setRequestHeader(C,s.headers[C]);if(s.beforeSend&&(s.beforeSend.call(o,x,s)===!1||2===b))return x.abort(),!1;for(C in{success:1,error:1,complete:1})x[C](s[C]);if(f=w(oe,s,i,x)){x.readyState=1,y&&r.trigger("ajaxSend",[x,s]),s.async&&s.timeout>0&&(m=setTimeout(function(){x.abort("timeout")},s.timeout));try{b=1,f.send(d,n)}catch(T){if(!(2>b))throw T;n(-1,T)}}else n(-1,"No Transport");return x},param:function(t,i){var n=[],s=function(t,e){e=B.isFunction(e)?e():e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(i===e&&(i=B.ajaxSettings.traditional),B.isArray(t)||t.jquery&&!B.isPlainObject(t))B.each(t,function(){s(this.name,this.value)});else for(var o in t)k(o,t[o],i,s);return n.join("&").replace(Mt,"+")}}),B.extend({active:0,lastModified:{},etag:{}});var ue=B.now(),de=/(\=)\?(&|$)|\?\?/i;B.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return B.expando+"_"+ue++}}),B.ajaxPrefilter("json jsonp",function(e,i,n){var s="application/x-www-form-urlencoded"===e.contentType&&"string"==typeof e.data;if("jsonp"===e.dataTypes[0]||e.jsonp!==!1&&(de.test(e.url)||s&&de.test(e.data))){var o,r=e.jsonpCallback=B.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a=t[r],l=e.url,c=e.data,u="$1"+r+"$2";return e.jsonp!==!1&&(l=l.replace(de,u),e.url===l&&(s&&(c=c.replace(de,u)),e.data===c&&(l+=(/\?/.test(l)?"&":"?")+e.jsonp+"="+r))),e.url=l,e.data=c,t[r]=function(t){o=[t]},n.always(function(){t[r]=a,o&&B.isFunction(a)&&t[r](o[0])}),e.converters["script json"]=function(){return o||B.error(r+" was not called"),o[0]},e.dataTypes[0]="json","script"}}),B.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(t){return B.globalEval(t),t}}}),B.ajaxPrefilter("script",function(t){t.cache===e&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),B.ajaxTransport("script",function(t){if(t.crossDomain){var i,n=A.head||A.getElementsByTagName("head")[0]||A.documentElement;return{send:function(s,o){i=A.createElement("script"),i.async="async",t.scriptCharset&&(i.charset=t.scriptCharset),i.src=t.url,i.onload=i.onreadystatechange=function(t,s){(s||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=e,s||o(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var he=t.ActiveXObject?function(){for(var t in pe)pe[t](0,1)}:!1,ge=0,pe;B.ajaxSettings.xhr=t.ActiveXObject?function(){return!this.isLocal&&E()||T()}:E,function(t){B.extend(B.support,{ajax:!!t,cors:!!t&&"withCredentials"in t})}(B.ajaxSettings.xhr()),B.support.ajax&&B.ajaxTransport(function(i){if(!i.crossDomain||B.support.cors){var n;return{send:function(s,o){var r=i.xhr(),a,l;if(i.username?r.open(i.type,i.url,i.async,i.username,i.password):r.open(i.type,i.url,i.async),i.xhrFields)for(l in i.xhrFields)r[l]=i.xhrFields[l];i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest");try{for(l in s)r.setRequestHeader(l,s[l])}catch(c){}r.send(i.hasContent&&i.data||null),n=function(t,s){var l,c,u,d,h;try{if(n&&(s||4===r.readyState))if(n=e,a&&(r.onreadystatechange=B.noop,he&&delete pe[a]),s)4!==r.readyState&&r.abort();else{l=r.status,u=r.getAllResponseHeaders(),d={},h=r.responseXML,h&&h.documentElement&&(d.xml=h),d.text=r.responseText;try{c=r.statusText}catch(g){c=""}l||!i.isLocal||i.crossDomain?1223===l&&(l=204):l=d.text?200:404}}catch(p){s||o(-1,p)}d&&o(l,c,d,u)},i.async&&4!==r.readyState?(a=++ge,he&&(pe||(pe={},B(t).unload(he)),pe[a]=n),r.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}});var fe={},me,ve,be=/^(?:toggle|show|hide)$/,ye=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,Ce,we=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],xe;B.fn.extend({show:function(t,e,i){var n,s;if(t||0===t)return this.animate(N("show",3),t,e,i);for(var o=0,r=this.length;r>o;o++)n=this[o],n.style&&(s=n.style.display,B._data(n,"olddisplay")||"none"!==s||(s=n.style.display=""),""===s&&"none"===B.css(n,"display")&&B._data(n,"olddisplay",j(n.nodeName)));for(o=0;r>o;o++)n=this[o],n.style&&(s=n.style.display,(""===s||"none"===s)&&(n.style.display=B._data(n,"olddisplay")||""));return this},hide:function(t,e,i){if(t||0===t)return this.animate(N("hide",3),t,e,i);for(var n,s,o=0,r=this.length;r>o;o++)n=this[o],n.style&&(s=B.css(n,"display"),"none"===s||B._data(n,"olddisplay")||B._data(n,"olddisplay",s));for(o=0;r>o;o++)this[o].style&&(this[o].style.display="none");return this},_toggle:B.fn.toggle,toggle:function(t,e,i){var n="boolean"==typeof t;return B.isFunction(t)&&B.isFunction(e)?this._toggle.apply(this,arguments):null==t||n?this.each(function(){var e=n?t:B(this).is(":hidden");B(this)[e?"show":"hide"]()}):this.animate(N("toggle",3),t,e,i),this},fadeTo:function(t,e,i,n){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){function s(){o.queue===!1&&B._mark(this);var e=B.extend({},o),i=1===this.nodeType,n=i&&B(this).is(":hidden"),s,r,a,l,c,u,d,h,g;e.animatedProperties={};for(a in t){if(s=B.camelCase(a),a!==s&&(t[s]=t[a],delete t[a]),r=t[s],B.isArray(r)?(e.animatedProperties[s]=r[1],r=t[s]=r[0]):e.animatedProperties[s]=e.specialEasing&&e.specialEasing[s]||e.easing||"swing","hide"===r&&n||"show"===r&&!n)return e.complete.call(this);!i||"height"!==s&&"width"!==s||(e.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===B.css(this,"display")&&"none"===B.css(this,"float")&&(B.support.inlineBlockNeedsLayout&&"inline"!==j(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=e.overflow&&(this.style.overflow="hidden");for(a in t)l=new B.fx(this,e,a),r=t[a],be.test(r)?(g=B._data(this,"toggle"+a)||("toggle"===r?n?"show":"hide":0),g?(B._data(this,"toggle"+a,"show"===g?"hide":"show"),l[g]()):l[r]()):(c=ye.exec(r),u=l.cur(),c?(d=parseFloat(c[2]),h=c[3]||(B.cssNumber[a]?"":"px"),"px"!==h&&(B.style(this,a,(d||1)+h),u=(d||1)/l.cur()*u,B.style(this,a,u+h)),c[1]&&(d=("-="===c[1]?-1:1)*d+u),l.custom(u,d,h)):l.custom(u,r,""));return!0}var o=B.speed(e,i,n);return B.isEmptyObject(t)?this.each(o.complete,[!1]):(t=B.extend({},t),o.queue===!1?this.each(s):this.queue(o.queue,s))},stop:function(t,i,n){return"string"!=typeof t&&(n=i,i=t,t=e),i&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){function e(t,e,i){var s=e[i];B.removeData(t,i,!0),s.stop(n)}var i,s=!1,o=B.timers,r=B._data(this);if(n||B._unmark(!0,this),null==t)for(i in r)r[i]&&r[i].stop&&i.indexOf(".run")===i.length-4&&e(this,r,i);else r[i=t+".run"]&&r[i].stop&&e(this,r,i);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(n?o[i](!0):o[i].saveState(),s=!0,o.splice(i,1));n&&s||B.dequeue(this,t)})}}),B.each({slideDown:N("show",1),slideUp:N("hide",1),slideToggle:N("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){B.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),B.extend({speed:function(t,e,i){var n=t&&"object"==typeof t?B.extend({},t):{complete:i||!i&&e||B.isFunction(t)&&t,duration:t,easing:i&&e||e&&!B.isFunction(e)&&e};return n.duration=B.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in B.fx.speeds?B.fx.speeds[n.duration]:B.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(t){B.isFunction(n.old)&&n.old.call(this),n.queue?B.dequeue(this,n.queue):t!==!1&&B._unmark(this)},n},easing:{linear:function(t,e,i,n){return i+n*t},swing:function(t,e,i,n){return(-Math.cos(t*Math.PI)/2+.5)*n+i}},timers:[],fx:function(t,e,i){this.options=e,this.elem=t,this.prop=i,e.orig=e.orig||{}}}),B.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(B.fx.step[this.prop]||B.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var t,e=B.css(this.elem,this.prop);return isNaN(t=parseFloat(e))?e&&"auto"!==e?e:0:t},custom:function(t,i,n){function s(t){return o.step(t)}var o=this,r=B.fx;this.startTime=xe||_(),this.end=i,this.now=this.start=t,this.pos=this.state=0,this.unit=n||this.unit||(B.cssNumber[this.prop]?"":"px"),s.queue=this.options.queue,s.elem=this.elem,s.saveState=function(){o.options.hide&&B._data(o.elem,"fxshow"+o.prop)===e&&B._data(o.elem,"fxshow"+o.prop,o.start)},s()&&B.timers.push(s)&&!Ce&&(Ce=setInterval(r.tick,r.interval))},show:function(){var t=B._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=t||B.style(this.elem,this.prop),this.options.show=!0,t!==e?this.custom(this.cur(),t):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),B(this.elem).show()},hide:function(){this.options.orig[this.prop]=B._data(this.elem,"fxshow"+this.prop)||B.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(t){var e,i,n,s=xe||_(),o=!0,r=this.elem,a=this.options;if(t||s>=a.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),a.animatedProperties[this.prop]=!0;for(e in a.animatedProperties)a.animatedProperties[e]!==!0&&(o=!1);if(o){if(null==a.overflow||B.support.shrinkWrapBlocks||B.each(["","X","Y"],function(t,e){r.style["overflow"+e]=a.overflow[t]}),a.hide&&B(r).hide(),a.hide||a.show)for(e in a.animatedProperties)B.style(r,e,a.orig[e]),B.removeData(r,"fxshow"+e,!0),B.removeData(r,"toggle"+e,!0);n=a.complete,n&&(a.complete=!1,n.call(r))}return!1}return a.duration==1/0?this.now=s:(i=s-this.startTime,this.state=i/a.duration,this.pos=B.easing[a.animatedProperties[this.prop]](this.state,i,0,1,a.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},B.extend(B.fx,{tick:function(){for(var t,e=B.timers,i=0;i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||B.fx.stop()},interval:13,stop:function(){clearInterval(Ce),Ce=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(t){B.style(t.elem,"opacity",t.now)},_default:function(t){t.elem.style&&null!=t.elem.style[t.prop]?t.elem.style[t.prop]=t.now+t.unit:t.elem[t.prop]=t.now}}}),B.each(["width","height"],function(t,e){B.fx.step[e]=function(t){B.style(t.elem,e,Math.max(0,t.now)+t.unit)}}),B.expr&&B.expr.filters&&(B.expr.filters.animated=function(t){return B.grep(B.timers,function(e){return t===e.elem}).length});var ke=/^t(?:able|d|h)$/i,$e=/^(?:body|html)$/i;B.fn.offset="getBoundingClientRect"in A.documentElement?function(t){var e=this[0],i;if(t)return this.each(function(e){B.offset.setOffset(this,t,e)});if(!e||!e.ownerDocument)return null;if(e===e.ownerDocument.body)return B.offset.bodyOffset(e);try{i=e.getBoundingClientRect()}catch(n){}var s=e.ownerDocument,o=s.documentElement;if(!i||!B.contains(o,e))return i?{top:i.top,left:i.left}:{top:0,left:0};var r=s.body,a=L(s),l=o.clientTop||r.clientTop||0,c=o.clientLeft||r.clientLeft||0,u=a.pageYOffset||B.support.boxModel&&o.scrollTop||r.scrollTop,d=a.pageXOffset||B.support.boxModel&&o.scrollLeft||r.scrollLeft,h=i.top+u-l,g=i.left+d-c;return{top:h,left:g}}:function(t){var e=this[0];if(t)return this.each(function(e){B.offset.setOffset(this,t,e)});if(!e||!e.ownerDocument)return null;if(e===e.ownerDocument.body)return B.offset.bodyOffset(e);for(var i,n=e.offsetParent,s=e,o=e.ownerDocument,r=o.documentElement,a=o.body,l=o.defaultView,c=l?l.getComputedStyle(e,null):e.currentStyle,u=e.offsetTop,d=e.offsetLeft;(e=e.parentNode)&&e!==a&&e!==r&&(!B.support.fixedPosition||"fixed"!==c.position);)i=l?l.getComputedStyle(e,null):e.currentStyle,u-=e.scrollTop,d-=e.scrollLeft,e===n&&(u+=e.offsetTop,d+=e.offsetLeft,!B.support.doesNotAddBorder||B.support.doesAddBorderForTableAndCells&&ke.test(e.nodeName)||(u+=parseFloat(i.borderTopWidth)||0,d+=parseFloat(i.borderLeftWidth)||0),s=n,n=e.offsetParent),B.support.subtractsBorderForOverflowNotVisible&&"visible"!==i.overflow&&(u+=parseFloat(i.borderTopWidth)||0,d+=parseFloat(i.borderLeftWidth)||0),c=i;return("relative"===c.position||"static"===c.position)&&(u+=a.offsetTop,d+=a.offsetLeft),B.support.fixedPosition&&"fixed"===c.position&&(u+=Math.max(r.scrollTop,a.scrollTop),d+=Math.max(r.scrollLeft,a.scrollLeft)),{top:u,left:d}},B.offset={bodyOffset:function(t){var e=t.offsetTop,i=t.offsetLeft;return B.support.doesNotIncludeMarginInBodyOffset&&(e+=parseFloat(B.css(t,"marginTop"))||0,i+=parseFloat(B.css(t,"marginLeft"))||0),{top:e,left:i}},setOffset:function(t,e,i){var n=B.css(t,"position");"static"===n&&(t.style.position="relative");var s=B(t),o=s.offset(),r=B.css(t,"top"),a=B.css(t,"left"),l=("absolute"===n||"fixed"===n)&&B.inArray("auto",[r,a])>-1,c={},u={},d,h;l?(u=s.position(),d=u.top,h=u.left):(d=parseFloat(r)||0,h=parseFloat(a)||0),B.isFunction(e)&&(e=e.call(t,i,o)),null!=e.top&&(c.top=e.top-o.top+d),null!=e.left&&(c.left=e.left-o.left+h),"using"in e?e.using.call(t,c):s.css(c)}},B.fn.extend({position:function(){if(!this[0])return null;var t=this[0],e=this.offsetParent(),i=this.offset(),n=$e.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(B.css(t,"marginTop"))||0,i.left-=parseFloat(B.css(t,"marginLeft"))||0,n.top+=parseFloat(B.css(e[0],"borderTopWidth"))||0,n.left+=parseFloat(B.css(e[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||A.body;t&&!$e.test(t.nodeName)&&"static"===B.css(t,"position");)t=t.offsetParent;return t})}}),B.each(["Left","Top"],function(t,i){var n="scroll"+i;B.fn[n]=function(i){var s,o;return i===e?(s=this[0])?(o=L(s),o?"pageXOffset"in o?o[t?"pageYOffset":"pageXOffset"]:B.support.boxModel&&o.document.documentElement[n]||o.document.body[n]:s[n]):null:this.each(function(){o=L(this),o?o.scrollTo(t?B(o).scrollLeft():i,t?i:B(o).scrollTop()):this[n]=i})}}),B.each(["Height","Width"],function(t,i){var n=i.toLowerCase();B.fn["inner"+i]=function(){var t=this[0];return t?t.style?parseFloat(B.css(t,n,"padding")):this[n]():null},B.fn["outer"+i]=function(t){var e=this[0];return e?e.style?parseFloat(B.css(e,n,t?"margin":"border")):this[n]():null},B.fn[n]=function(t){var s=this[0];if(!s)return null==t?null:this;if(B.isFunction(t))return this.each(function(e){var i=B(this);i[n](t.call(this,e,i[n]()))});if(B.isWindow(s)){var o=s.document.documentElement["client"+i],r=s.document.body;return"CSS1Compat"===s.document.compatMode&&o||r&&r["client"+i]||o}if(9===s.nodeType)return Math.max(s.documentElement["client"+i],s.body["scroll"+i],s.documentElement["scroll"+i],s.body["offset"+i],s.documentElement["offset"+i]);if(t===e){var a=B.css(s,n),l=parseFloat(a);return B.isNumeric(l)?l:a}return this.css(n,"string"==typeof t?t:t+"px")}}),t.jQuery=t.$=B,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return B})}(window),function(t){t(jQuery)}(function(t){t.extend(t.fn,{validate:function(e){if(!this.length)return void(e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=t.data(this[0],"validator");return i?i:(this.attr("novalidate","novalidate"),i=new t.validator(e,this[0]),t.data(this[0],"validator",i),i.settings.onsubmit&&(this.validateDelegate(":submit","click",function(e){i.settings.submitHandler&&(i.submitButton=e.target),t(e.target).hasClass("cancel")&&(i.cancelSubmit=!0),void 0!==t(e.target).attr("formnovalidate")&&(i.cancelSubmit=!0)}),this.submit(function(e){function n(){var n,s;return i.settings.submitHandler?(i.submitButton&&(n=t("<input type='hidden'/>").attr("name",i.submitButton.name).val(t(i.submitButton).val()).appendTo(i.currentForm)),s=i.settings.submitHandler.call(i,i.currentForm,e),i.submitButton&&n.remove(),void 0!==s?s:!1):!0}return i.settings.debug&&e.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,n()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):n():(i.focusInvalid(),!1)})),i)},valid:function(){var e,i;return t(this[0]).is("form")?e=this.validate().form():(e=!0,i=t(this[0].form).validate(),this.each(function(){e=i.element(this)&&e})),e},removeAttrs:function(e){var i={},n=this;return t.each(e.split(/\s/),function(t,e){i[e]=n.attr(e),n.removeAttr(e)}),i},rules:function(e,i){var n=this[0],s,o,r,a,l,c;if(e)switch(s=t.data(n.form,"validator").settings,o=s.rules,r=t.validator.staticRules(n),e){case"add":t.extend(r,t.validator.normalizeRule(i)),delete r.messages,o[n.name]=r,i.messages&&(s.messages[n.name]=t.extend(s.messages[n.name],i.messages));break;case"remove":return i?(c={},t.each(i.split(/\s/),function(e,i){c[i]=r[i],delete r[i],"required"===i&&t(n).removeAttr("aria-required")}),c):(delete o[n.name],r)}return a=t.validator.normalizeRules(t.extend({},t.validator.classRules(n),t.validator.attributeRules(n),t.validator.dataRules(n),t.validator.staticRules(n)),n),a.required&&(l=a.required,delete a.required,a=t.extend({required:l},a),t(n).attr("aria-required","true")),a.remote&&(l=a.remote,delete a.remote,a=t.extend(a,{remote:l})),a}}),t.extend(t.expr[":"],{blank:function(e){return!t.trim(""+t(e).val())},filled:function(e){return!!t.trim(""+t(e).val())},unchecked:function(e){return!t(e).prop("checked")}}),t.validator=function(e,i){this.settings=t.extend(!0,{},t.validator.defaults,e),this.currentForm=i,this.init()},t.validator.format=function(e,i){return 1===arguments.length?function(){var i=t.makeArray(arguments);return i.unshift(e),t.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!==Array&&(i=t.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),t.each(i,function(t,i){e=e.replace(new RegExp("\\{"+t+"\\}","g"),function(){return i})}),e)},t.extend(t.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:t([]),errorLabelContainer:t([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(t){this.lastActive=t,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,t,this.settings.errorClass,this.settings.validClass),
this.hideThese(this.errorsFor(t)))},onfocusout:function(t){this.checkable(t)||!(t.name in this.submitted)&&this.optional(t)||this.element(t)},onkeyup:function(t,e){(9!==e.which||""!==this.elementValue(t))&&(t.name in this.submitted||t===this.lastElement)&&this.element(t)},onclick:function(t){t.name in this.submitted?this.element(t):t.parentNode.name in this.submitted&&this.element(t.parentNode)},highlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).addClass(i).removeClass(n):t(e).addClass(i).removeClass(n)},unhighlight:function(e,i,n){"radio"===e.type?this.findByName(e.name).removeClass(i).addClass(n):t(e).removeClass(i).addClass(n)}},setDefaults:function(e){t.extend(t.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:t.validator.format("Please enter no more than {0} characters."),minlength:t.validator.format("Please enter at least {0} characters."),rangelength:t.validator.format("Please enter a value between {0} and {1} characters long."),range:t.validator.format("Please enter a value between {0} and {1}."),max:t.validator.format("Please enter a value less than or equal to {0}."),min:t.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var i=t.data(this[0].form,"validator"),n="on"+e.type.replace(/^validate/,""),s=i.settings;s[n]&&!this.is(s.ignore)&&s[n].call(i,this[0],e)}this.labelContainer=t(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||t(this.currentForm),this.containers=t(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={},n;t.each(this.settings.groups,function(e,n){"string"==typeof n&&(n=n.split(/\s/)),t.each(n,function(t,n){i[n]=e})}),n=this.settings.rules,t.each(n,function(e,i){n[e]=t.validator.normalizeRule(i)}),t(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",e).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",e),this.settings.invalidHandler&&t(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),t(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),t.extend(this.submitted,this.errorMap),this.invalid=t.extend({},this.errorMap),this.valid()||t(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var t=0,e=this.currentElements=this.elements();e[t];t++)this.check(e[t]);return this.valid()},element:function(e){var i=this.clean(e),n=this.validationTargetFor(i),s=!0;return this.lastElement=n,void 0===n?delete this.invalid[i.name]:(this.prepareElement(n),this.currentElements=t(n),s=this.check(n)!==!1,s?delete this.invalid[n.name]:this.invalid[n.name]=!0),t(e).attr("aria-invalid",!s),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),s},showErrors:function(e){if(e){t.extend(this.errorMap,e),this.errorList=[];for(var i in e)this.errorList.push({message:e[i],element:this.findByName(i)[0]});this.successList=t.grep(this.successList,function(t){return!(t.name in e)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){t.fn.resetForm&&t(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(t){var e=0,i;for(i in t)e++;return e},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(t){t.not(this.containers).text(""),this.addWrapper(t).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{t(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var e=this.lastActive;return e&&1===t.grep(this.errorList,function(t){return t.element.name===e.name}).length&&e},elements:function(){var e=this,i={};return t(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&e.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in i||!e.objectLength(t(this).rules())?!1:(i[this.name]=!0,!0)})},clean:function(e){return t(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return t(this.settings.errorElement+"."+e,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=t([]),this.toHide=t([]),this.currentElements=t([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(t){this.reset(),this.toHide=this.errorsFor(t)},elementValue:function(e){var i,n=t(e),s=e.type;return"radio"===s||"checkbox"===s?t("input[name='"+e.name+"']:checked").val():"number"===s&&"undefined"!=typeof e.validity?e.validity.badInput?!1:n.val():(i=n.val(),"string"==typeof i?i.replace(/\r/g,""):i)},check:function(e){e=this.validationTargetFor(this.clean(e));var i=t(e).rules(),n=t.map(i,function(t,e){return e}).length,s=!1,o=this.elementValue(e),r,a,l;for(a in i){l={method:a,parameters:i[a]};try{if(r=t.validator.methods[a].call(this,o,e,l.parameters),"dependency-mismatch"===r&&1===n){s=!0;continue}if(s=!1,"pending"===r)return void(this.toHide=this.toHide.not(this.errorsFor(e)));if(!r)return this.formatAndAdd(e,l),!1}catch(c){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+e.id+", check the '"+l.method+"' method.",c),c}}if(!s)return this.objectLength(i)&&this.successList.push(e),!0},customDataMessage:function(e,i){return t(e).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||t(e).data("msg")},customMessage:function(t,e){var i=this.settings.messages[t];return i&&(i.constructor===String?i:i[e])},findDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t];return void 0},defaultMessage:function(e,i){return this.findDefined(this.customMessage(e.name,i),this.customDataMessage(e,i),!this.settings.ignoreTitle&&e.title||void 0,t.validator.messages[i],"<strong>Warning: No message defined for "+e.name+"</strong>")},formatAndAdd:function(e,i){var n=this.defaultMessage(e,i.method),s=/\$?\{(\d+)\}/g;"function"==typeof n?n=n.call(this,i.parameters,e):s.test(n)&&(n=t.validator.format(n.replace(s,"{$1}"),i.parameters)),this.errorList.push({message:n,element:e,method:i.method}),this.errorMap[e.name]=n,this.submitted[e.name]=n},addWrapper:function(t){return this.settings.wrapper&&(t=t.add(t.parent(this.settings.wrapper))),t},defaultShowErrors:function(){var t,e,i;for(t=0;this.errorList[t];t++)i=this.errorList[t],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(t=0;this.successList[t];t++)this.showLabel(this.successList[t]);if(this.settings.unhighlight)for(t=0,e=this.validElements();e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return t(this.errorList).map(function(){return this.element})},showLabel:function(e,i){var n,s,o,r=this.errorsFor(e),a=this.idOrName(e),l=t(e).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(i)):(r=t("<"+this.settings.errorElement+">").attr("id",a+"-error").addClass(this.settings.errorClass).html(i||""),n=r,this.settings.wrapper&&(n=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(n):this.settings.errorPlacement?this.settings.errorPlacement(n,t(e)):n.insertAfter(e),r.is("label")?r.attr("for",a):0===r.parents("label[for='"+a+"']").length&&(o=r.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),l?l.match(new RegExp("\\b"+o+"\\b"))||(l+=" "+o):l=o,t(e).attr("aria-describedby",l),s=this.groups[e.name],s&&t.each(this.groups,function(e,i){i===s&&t("[name='"+e+"']",this.currentForm).attr("aria-describedby",r.attr("id"))}))),!i&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,e)),this.toShow=this.toShow.add(r)},errorsFor:function(e){var i=this.idOrName(e),n=t(e).attr("aria-describedby"),s="label[for='"+i+"'], label[for='"+i+"'] *";return n&&(s=s+", #"+n.replace(/\s+/g,", #")),this.errors().filter(s)},idOrName:function(t){return this.groups[t.name]||(this.checkable(t)?t.name:t.id||t.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),t(e).not(this.settings.ignore)[0]},checkable:function(t){return/radio|checkbox/i.test(t.type)},findByName:function(e){return t(this.currentForm).find("[name='"+e+"']")},getLength:function(e,i){switch(i.nodeName.toLowerCase()){case"select":return t("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return e.length},depend:function(t,e){return this.dependTypes[typeof t]?this.dependTypes[typeof t](t,e):!0},dependTypes:{"boolean":function(t){return t},string:function(e,i){return!!t(e,i.form).length},"function":function(t,e){return t(e)}},optional:function(e){var i=this.elementValue(e);return!t.validator.methods.required.call(this,i,e)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,this.pending[t.name]=!0)},stopRequest:function(e,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(t(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(t(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e){return t.data(e,"previousValue")||t.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,i){e.constructor===String?this.classRuleSettings[e]=i:t.extend(this.classRuleSettings,e)},classRules:function(e){var i={},n=t(e).attr("class");return n&&t.each(n.split(" "),function(){this in t.validator.classRuleSettings&&t.extend(i,t.validator.classRuleSettings[this])}),i},attributeRules:function(e){var i={},n=t(e),s=e.getAttribute("type"),o,r;for(o in t.validator.methods)"required"===o?(r=e.getAttribute(o),""===r&&(r=!0),r=!!r):r=n.attr(o),/min|max/.test(o)&&(null===s||/number|range|text/.test(s))&&(r=Number(r)),r||0===r?i[o]=r:s===o&&"range"!==s&&(i[o]=!0);return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},dataRules:function(e){var i,n,s={},o=t(e);for(i in t.validator.methods)n=o.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),void 0!==n&&(s[i]=n);return s},staticRules:function(e){var i={},n=t.data(e.form,"validator");return n.settings.rules&&(i=t.validator.normalizeRule(n.settings.rules[e.name])||{}),i},normalizeRules:function(e,i){return t.each(e,function(n,s){if(s===!1)return void delete e[n];if(s.param||s.depends){var o=!0;switch(typeof s.depends){case"string":o=!!t(s.depends,i.form).length;break;case"function":o=s.depends.call(i,i)}o?e[n]=void 0!==s.param?s.param:!0:delete e[n]}}),t.each(e,function(n,s){e[n]=t.isFunction(s)?s(i):s}),t.each(["minlength","maxlength"],function(){e[this]&&(e[this]=Number(e[this]))}),t.each(["rangelength","range"],function(){var i;e[this]&&(t.isArray(e[this])?e[this]=[Number(e[this][0]),Number(e[this][1])]:"string"==typeof e[this]&&(i=e[this].replace(/[\[\]]/g,"").split(/[\s,]+/),e[this]=[Number(i[0]),Number(i[1])]))}),t.validator.autoCreateRanges&&(null!=e.min&&null!=e.max&&(e.range=[e.min,e.max],delete e.min,delete e.max),null!=e.minlength&&null!=e.maxlength&&(e.rangelength=[e.minlength,e.maxlength],delete e.minlength,delete e.maxlength)),e},normalizeRule:function(e){if("string"==typeof e){var i={};t.each(e.split(/\s/),function(){i[this]=!0}),e=i}return e},addMethod:function(e,i,n){t.validator.methods[e]=i,t.validator.messages[e]=void 0!==n?n:t.validator.messages[e],i.length<3&&t.validator.addClassRules(e,t.validator.normalizeRule(e))},methods:{required:function(e,i,n){if(!this.depend(n,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var s=t(i).val();return s&&s.length>0}return this.checkable(i)?this.getLength(e,i)>0:t.trim(e).length>0},email:function(t,e){return this.optional(e)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(t)},url:function(t,e){return this.optional(e)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(t)},date:function(t,e){return this.optional(e)||!/Invalid|NaN/.test(new Date(t).toString())},dateISO:function(t,e){return this.optional(e)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(t)},number:function(t,e){return this.optional(e)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(t)},digits:function(t,e){return this.optional(e)||/^\d+$/.test(t)},creditcard:function(t,e){if(this.optional(e))return"dependency-mismatch";if(/[^0-9 \-]+/.test(t))return!1;var i=0,n=0,s=!1,o,r;if(t=t.replace(/\D/g,""),t.length<13||t.length>19)return!1;for(o=t.length-1;o>=0;o--)r=t.charAt(o),n=parseInt(r,10),s&&(n*=2)>9&&(n-=9),i+=n,s=!s;return i%10===0},minlength:function(e,i,n){var s=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||s>=n},maxlength:function(e,i,n){var s=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||n>=s},rangelength:function(e,i,n){var s=t.isArray(e)?e.length:this.getLength(e,i);return this.optional(i)||s>=n[0]&&s<=n[1]},min:function(t,e,i){return this.optional(e)||t>=i},max:function(t,e,i){return this.optional(e)||i>=t},range:function(t,e,i){return this.optional(e)||t>=i[0]&&t<=i[1]},equalTo:function(e,i,n){var s=t(n);return this.settings.onfocusout&&s.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){t(i).valid()}),e===s.val()},remote:function(e,i,n){if(this.optional(i))return"dependency-mismatch";var s=this.previousValue(i),o,r;return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),s.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=s.message,n="string"==typeof n&&{url:n}||n,s.old===e?s.valid:(s.old=e,o=this,this.startRequest(i),r={},r[i.name]=e,t.ajax(t.extend(!0,{url:n,mode:"abort",port:"validate"+i.name,dataType:"json",data:r,context:o.currentForm,success:function(n){var r=n===!0||"true"===n,a,l,c;o.settings.messages[i.name].remote=s.originalMessage,r?(c=o.formSubmitted,o.prepareElement(i),o.formSubmitted=c,o.successList.push(i),delete o.invalid[i.name],o.showErrors()):(a={},l=n||o.defaultMessage(i,"remote"),a[i.name]=s.message=t.isFunction(l)?l(e):l,o.invalid[i.name]=!0,o.showErrors(a)),s.valid=r,o.stopRequest(i,r)}},n)),"pending")}}}),t.format=function n(){throw"$.format has been deprecated. Please use $.validator.format instead."};var e={},i;t.ajaxPrefilter?t.ajaxPrefilter(function(t,i,n){var s=t.port;"abort"===t.mode&&(e[s]&&e[s].abort(),e[s]=n)}):(i=t.ajax,t.ajax=function(n){var s=("mode"in n?n:t.ajaxSettings).mode,o=("port"in n?n:t.ajaxSettings).port;return"abort"===s?(e[o]&&e[o].abort(),e[o]=i.apply(this,arguments),e[o]):i.apply(this,arguments)}),t.extend(t.fn,{validateDelegate:function(e,i,n){return this.bind(i,function(i){var s=t(i.target);return s.is(e)?n.apply(s,arguments):void 0})}})}),function(window,undefined){var Eggshell=function(t){"use strict";var e=function(t,e,i){this.name=t,this.dependencies=e?e:[],this.constructor=i,this.instance=null,this.getName=function(){return this.name},this.getDependencies=function(){return this.dependencies},this.getInstance=function(){return this.instance},this.instantiate=function(t){return this.instance=this.constructor.apply({},t),this.instance=this.instance?this.instance:{},this.instance}},i={},n=function(t){i[t.getName()]=t,s()},s=function(){var t=!1;for(var e in i){var n=i[e];if(!n.getInstance()){for(var o=n.getDependencies(),r=[],a=!0,l=0;l<o.length;l++){var c=i[o[l]];if(!c||!c.getInstance()){a=!1;break}r.push(c.getInstance())}a&&(n.instantiate(r),t=!0)}}t&&s()};return t.module=function(i,s,o){if(!i||"string"!=typeof i)throw"Invalid module name. Name needs to be a non empty String.";if(s&&!(s instanceof Array))throw"Invalid dependencies. Dependencies can either be null or an array of module names";if(!o||"function"!=typeof o)throw"Invalid constructor function";return n(new e(i,s,o)),t},t.namespace=function(e,i,n){if(!e||"string"!=typeof e)throw"Invalid namespace. Namespace needs to be a non empty String.";if("undefined"==typeof i||null===i)throw"Invalid object to be exported";if("undefined"!=typeof n&&"boolean"!=typeof n)throw"Invalid overwrite flag. It needs to be either null or boolean.";var s=e.split(".");e=t;for(var o=0;o<s.length-1;o++)e[s[o]]||(e[s[o]]={}),e=e[s[o]];if(e[s[s.length-1]]&&!n)throw"Namespace is already taken";return e[s[s.length-1]]=i,t},t}({});Eggshell.module("Logger",[],function(){for(var t=window.console=window.console||{},e=["log","debug","warn","error"],i=function(){},n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=i);var s="warn";return this.debug=function(){"debug"==s&&t.debug(arguments)},this.log=function(){("debug"==s||"info"==s)&&t.log(arguments)},this.warn=function(){("debug"==s||"info"==s||"warn"==s)&&t.warn(arguments)},this.error=function(){t.error(arguments)},this.setLogLevel=function(t){return s=t,Eggshell},Eggshell.namespace("setLogLevel",this.setLogLevel),this}),Eggshell.module("Api",["Logger","Eventbus","Connector","Loader","DefinitionRegistry","EggRegistry","ComponentResourceRegistry","Validator","InterfaceRegistry"],function(Logger,Eventbus,Connector,Loader,DefinitionRegistry,EggRegistry,ComponentResourceRegistry,Validator,InterfaceRegistry){var handleError=!1,strictMode=!1,resolveSelector=function(t){return"string"==typeof t?t:"object"==typeof t&&t.shell&&t.shell.getId?t.shell.getId():"object"==typeof t&&t.getId?t.getId():"object"==typeof t&&t.prototype&&t.prototype.Eggshell&&t.prototype.Eggshell.getId?t.prototype.Eggshell.getId():Loader.getShellInProgress()?Loader.getShellInProgress().getId():null},getEgg=function(t){return EggRegistry.exist(t)?EggRegistry.get(t):null},merge=function(t,e){var i={},n,s=0;if(null!==t)if(t.length&&"number"==typeof t.length)for(i=[],s=0;s<t.length;s++)i.push(t[s]);else for(n in t)i[n]=t[n];if(null!==e)if(e.length&&"number"==typeof e.length)for(s=0;s<e.length;s++)i.push(e[s]);else for(n in e)i[n]=e[n];return i};Eggshell.namespace("enableErrorHandling",function(t){return handleError=!!t,Eventbus.enableErrorHandling(t),Eggshell}),Eggshell.namespace("enableStrictMode",function(t){return strictMode=!!t,Eggshell}),Eggshell.namespace("define",function(t,e,i){var n=function(t,e,i){if(2==arguments.length&&(Logger.debug(t+" definition is depreciated. Component definition contains class, config, and implementation."),i=e,e=null),"function"==typeof e&&"undefined"==typeof i&&(Logger.debug(t+" definition is depreciated. Component definition contains class, config, and implementation."),i=e,e=null),"string"!=typeof t||!t)throw"Invalid class. It must be a string.";if("function"!=typeof i||!i)throw"Invalid constructor. It must be a function.";if(e&&e["interface"]){var n=e["interface"];if(e=InterfaceRegistry.get(e["interface"],e),!e)throw"Unrecognized interface "+n}return DefinitionRegistry.exist(t)?e.force_replace&&(DefinitionRegistry.register(t,{config:e,constructor:i},!0),Logger.debug("Component defined. Forced replace",t,e,i)):(DefinitionRegistry.register(t,{config:e,constructor:i}),Logger.debug("Component defined.",t,e,i)),Eggshell};if(!handleError)return n(t,e,i),Eggshell;try{return n(t,e,i),Eggshell}catch(s){Logger.error('Encountered exception in "Eggshell.define".',s,t,e,i)}}),Eggshell.namespace("definition",function(t){var e=function(t){return DefinitionRegistry.get(t)};if(!handleError)return e(t);try{return e(t)}catch(i){return Logger.error('Encountered error in "Eggshell.getDefintion".',i,t,attributes),null}}),Eggshell.namespace("create",function(clazz,attributes){var create=function(clazz,attributes){if("string"!=typeof clazz||!clazz)throw"Invalid constructor id.";var config=null,singleton=!1,constructor=null,definition=DefinitionRegistry.get(clazz);definition?(config=definition&&definition.config?definition.config:{},constructor=definition.constructor,singleton=config&&config.singleton?!0:!1):constructor=eval(clazz);var id=null;return singleton?(id=Loader.load(clazz,clazz,constructor,attributes),Eggshell.find(id)):(id=Loader.load(null,clazz,constructor,attributes),Eggshell.find(id))};if(!handleError)return create(clazz,attributes);try{return create(clazz,attributes)}catch(e){return Logger.error('Encountered error in "Eggshell.create".',e,clazz,attributes),new Eggshell.Shell([],[])}}),Eggshell.namespace("find",function(t){var e=function(t){var e=resolveSelector(t);if("string"!=typeof e||!e)throw"Invalid id.";for(var i=[],n=[],s=EggRegistry.getAll(),o=0;o<s.length;o++)if(s[o].getId()===e||s[o].getClass()===e){var r=s[o];i.push(r.getId()),n.push(r.getClass())}var a={},l=[];for(o=0;o<i.length;o++)a[i[o]]||(a[i[o]]=!0,l.push(i[o]));a={};var c=[];for(o=0;o<n.length;o++)a[n[o]]||(a[n[o]]=!0,c.push(n[o]));var u=new Eggshell.Shell(l,c);return u};if(!handleError)return e(t);try{return e(t)}catch(i){return Logger.error('Encountered error in "Eggshell.find".',i,t),new Eggshell.Shell([],[])}}),Eggshell.namespace("trigger",function(t,e,i,n){var s=function(t,e,i){var n=resolveSelector(t);if("string"!=typeof n||!n)throw"Invalid id.";if("string"!=typeof e||!e)throw"Invalid Action.";var s=getEgg(n);if(s){var o=DefinitionRegistry.get(s.getClass());if(o&&o.config&&o.config.strict&&(o.config.outputs||o.config.inputs)){var r=merge(o.config.inputs,o.config.outputs);Validator.validate(r,e,i)}s.trigger(e,i)}else Eventbus.fire(n,e,i)};if(!handleError)return s(t,e,i,n),Eggshell;try{return s(t,e,i,n),Eggshell}catch(o){Logger.error('Encountered error in "Eggshell.trigger".',o,{selector:t,action:e,payload:i,options:n})}}),Eggshell.namespace("on",function(t,e,i,n){var s=function(t,e,i,n){var s=resolveSelector(t);if("string"!=typeof s||!s)throw"Invalid id.";if("string"!=typeof e||!e)throw"Invalid Action.";if("function"!=typeof i||!i)throw"Invalid callback function.";getEgg(s)?getEgg(s).on(e,i,n):Eventbus.addListener(s,e,i,n)};if(!handleError)return s(t,e,i,n),Eggshell;try{return s(t,e,i,n),Eggshell}catch(o){Logger.error('Encountered error in "Eggshell.on".',o,{selector:t,action:e,callback:i,context:n})}}),Eggshell.namespace("off",function(t,e,i,n){var s=function(t,e,i,n){var s=resolveSelector(t);if("string"!=typeof s||!s)throw"Invalid id.";if("string"!=typeof e||!e)throw"Invalid Action.";getEgg(s)?getEgg(s).off(e,i,n):Eventbus.removeListener(s,e,i,n)};if(!handleError)return s(t,e,i,n),Eggshell;try{return s(t,e,i,n),Eggshell}catch(o){Logger.error('Encountered error in "Eggshell.off".',o,{selector:t,action:e,callback:i,context:n})}}),Eggshell.namespace("connect",function(t,e,i,n){var s=function(t,e,i,n){var s=resolveSelector(t),o=resolveSelector(i);if(n||(n=e),"string"!=typeof s||!s)throw"Invalid output id.";if("string"!=typeof e||!e)throw"Invalid output action.";if("string"!=typeof o||!o)throw"Invalid input id.";if("string"!=typeof n||!n)throw"Invalid input action.";Connector.connect(s,e,o,n)};if(!handleError)return s(t,e,i,n),Eggshell;try{return s(t,e,i,n),Eggshell}catch(o){Logger.error('Encountered error in "Eggshell.connect".',o,{outputId:t,outputAction:e,inputId:i,inputAction:n})}}),Eggshell.namespace("destroy",function(t){var e=function(t){var e=resolveSelector(t);if("string"!=typeof e||!e)throw"Invalid id.";Loader.unload(e),Eventbus.removeListener(e)};if(!handleError)return e(t),Eggshell;try{return e(t),Eggshell}catch(i){Logger.error('Encountered error in "Eggshell.destroy"',i,t)}}),Eggshell.namespace("destroyAll",function(){var t=function(){for(var t=EggRegistry.getAll(),e=null,i=0;i<t.length;i++)e=DefinitionRegistry.get(t[i].getClass()),e&&e.config&&e.config.immuneToDestroyAll||Eggshell.destroy(t[i].getId())};if(!handleError)return t(),Eggshell;try{return t(),Eggshell}catch(e){Logger.error('Encountered error in "Eggshell.destroyAll"',e,selector)}}),Eggshell.namespace("immuneToDestroyAll",function(t){var e=function(t){var e=resolveSelector(t),i=getEgg(e);if(i){var n=DefinitionRegistry.get(i.getClass());n.config.immuneToDestroyAll=!0}};if(!handleError)return e(t),Eggshell;try{return e(t),Eggshell}catch(i){Logger.error('Encountered error in "Eggshell.immuneToDestroyAll"',i,t)}}),Eggshell.namespace("getInterface",InterfaceRegistry.get),Eggshell.namespace("defineInterface",InterfaceRegistry.set),Eggshell.namespace("createOnce",function(clazz,attributes){Logger.debug('Depreciated. Use "Eggshell.create" and "singleton" flag instead. Old API will be decommissioned in the next major release.');var create=function(clazz,attributes){if("string"!=typeof clazz||!clazz)throw"Invalid constructor id.";var config=null,singleton=!1,constructor=null,definition=DefinitionRegistry.get(clazz);definition?(config=definition&&definition.config?definition.config:{},constructor=definition.constructor,singleton=config&&config.singleton?!0:!1):constructor=eval(clazz);var id=null;return id=Loader.load(clazz,clazz,constructor,attributes),Eggshell.find(id)};if(!handleError)return create(clazz,attributes);try{return create(clazz,attributes)}catch(e){return Logger.error('Encountered error in "Eggshell.createOnce".',e,clazz,attributes),new Eggshell.Shell([],[])}}),Eggshell.namespace("getDefinition",function(t){return Logger.debug('Depreciated. Use "Eggshell.definition". Old API will be decommissioned in the next major release.'),Eggshell.definition(t)}),Eggshell.namespace("shell",function(t){return Logger.debug('Depreciated. Use "Eggshell.find". Old API will be decommissioned in the next major release.'),Eggshell.find(t)}),Eggshell.namespace("output",function(t,e,i,n){return Logger.debug('Depreciated. Use "Eggshell.trigger". Old API will be decommissioned in the next major release.'),Eggshell.trigger(t,e,i,n)}),Eggshell.namespace("listen",function(t,e,i,n){return Logger.debug('Depreciated. Use "Eggshell.on". Old API will be decommissioned in the next major release.'),Eggshell.on(t,e,i,n)}),Eggshell.namespace("bind",Eggshell.listen),Eggshell.namespace("input",Eggshell.listen),Eggshell.namespace("stopListening",function(t,e,i,n){return Logger.debug('Depreciated. Use "Eggshell.off". Old API will be decommissioned in the next major release.'),Eggshell.off(t,e,i,n)}),Eggshell.namespace("unbind",Eggshell.stopListening),Eggshell.namespace("disconnect",Eggshell.stopListening)}),Eggshell.module("Shell",["Logger","Api"],function(t,e){var i=function(e,i){var n=[];if("string"==typeof e)n.push(e);else for(var s=0;s<e.length;s++)n.push(e[s]);this.eggshell=!0,this.getId=function(){return n[0]},this.getClass=function(){return i[0]},this.trigger=function(t,e){for(var i=0;i<n.length;i++)Eggshell.trigger(n[i],t,e);return this},this.on=function(t,e,i,s){for(var o=0;o<n.length;o++){var r=n[o];Eggshell.on(r,t,e,i,s)}return this},this.off=function(t,e,i,s){for(var o=0;o<n.length;o++)Eggshell.off(n[o],t,e,i,s);return this},this.connect=function(t,e){for(var i=0;i<n.length;i++)for(var s=0;s<e.length;s++)Eggshell.connect(n[i],t,e[s].selector,e[s].action);return this},this.destroy=function(){for(var t=0;t<n.length;t++)Eggshell.destroy(n[t]);return null},this.getNs=function(){return t.debug('Depreciated function. Use "Shell.getId()". Old API will be decommissioned in the next major release.'),this.getId()},this.getNamespace=function(){return t.debug('Depreciated function. Use "Shell.getId()". Old API will be decommissioned in the next major release.'),this.getId()},this.getConstructorNamespace=function(){return t.debug('Depreciated function. Use "Shell.getClass". Old API will be decommissioned in the next major release.'),this.getClass()},this.listen=function(e,i,n,s){return t.debug('Depreciated function. Use "Shell.on". Old API will be decommissioned in the next major release.'),this.on(e,i,n,s)},this.input=function(e,i,n,s){return t.debug('Depreciated function. Use "Shell.on". Old API will be decommissioned in the next major release.'),this.on(e,i,n,s)},this.output=function(e,i){return t.debug('Depreciated function. Use "Shell.trigger(action, payload, context)". Old API will be decommissioned in the next major release.'),this.trigger(e,i)},this.stopListening=function(e,i,n,s){return t.debug('Depreciated function. Use "Shell.off(action, payload, context, options)". Old API will be decommissioned in the next major release.'),this.off(e,i,n,s)},this.disconnect=function(e,i,n,s){return t.debug('Depreciated function. Use "Shell.off(action, payload, context, options)". Old API will be decommissioned in the next major release.'),this.off(e,i,n,s)}};return Eggshell.namespace("Shell",i),i}),Eggshell.module("Connector",["Logger","Eventbus"],function(t,e){return this.connect=function(i,n,s,o){var r=function(i,n,s,o){return{connect:function(r,a){var l=i,c=n,u=s,d=o;"*"===c&&(c=r.action),"*"===d&&(d=c),t.debug("Routing event. ",{input:{channel:u,action:d},output:{channel:l,action:c}}),e.fire(u,d,a,r.chain)}}}(i,n,s,o);e.addListener(i,n,r.connect,r),
t.debug("Connector created.",r)},this}),Eggshell.module("Egg",["Logger","Eventbus"],function(t,e){var i=function(t,i){var n=null,s=!1,o=[],r=function(t){o[o.length]=t},a=function(){for(;o.length;){var t=o[0];delete o[0],o.splice(0,1),t.call(this)}o=[]};this.getId=function(){return t},this.getClass=function(){return i},this.ready=function(t){n=t,s=!0,a(),delete this.ready,delete this.setContext},this.destroy=function(){n=null,s=null,o=null},this.trigger=function(i,n){r(function(t,i,n){return function(){e.fire(t,i,n)}}(t,i,n)),s&&a()},this.on=function(i,o,l){r(function(t,i,s,o){return function(){o||(o=n),"*"===i?e.addListener(t,"*",s,o):e.addListener(t,i,s,o)}}(t,i,o,l)),s&&a()},this.off=function(i,o,l){return l||(l=n),r(function(t,i,s){return s||(s=n),function(){e.removeListener(t,i,o,s)}}(t,i,l)),s&&a(),this}};return i}),Eggshell.module("Event",[],function(){return function(t,e,i){this.channel=t,this.action=e,this.chain=i,this.namespace=t}}),Eggshell.module("Interceptor",[],function(){return function(t,e,i){this.Event=t,this.callback=e,this.context=i}}),Eggshell.module("Eventbus",["Logger","Event","Interceptor","Listener"],function(t,e,i,n){var s=!0,o={},r={};return this.enableErrorHandling=function(t){s=!!t},this.fire=function(i,n,a,l){a="undefined"!=typeof a&&null!==a?a:{},l="undefined"!=typeof l&&null!==l?l:[],l.push(new e(i,n));var c=new e(i,n,l);if(t.debug("Event fired.",c.channel,c.action,a),r[c.channel]&&r[c.channel][c.action]){var u=r[c.channel][c.action];if(s)try{u.callback.apply(u.context,a),t.debug("Interceptor fired.",u)}catch(d){t.error("Interceptor error.",d,c.channel,c.action,u)}else u.callback.apply(u.context,a),t.debug("Interceptor fired.",u)}else if(o){var h=[];o["*"]&&(o["*"]["*"]&&(h=h.concat(o["*"]["*"])),o["*"][c.action]&&(h=h.concat(o["*"][c.action]))),o[c.channel]&&(o[c.channel]["*"]&&(h=h.concat(o[c.channel]["*"])),o[c.channel][c.action]&&(h=h.concat(o[c.channel][c.action])));for(var g=0;g<h.length;g++){var p=h[g];if(s)try{p.callback.call(p.context,c,a),t.debug("Listener fired.",c.channel,c.action,p)}catch(d){t.error("Listener error.",d,c.channel,c.action,p)}else p.callback.call(p.context,c,a),t.debug("Listener fired.",c.channel,c.action,p)}}},this.addInterceptor=function(n,s,o,a){var l=new e(n,s),c=new i(l,o,a);r[n]||(r[n]={}),r[n][s]=c,t.debug("Interceptor added.",n,s,c,a)},this.removeInterceptor=function(e,i){r[e]||(r[e]={}),delete r[e][i],t.debug("Interceptor removed",e,i)},this.addListener=function(i,s,r,a){var l=new e(i,s),c=new n(l,r,a);o[i]||(o[i]={}),o[i][s]||(o[i][s]=[]),o[i][s].push(c),t.debug("Listener added.",i,s,c,a)},this.removeListener=function(e,i,n,s){if(o[e])if(i&&"string"==typeof i){var r=o[e][i];if(r)for(var a=0;a<r.length;a++){var l=r[a];if(n){if(!s&&l.callback===n){delete l[a],r.splice(a,1),t.debug("Listener removed",e,i,n);break}if(l.callback===n&&l.context===s){delete l[a],r.splice(a,1),t.debug("Listener removed",e,i,n,s);break}}else delete l[a],r.splice(a,1),t.debug("Listeners removed",e,i)}}else delete o[e],o[e]={},t.debug("Listeners removed",e)},this}),Eggshell.module("Listener",[],function(){return function(t,e,i){this.Event=t,this.callback=e,this.context=i}}),Eggshell.module("Loader",["Logger","Egg","ComponentRegistry","EggRegistry"],function(t,e,i,n){var s=0,o=null,r=null,a=function(){return s++,"eggshell."+s};return this.getShellInProgress=function(){return o},this.load=function(s,l,c,u){if(s){if(i.exist(s))return i.get(s)}else if(s=a(),i.exist(s))throw"Component id is already taken";var d=new e(s,l);n.register(s,d);var h=new Eggshell.Shell(s,l);o=h,c.prototype.Eggshell=h,c.prototype.shell=h,"object"==typeof u&&(u.shell=h);var g=null;return g=r&&r.instantiate?r.instantiate(s,l,c,u):new c(u),i.register(s,g),g.Eggshell=h,g.shell=h,d.ready(g),d.trigger("initialize",u),t.debug("Component loaded",s,g),o=null,s},this.unload=function(t){var e=n.get(t);if(e){e.trigger("destroy"),n.unregister(t);var s=i.get(t);r&&r.destroy&&r.destroy(t,s),i.unregister(t)}},Eggshell.namespace("loader.setFactory",function(t){r=t}),this}),Eggshell.module("ComponentRegistry",["Registry"],function(t){return new t("ComponentRegistry")}),Eggshell.module("DefinitionRegistry",["Registry"],function(t){return new t("DefinitionRegistry")}),Eggshell.module("EggRegistry",["Registry"],function(t){return new t("EggRegistry ")}),Eggshell.module("InterfaceRegistry",[],function(){function t(e,i){for(var n in i)i.hasOwnProperty(n)&&(e[n]?i[n]instanceof Array&&e[n]instanceof Array?e[n]=e[n].concat(i[n]):"object"==typeof i[n]?t(e[n],i[n]):e[n]=i[n]:e[n]=i[n]);return e}var e={},i=function(t,i){return e[t]=i,Eggshell},n=function(i,n){var s=e[i];return s?n?t(n,s):s:null};return{set:i,get:n}}),Eggshell.module("Registry",["Logger"],function(t){var e=function(e){var i={};this.exist=function(t){return i[t]?!0:!1},this.getAll=function(){var t=[];for(var e in i)t.push(i[e]);return t},this.get=function(t){return this.exist(t)?i[t]:null},this.register=function(n,s,o){if(!o&&this.exist(n))throw'Key "'+n+'" already taken';i[n]=s,t.debug("Object registered in registry "+e,n,s)},this.unregister=function(n){delete i[n],t.debug("Object unregistered in registry "+e,n)}};return e}),Eggshell.module("ComponentResourceRegistry",["Registry"],function(t){return new t("EggRegistry ")}),Eggshell.module("Validator",["Logger"],function(t){return this.validate=function(t,e,i){if(this.detectMethod(i))throw"Payload cannot contain functions";if(null!==t){if("object"==typeof t){var n;if("number"==typeof t.length){for(var s=0;s<t.length;s++)if(n=t[s],n===e)return;throw"Action not found in component configuration."}for(n in t)if(n===e){var o=t[n];if(null===o||"undefined"==typeof o.payload||null===o.payload)return;if(null!==o.payload){if(this.validateStructure(o.payload,i))return;throw"Payload does not confirm to data structure."}return}throw"Action not found in component configuration."}throw"Invalid input / output configuration"}},this.validateStructure=function(t,e){if("string"==typeof t)return typeof e===t?!0:!1;if("object"==typeof t){for(var i in t){var n=t[i];if(!this.validateStructure(n,e[i]))return!1}return!0}throw"Structure type is not supported. It can either be a native type as a string value or an object of native types."},this.detectMethod=function(t){if("function"==typeof t)return!0;if("object"==typeof t){for(var e in t)if(this.detectMethod(t[e])===!0)return!0;return!1}return!1},this}),window.Eggshell=window.Eggshell?window.Eggshell:Eggshell}(window),Eggshell.module("Marker",["Api","DefinitionRegistry","ComponentRegistry"],function(t,e,i){Eggshell.on("*","initialize",function(t){var n=t.channel;shell=Eggshell.find(n);var s=shell.getClass(),o=e.get(s);if(o&&o.config&&o.config.markers){o.config.strict===!0&&o.config.outputs&&($.isArray(o.config.outputs)?o.config.outputs=$.merge(o.config.outputs,["place markers"]):o.config.outputs["place markers"]=null);var r=i.get(n);shell.on("place markers",function(){var t=this.id,e=this.clazz,i=this.component,n=this.markers;for(var s in n){var o=n[s].automation;if($el=i.$(s),$el.length<=0)throw'Marker "'+s+'" not found in component "'+t+'".';escapeCss=function(t){return t=t.replace(/[!\"#$%&'\(\)\*\+,\.\/:;<=>\?\@\[\\\]\^`\{\|\}~]/g,"-").replace(/\s/g,"-")},$el.addClass("chg-test-"+escapeCss(e)+"-"+escapeCss(o))}},{component:r,markers:o.config.markers,id:n,clazz:s})}},this)}),function(t,e){var i=t.document,n=t.location,s=function(){var i=function(i,n){i=i.split(".");for(var s=t.C,o,r,a=0;a<i.length;a++){var l=i[a];o=s,r=l,s=s[l]||(s[l]={})}return n!==e&&(o[r]=n),s};return i}();s.utility=function(){return self},s.utility.exists=function(t,i){i=i.split(".");for(var n=t,s=0;s<i.length;s++){var o=i[s];if(n[o]===e)return!1;n=n[o]}return!0},s.utility.access=function(i,n){var s=n||t,o;i=i.split(".");for(var r=0;r<i.length;r++){if(o=i[r],s[o]===e)return e;s=s[o]}return s},s.utility.getMaxIndex=function(){for(var t=$("body").children(),e=[1e3],i=0;i<t.length;i++)e.push(+$(t[i]).css("z-index")||0);var n=s.utility.max(e);return n},s.utility.updateCsrfToken=function(t,e,i){var e="undefined"!=typeof e?e:"/",i="undefined"!=typeof i?i:!1;$.ajax({url:e+"_ajax/global/init",type:"post",dataType:"json",xhrFields:{withCredentials:!0},success:function(t){return function(e){e.token!==s.global.csrfToken&&(s.global.csrfToken=e.token),e.facebookId&&i&&s("global.facebookAppId",e.facebookId),t&&t()}}(t)})},s.utility.loadScript=function(t,e,n){var o=i.createElement("script");return o.setAttribute("type","text/javascript"),o.setAttribute("charset","utf-8"),o.readyState?o.onreadystatechange=function(){("loaded"==o.readyState||"complete"==o.readyState)&&(o.onreadystatechange=null,e())}:o.onload=function(){e()},o.src=t,i.getElementsByTagName("head")[0].appendChild(o),n&&s.dom.$window.one("pageunload",function(){o.parentNode.removeChild(o)}),o},s.utility.max=function(t){return Math.max.apply(Math,t)},s.utility.min=function(t){return Math.min.apply(Math,t)},s.utility.addCommasToInt=function(t){var e=t.toString();return e.match(/\D/)?null:e=e.replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")},s.utility.processPlaceholders=function(){var t=$("[placeholder]");t.each(function(){var t=$(this),e=t.attr("placeholder");t.placeholder(e)})},s.utility.json2UriParams=function(t){var e=[];for(var i in t)t[i]&&e.push(i+"="+encodeURIComponent(t[i]));return e.join("&")},s.utility.getParams=function(){return s.utility.getParamsByUrl(t.location.href)},s.utility.getParamsByUrl=function(t){var i={},n=t.indexOf("?");if(-1==n)return i;var s=t.indexOf("#");s>0&&(t=t.slice(0,s)),t=t.substr(n+1,t.length),t=t.split("&");for(var o,r=0;r<t.length;r++)o=t[r].split("="),o[0]=decodeURIComponent(o[0]),o[1]=o[1]==e?1:decodeURIComponent(o[1]),i[o[0]]?("[object Array]"!=Object.prototype.toString.call(i[o[0]])&&(i[o[0]]=[i[o[0]]]),i[o[0]].push(o[1])):i[o[0]]=o[1];return i},s.dump=function(){if(!(top.location.href.indexOf("www.chegg.com")>-1)){for(var t=0,e=arguments.length;e>t;t++)s.log("Variable type: "+Object.prototype.toString.call(arguments[t])),s.log("Variable value: ",arguments[t]);s.log(s.log.divider(10)+" Stacktrace "+s.log.divider(10)),console.trace()}},s.log=function(){null!=s.utility.getCookie("logging")&&Function.prototype.bind&&console&&console.log&&Function.prototype.bind.call(console.log,console).apply(console,arguments)},s.log.divider=function(t){for(var e="",i=0;t>i;i++)e+="=";return e},s.utility.clone=function(t,e){if(null==t||"object"!=typeof t)return t;var i=new t.constructor;for(var n in t)e&&-1!=n.indexOf(e)||(i[n]=this.clone(t[n]));return i},s.utility.bookCover=function(t,e,i){i=$.extend({cart:!1,readNowCornerVersion:!1,isOverdue:!1,overdueCornerVersion:!1},i),t=$.extend({},t);var n="",o="",r="",a="",l="";switch(e){case 1:case 2:n=t.imgThumb,a="small",l="tiny";break;case 3:n=t.imgSmall,a="small",l="small";break;case 4:n=t.imgMedium,a="small",l="medium";break;case 5:n=t.imgLarge,a="large",l="large"}if(n&&0!==n.indexOf("http")&&-1===n.indexOf(s.global.coversBaseUrl)&&(n=s.global.coversBaseUrl+n.replace(/^\//,"")),i.hasOwnProperty("type")&&i.type==s.utility.bookCover.tbsType){r='<div class="tbs-book-cover '+l+'"> ';var c;switch(!0){case null!=n:c='<img class="tbs-book-cover-img" src="'+n+'" onerror="this.src=\''+s.global.errorImage+"'\" />";break;default:c='<span class="tbs-title">Solutions</span>'}r+=c,r+='<div class="tbs-bottom-line">by </div></div>'}else{var u="";if(i.cart&&(u="id=book-in-review"),s.utility.isMobile()){var d="";if(_.isObject(i)){switch(i.isSample===!0&&(d="sample "),!0){case i.isOverdue===!0:d+="overdue";break;case i.isRwyw===!0:d+="rwyw";break;case i.isETextbook===!0:d+="etextbook"}"small"==a&&(d+=a)}r='<div class="book-cover '+d+'"><img src="'+n+'" onerror="this.src="'+s.global.errorImage+'"></div>'}else{var h="";"undefined"!=typeof i&&null!==i&&("undefined"!=typeof i.isReadNow&&i.isReadNow?(o='<div class="read-now-strip"></div>',"undefined"!=typeof i.readNowCornerVersion&&i.readNowCornerVersion&&(o='<div class="read-now-corner '+a+'"></div>')):"undefined"!=typeof i.isOverdue&&i.isOverdue?(o='<div class="overdue-strip"></div>',"undefined"!=typeof i.overdueCornerVersion&&i.overdueCornerVersion&&(o='<div class="overdue-corner '+a+'"></div>')):"undefined"!=typeof i.isRwyw&&i.isRwyw?o="undefined"!=typeof i.stripVersion&&i.stripVersion?'<div class="img-courtesy-etextbook-overlay"></div>':'<div class="instant-access">Includes free <span>Instant Access</span></div>':"undefined"!=typeof i.showRwywOverlay&&i.showRwywOverlay&&(h='<div id="rwyw-book-overlay-100" class="icn icon-chegg-etb-courtesy"/>')),r="<div "+u+' class="book-img-'+e,i&&i.noBoxShadow&&(r+=" noBoxShadow"),r+='"><img class="book-cover" src="'+n+'" onerror="this.src=\''+s.global.errorImage+"'\" />",r+=h+o+"</div>"}}return r},s.utility.bookCover.dropdown=1,s.utility.bookCover.thumb=2,s.utility.bookCover.small=3,s.utility.bookCover.medium=4,s.utility.bookCover.large=5,s.utility.bookCover.bookType="book",s.utility.bookCover.tbsType="tbs",s.utility.openGlobalNav=function(t){Eggshell.find("C.global.nav").trigger("expand navigation bar")},s.utility.closeGlobalNav=function(t){Eggshell.find("C.global.nav").trigger("collapse navigation bar")},s.utility.reflowSubNav=function(){$(".chg-nav").css({width:s.dom.$content.width()})},s.utility.showTower=function(){$(".chg-container").addClass("has-tower"),s.utility.reflowSubNav()},s.utility.hideTower=function(){$(".chg-container").removeClass("has-tower"),s.utility.reflowSubNav()},function(){var e={},i=["$","_","Backbone","C","Class","console","History","jQuery","swfobject","matchMedia","CRITEO","_FirebugCommandLine","FxFrames","Fx","MathJax","SelectParser","AbstractChosen","get_side_border_padding","SkypeClick2Call","tinyMCE","tinymce","cheggmathjax","WebFont","WebFontConfig","insertSteps","allocatedAxes","ctx","startAngle","FB","fbAsyncInit","fb_xdm_frame_http","fb_xdm_frame_https","BrightTag","btServe","bt_parameter","bt_meta","bt_data","bt_data_escaped","bt_log","bt_handle_exception","_bt_url_prefix","_bt_referrer","_bt_site","_bt_mode"];for(var n in t)e[n]=1;for(var o=0;o<i.length;o++)e[i[o]]=1;s.utility.checkPollution=function(){for(var i in t)e[i]||0===i.indexOf("jQuery")||s.log("pollution of window."+i)}}(),s.utility.navigate=function(t,i){if(s.global.adTargeting={},"undefined"!=typeof s.dom&&"undefined"!=typeof s.dom.$window)var o=s.dom.$window.triggerHandler("beforeunload");if(o!==e){var r=confirm(""+o+"\n\nAre you sure you want to leave this page?");if(!r)return;"undefined"!=typeof s.dom&&"undefined"!=typeof s.dom.$window&&s.dom.$window.unobserve("beforeunload",this)}if(s.global.navigationOptimization&&!s.utility.isAjaxLoadable(t))return i?n.replace(t):n.href=t,!1;if(History.enabled&&s.global.ajaxPageLoading)try{t!=n.href?i?History.replaceState(null,null,t):History.pushState(null,null,t):s.utility._handleRequest(t)}catch(a){i?n.replace(t):n.href=t}else i?n.replace(t):n.href=t},s.utility.isAjaxLoadable=function(t){var e=!0,i=s.utility.parseUrl(t),n=i.host,o=i.path;if(n){var r=n.split("."),a=r[0];n.indexOf("chegg.com")>-1&&"www"!==a&&(e=!1)}return o&&(o.indexOf("/tutors")>-1||o.indexOf("/jobs")>-1)&&(e=!1),e},s.utility.parseUrl=function(t){for(var e=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],i=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,n=i.exec(t),s={},o=14,r=!1;o--;)n[o]&&(s[e[o]]=n[o]);if(s.path){var a=s.path.split("/");s.splits=a,"_ajax"===a[1]&&(r=!0)}return s.isAjax=r,s},s.utility.refresh=function(){s.utility.navigate(n.href)},s.utility.replace=function(t){s.utility.navigate(t,!0)},s.utility.escapeRegEx=function(t){return t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},s.utility.escapeHtml=function(t){return $("<div/>").text(t).html()},s.utility.serializeFormToJson=function(t){var i=t.jQuery?t:$(t),n=i.serializeArray(),s={};return $.each(n,function(t,i){var n=i.name,o=i.value;s[n]=s[n]===e?o:$.isArray(s[n])?s[n].concat(o):[s[n],o]}),s},s.utility.appendCSRFToken=function(t){if(t.length&&0===t.find('input[name="token"]').length){var e=$('<input name="token" type="hidden" />').val(s.global.csrfToken);t.append(e)}return t},s.utility.attrSupportedByEl=function(t,e){var n=s.utility.attrSupportedByEl.cache[t]||i.createElement(t);return s.utility.attrSupportedByEl.cache[t]||(s.utility.attrSupportedByEl.cache[t]=n),e in n},s.utility.attrSupportedByEl.cache={},s.utility.rgba2rgb=function(t){var e=t.match(/rgba\((.+)\)/);return e?(e=e[1].split(","),e.pop(),"rgb("+e.join(",")+")"):t},s.utility.unique=function(t){var e=[];t:for(var i=0,n=t.length;n>i;i++){for(var s=i+1;n>s;s++)if(t[s]===t[i])continue t;e.push(t[i])}return e},s.utility.setCookie=function(t,e,n){var o=new Date;o.setDate(o.getDate()+n);var r=escape(e)+(null==n?"":";expires="+o.toUTCString())+";path=/";i.cookie=t+"="+r+";domain="+(s.global.cookieDomain||COOKIE_DOMAIN)},s.utility.getCookie=function(t){var e,n,s,o=i.cookie.split(";");for(e=0;e<o.length;e++)if(n=o[e].substr(0,o[e].indexOf("=")),s=o[e].substr(o[e].indexOf("=")+1),n=n.replace(/^\s+|\s+$/g,""),n==t)return unescape(s)},s.utility.setLocal=function(t,e,i){return i||(i=864e5),$.jStorage.set(t,e,{TTL:i})},s.utility.getLocal=function(t,e){return $.jStorage.get(t,e)},s.utility.deleteLocal=function(t){return $.jStorage.deleteKey(t)},s.utility.listLocal=function(){return $.jStorage.index()},s.utility.getActiveExperiments=function(){var t=s.utility.getCookie("exp");return t&&t.length?t.toUpperCase().split("|"):[]},s.utility.dataLogger=function(){var t=s.utility.getCookie("V"),e=s.utility.getCookie("exp");e.toUpperCase();var i={uvn:t,pageTrackId:s.logger.pageTrackId,experiments:e,userUuid:s.global.userUuid};return $.extend({},i)},s.utility.updateCart=function(t){$.ajax({url:"/_ajax/cart/count",complete:function(e){var i={};try{i=$.parseJSON(e.responseText)}catch(n){i={items:0}}0==i.items||null==i.items?($(".chg-cart-area").css({display:"none"}),$(".hide-with-cart").css({display:"none"})):($(".chg-cart-count").text(i.items),null==i.items&&$(".chg-cart-count").text(0),$(".chg-cart-area").css({display:"inline-block"}),$(".hide-with-cart").css({display:"inline-block"})),"function"==typeof t&&t(i)}})},s.utility.zeroPad=function(t,e){e=e||10;var i=String(e).length-String(t).length+1;return i>0?new Array(i).join("0")+t:t},s.utility.getMessage=function(t,e,i,n){return i=i?'<div class="msg-header">'+i+"</div>":"",n=n?'<span class="msg-close"></span>':"",'<div class="'+t+'"><div class="msg-icon">'+i+'<div class="msg-text">'+e+n+"</div></div></div>"},s.utility.showCsrfMessage=function(){s.utility.csrfMessageDialog||(s.utility.csrfMessageDialog=Eggshell.create("C.Eggshell.dialog",{el:$("body")}),Eggshell.immuneToDestroyAll(s.utility.csrfMessageDialog));var t=s.utility.csrfMessageDialog;Eggshell.trigger(t,"set headline","Action could not be completed"),Eggshell.trigger(t,"hide sub headline"),Eggshell.trigger(t,"hide icon"),Eggshell.trigger(t,"set content html","Your session has expired due to inactivity. Please refresh the page."),Eggshell.trigger(t,"show")},s.utility.isISBN10=function(t){if(t=t.replace(/[^\dxX]/g,""),10!=t.length)return!1;var e=t.split("");"X"==e[9].toUpperCase()&&(e[9]=10);for(var i=0,n=0;n<e.length;n++)i+=(10-n)*parseInt(e[n]);return i%11==0},s.utility.isISBN13=function(t){if(t=t.replace(/[^\d]/g,""),13!=t.length)return!1;for(var e=t.split(""),i=0,n=0;13>n;n+=2)i+=parseInt(e[n]);for(var s=1;12>s;s+=2)i+=3*parseInt(e[s]);return 0==i%10},s.utility.ordinal=function(t){var e=Math.abs(t)%10,i=Math.abs(t)%100<21&&Math.abs(t)%100>4?"th":4>e?3>e?2>e?1>e?"th":"st":"nd":"rd":"th";return t+i},s.utility.highlightText=function(t,e){var i='<span class="chg-suggest-term"> $1</span>',n=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),s=new RegExp("("+n+")","gi");return t.replace(s,i)},s.utility.loadCss=function(t){var e=i.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",t),i.getElementsByTagName("head")[0].appendChild(e)},s.utility.isAdBlock=function o(t,e){function i(t){o(!1)}function n(t){o(!0)}function o(e){s.global.isAdBlock=e,t&&t(e)}var e="undefined"!=typeof e?e:"/s/_global/adframe.js";s.utility.loadScript(e,i,!0).onerror=n},s.utility.cleanInput=function(t){return t.replace(/<(?:.|\n)*?>/gm,"")},s.utility.isMobile=function r(){return r.val===e&&(r.val=$("body").hasClass("mobile")),r.val},s.utility.isIOS=function a(){if(a.val===e){var t=navigator.userAgent.toLowerCase();a.val=t.match(/iPad/i)||t.match(/iPhone/i)||t.match(/iPod/i)}return a.val},s.utility.isAndroid=function l(){if(l.val===e){var t=navigator.userAgent.toLowerCase();l.val=t.indexOf("android")>-1}return l.val},s.utility.isIE=function c(){return c.val===e&&(c.val=i.documentMode||/Edge/.test(navigator.userAgent)),c.val},s.utility.isEdge=function u(){return u.val===e&&(u.val=-1!==navigator.userAgent.indexOf("Edge")),u.val},s.utility.setSessionVariable=function(t,e,i){$.ajax({url:"/_ajax/common/session/set",type:"get",dataType:"json",data:{key:t,value:e,token:s.global.csrfToken},success:i,error:function(t){console.log("Error setting session variable. "+JSON.stringify(t))}})},s.utility.getSessionVariable=function(t,e){$.ajax({url:"/_ajax/common/session/get",type:"get",dataType:"json",data:{key:t,token:s.global.csrfToken},success:e,error:function(t){s.log("Error retrieving session variable. "+JSON.stringify(t))}})},s.utility.setAdobeExperimentVariable=function(t,i){e===s.global.adobeExperiments&&(s.global.adobeExperiments={}),s.global.adobeExperiments[t]=i},s.utility.getAdobeExperimentVariable=function(t){return e===s.global.adobeExperiments||e===s.global.adobeExperiments[t]?null:s.global.adobeExperiments[t]},t.C=t.C||s}(window);var JSON;JSON||(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,s,o,r=gap,a,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,i=0;o>i;i+=1)a[i]=str(i,l)||"null";return s=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+r+"]":"["+a.join(",")+"]",gap=r,s}if(rep&&"object"==typeof rep)for(o=rep.length,i=0;o>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],s=str(n,l),s&&a.push(quote(n)+(gap?": ":":")+s));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(s=str(n,l),s&&a.push(quote(n)+(gap?": ":":")+s));return s=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+r+"}":"{"+a.join(",")+"}",gap=r,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,n,s=t[e];if(s&&"object"==typeof s)for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n=walk(s,i),void 0!==n?s[i]=n:delete s[i]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(){function t(){var t=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),t=!0,window.localStorage.removeItem("_tmptest")}catch(i){}if(t)try{window.localStorage&&(w=window.localStorage,$="localStorage",T=w.jStorage_update)}catch(o){}else if("globalStorage"in window)try{window.globalStorage&&(w=window.globalStorage[window.location.hostname],$="globalStorage",T=w.jStorage_update)}catch(r){}else{if(x=document.createElement("link"),!x.addBehavior)return void(x=null);x.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(x);try{x.load("jStorage")}catch(a){x.setAttribute("jStorage","{}"),x.save("jStorage"),x.load("jStorage")}var c="{}";try{c=x.getAttribute("jStorage")}catch(u){}try{T=x.getAttribute("jStorage_update")}catch(g){}w.jStorage=c,$="userDataBehavior"}l(),d(),e("local"),e("session"),n(),h(),"addEventListener"in window&&window.addEventListener("pageshow",function(t){t.persisted&&s()},!1)}function e(t,i){function n(){if("session"==t)try{c=y.parse(window.name||"{}")}catch(e){c={}}}function s(){"session"==t&&(window.name=y.stringify(c))}var o=!1,r=0,a,l,c={},u=Math.random();if(i||"undefined"==typeof window[t+"Storage"]){if("local"==t&&window.globalStorage)return void(localStorage=window.globalStorage[window.location.hostname]);if("userDataBehavior"==$){i&&window[t+"Storage"]&&window[t+"Storage"].parentNode&&window[t+"Storage"].parentNode.removeChild(window[t+"Storage"]),l=document.createElement("button"),document.getElementsByTagName("head")[0].appendChild(l),"local"==t?c=C:"session"==t&&n();for(a in c)c.hasOwnProperty(a)&&"__jstorage_meta"!=a&&"length"!=a&&"undefined"!=typeof c[a]&&(a in l||r++,l[a]=c[a]);l.length=r,l.key=function(t){var e=0,i;n();for(i in c)if(c.hasOwnProperty(i)&&"__jstorage_meta"!=i&&"length"!=i&&"undefined"!=typeof c[i]){if(e==t)return i;e++}},l.getItem=function(e){return n(),"session"==t?c[e]:b.jStorage.get(e)},l.setItem=function(t,e){"undefined"!=typeof e&&(l[t]=(e||"").toString())},l.removeItem=function(e){return"local"==t?b.jStorage.deleteKey(e):(l[e]=void 0,o=!0,e in l&&l.removeAttribute(e),void(o=!1))},l.clear=function(){return"session"==t?(window.name="",void e("session",!0)):void b.jStorage.flush()},"local"==t&&(L=function(t,e){"length"!=t&&(o=!0,"undefined"==typeof e?t in l&&(r--,l.removeAttribute(t)):(t in l||r++,l[t]=(e||"").toString()),l.length=r,o=!1)}),l.attachEvent("onpropertychange",function(e){if("length"!=e.propertyName&&!o&&"length"!=e.propertyName){if("local"==t)e.propertyName in c||"undefined"==typeof l[e.propertyName]||r++;else if("session"==t)return n(),"undefined"==typeof l[e.propertyName]||e.propertyName in c?"undefined"==typeof l[e.propertyName]&&e.propertyName in c?(delete c[e.propertyName],r--):c[e.propertyName]=l[e.propertyName]:(c[e.propertyName]=l[e.propertyName],r++),s(),void(l.length=r);b.jStorage.set(e.propertyName,l[e.propertyName]),l.length=r}}),window[t+"Storage"]=l}}}function i(){var t="{}";if("userDataBehavior"==$){x.load("jStorage");try{t=x.getAttribute("jStorage")}catch(e){}try{T=x.getAttribute("jStorage_update")}catch(i){}w.jStorage=t}l(),d(),h()}function n(){"localStorage"==$||"globalStorage"==$?"addEventListener"in window?window.addEventListener("storage",s,!1):document.attachEvent("onstorage",s):"userDataBehavior"==$&&setInterval(s,1e3)}function s(){var t;clearTimeout(E),E=setTimeout(function(){if("localStorage"==$||"globalStorage"==$)t=w.jStorage_update;else if("userDataBehavior"==$){x.load("jStorage");try{t=x.getAttribute("jStorage_update")}catch(e){}}t&&t!=T&&(T=t,o())},25)}function o(){var t=y.parse(y.stringify(C.__jstorage_meta.CRC32)),e;i(),e=y.parse(y.stringify(C.__jstorage_meta.CRC32));var n,s=[],o=[];for(n in t)if(t.hasOwnProperty(n)){if(!e[n]){o.push(n);continue}t[n]!=e[n]&&"2."==String(t[n]).substr(0,2)&&s.push(n)}for(n in e)e.hasOwnProperty(n)&&(t[n]||s.push(n));r(s,"updated"),r(o,"deleted")}function r(t,e){if(t=[].concat(t||[]),"flushed"==e){t=[];for(var i in S)S.hasOwnProperty(i)&&t.push(i);e="deleted"}for(var n=0,s=t.length;s>n;n++)if(S[t[n]])for(var o=0,r=S[t[n]].length;r>o;o++)S[t[n]][o](t[n],e)}function a(){var t=(+new Date).toString();"localStorage"==$||"globalStorage"==$?w.jStorage_update=t:"userDataBehavior"==$&&(x.setAttribute("jStorage_update",t),x.save("jStorage")),s()}function l(){if(w.jStorage)try{C=y.parse(String(w.jStorage))}catch(t){w.jStorage="{}"}else w.jStorage="{}";k=w.jStorage?String(w.jStorage).length:0,C.__jstorage_meta||(C.__jstorage_meta={}),C.__jstorage_meta.CRC32||(C.__jstorage_meta.CRC32={})}function c(){p();try{w.jStorage=y.stringify(C),x&&(x.setAttribute("jStorage",w.jStorage),x.save("jStorage")),k=w.jStorage?String(w.jStorage).length:0}catch(t){}}function u(t){if(!t||"string"!=typeof t&&"number"!=typeof t)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==t)throw new TypeError("Reserved key name");return!0}function d(){var t,e,i,n,s=1/0,o=!1,l=[];if(clearTimeout(N),C.__jstorage_meta&&"object"==typeof C.__jstorage_meta.TTL){t=+new Date,i=C.__jstorage_meta.TTL,n=C.__jstorage_meta.CRC32;for(e in i)i.hasOwnProperty(e)&&(i[e]<=t?(delete i[e],delete n[e],delete C[e],o=!0,l.push(e)):i[e]<s&&(s=i[e]));s!=1/0&&(N=setTimeout(d,s-t)),o&&(c(),a(),r(l,"deleted"))}}function h(){if(C.__jstorage_meta.PubSub){for(var t,e=I,i=len=C.__jstorage_meta.PubSub.length-1;i>=0;i--)t=C.__jstorage_meta.PubSub[i],t[0]>I&&(e=t[0],g(t[1],t[2]));I=e}}function g(t,e){if(_[t])for(var i=0,n=_[t].length;n>i;i++)_[t][i](t,y.parse(y.stringify(e)))}function p(){if(C.__jstorage_meta.PubSub){for(var t=+new Date-2e3,e=0,i=C.__jstorage_meta.PubSub.length;i>e;e++)if(C.__jstorage_meta.PubSub[e][0]<=t){C.__jstorage_meta.PubSub.splice(e,C.__jstorage_meta.PubSub.length-e);break}C.__jstorage_meta.PubSub.length||delete C.__jstorage_meta.PubSub}}function f(t,e){C.__jstorage_meta||(C.__jstorage_meta={}),C.__jstorage_meta.PubSub||(C.__jstorage_meta.PubSub=[]),C.__jstorage_meta.PubSub.unshift([+new Date,t,e]),c(),a()}function m(t,e){for(var i=t.length,n=e^i,s=0,o;i>=4;)o=255&t.charCodeAt(s)|(255&t.charCodeAt(++s))<<8|(255&t.charCodeAt(++s))<<16|(255&t.charCodeAt(++s))<<24,o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16),o^=o>>>24,o=1540483477*(65535&o)+((1540483477*(o>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^o,i-=4,++s;switch(i){case 3:n^=(255&t.charCodeAt(s+2))<<16;case 2:n^=(255&t.charCodeAt(s+1))<<8;case 1:n^=255&t.charCodeAt(s),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)}return n^=n>>>13,n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16),n^=n>>>15,n>>>0}var v="0.3.2",b=window.jQuery||window.$||(window.$={}),y={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(t){return String(t).evalJSON()}||b.parseJSON||b.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||b.toJSON};if(!y.parse||!y.stringify)throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var C={__jstorage_meta:{CRC32:{}}},w={jStorage:"{}"},x=null,k=0,$=!1,S={},E=!1,T=0,_={},I=+new Date,N,j={isXML:function(t){var e=(t?t.ownerDocument||t:0).documentElement;return e?"HTML"!==e.nodeName:!1},encode:function(t){if(!this.isXML(t))return!1;try{return(new XMLSerializer).serializeToString(t);

}catch(e){try{return t.xml}catch(i){}}return!1},decode:function(t){var e="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e},i;return e?(i=e.call("DOMParser"in window&&new DOMParser||window,t,"text/xml"),this.isXML(i)?i:!1):!1}},L=function(){};b.jStorage={version:v,set:function(t,e,i){if(u(t),i=i||{},"undefined"==typeof e)return this.deleteKey(t),e;if(j.isXML(e))e={_is_xml:!0,xml:j.encode(e)};else{if("function"==typeof e)return void 0;e&&"object"==typeof e&&(e=y.parse(y.stringify(e)))}return C[t]=e,C.__jstorage_meta.CRC32[t]="2."+m(y.stringify(e)),this.setTTL(t,i.TTL||0),L(t,e),r(t,"updated"),e},get:function(t,e){return u(t),t in C?C[t]&&"object"==typeof C[t]&&C[t]._is_xml?j.decode(C[t].xml):C[t]:"undefined"==typeof e?null:e},deleteKey:function(t){return u(t),t in C?(delete C[t],"object"==typeof C.__jstorage_meta.TTL&&t in C.__jstorage_meta.TTL&&delete C.__jstorage_meta.TTL[t],delete C.__jstorage_meta.CRC32[t],L(t,void 0),c(),a(),r(t,"deleted"),!0):!1},setTTL:function(t,e){var i=+new Date;return u(t),e=Number(e)||0,t in C?(C.__jstorage_meta.TTL||(C.__jstorage_meta.TTL={}),e>0?C.__jstorage_meta.TTL[t]=i+e:delete C.__jstorage_meta.TTL[t],c(),d(),a(),!0):!1},getTTL:function(t){var e=+new Date,i;return u(t),t in C&&C.__jstorage_meta.TTL&&C.__jstorage_meta.TTL[t]?(i=C.__jstorage_meta.TTL[t]-e,i||0):0},flush:function(){return C={__jstorage_meta:{CRC32:{}}},e("local",!0),c(),a(),r(null,"flushed"),!0},storageObj:function(){function t(){}return t.prototype=C,new t},index:function(){var t=[],e;for(e in C)C.hasOwnProperty(e)&&"__jstorage_meta"!=e&&t.push(e);return t},storageSize:function(){return k},currentBackend:function(){return $},storageAvailable:function(){return!!$},listenKeyChange:function(t,e){u(t),S[t]||(S[t]=[]),S[t].push(e)},stopListening:function(t,e){if(u(t),S[t]){if(!e)return void delete S[t];for(var i=S[t].length-1;i>=0;i--)S[t][i]==e&&S[t].splice(i,1)}},subscribe:function(t,e){if(t=(t||"").toString(),!t)throw new TypeError("Channel not defined");_[t]||(_[t]=[]),_[t].push(e)},publish:function(t,e){if(t=(t||"").toString(),!t)throw new TypeError("Channel not defined");f(t,e)},reInit:function(){i()}},t()}(),function(){var t=this,e=t._,i={},n=Array.prototype,s=Object.prototype,o=Function.prototype,r=n.push,a=n.slice,l=n.concat,c=s.toString,u=s.hasOwnProperty,d=n.forEach,h=n.map,g=n.reduce,p=n.reduceRight,f=n.filter,m=n.every,v=n.some,b=n.indexOf,y=n.lastIndexOf,C=Array.isArray,w=Object.keys,x=o.bind,k=function(t){return t instanceof k?t:this instanceof k?void(this._wrapped=t):new k(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=k),exports._=k):t._=k,k.VERSION="1.4.3";var $=k.each=k.forEach=function(t,e,n){if(null!=t)if(d&&t.forEach===d)t.forEach(e,n);else if(t.length===+t.length){for(var s=0,o=t.length;o>s;s++)if(e.call(n,t[s],s,t)===i)return}else for(var r in t)if(k.has(t,r)&&e.call(n,t[r],r,t)===i)return};k.map=k.collect=function(t,e,i){var n=[];return null==t?n:h&&t.map===h?t.map(e,i):($(t,function(t,s,o){n[n.length]=e.call(i,t,s,o)}),n)};var S="Reduce of empty array with no initial value";k.reduce=k.foldl=k.inject=function(t,e,i,n){var s=arguments.length>2;if(null==t&&(t=[]),g&&t.reduce===g)return n&&(e=k.bind(e,n)),s?t.reduce(e,i):t.reduce(e);if($(t,function(t,o,r){s?i=e.call(n,i,t,o,r):(i=t,s=!0)}),!s)throw new TypeError(S);return i},k.reduceRight=k.foldr=function(t,e,i,n){var s=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return n&&(e=k.bind(e,n)),s?t.reduceRight(e,i):t.reduceRight(e);var o=t.length;if(o!==+o){var r=k.keys(t);o=r.length}if($(t,function(a,l,c){l=r?r[--o]:--o,s?i=e.call(n,i,t[l],l,c):(i=t[l],s=!0)}),!s)throw new TypeError(S);return i},k.find=k.detect=function(t,e,i){var n;return E(t,function(t,s,o){return e.call(i,t,s,o)?(n=t,!0):void 0}),n},k.filter=k.select=function(t,e,i){var n=[];return null==t?n:f&&t.filter===f?t.filter(e,i):($(t,function(t,s,o){e.call(i,t,s,o)&&(n[n.length]=t)}),n)},k.reject=function(t,e,i){return k.filter(t,function(t,n,s){return!e.call(i,t,n,s)},i)},k.every=k.all=function(t,e,n){e||(e=k.identity);var s=!0;return null==t?s:m&&t.every===m?t.every(e,n):($(t,function(t,o,r){return(s=s&&e.call(n,t,o,r))?void 0:i}),!!s)};var E=k.some=k.any=function(t,e,n){e||(e=k.identity);var s=!1;return null==t?s:v&&t.some===v?t.some(e,n):($(t,function(t,o,r){return s||(s=e.call(n,t,o,r))?i:void 0}),!!s)};k.contains=k.include=function(t,e){return null==t?!1:b&&t.indexOf===b?-1!=t.indexOf(e):E(t,function(t){return t===e})},k.invoke=function(t,e){var i=a.call(arguments,2),n=k.isFunction(e);return k.map(t,function(t){return(n?e:t[e]).apply(t,i)})},k.pluck=function(t,e){return k.map(t,function(t){return t[e]})},k.where=function(t,e){return k.isEmpty(e)?[]:k.filter(t,function(t){for(var i in e)if(e[i]!==t[i])return!1;return!0})},k.max=function(t,e,i){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&k.isEmpty(t))return-(1/0);var n={computed:-(1/0),value:-(1/0)};return $(t,function(t,s,o){var r=e?e.call(i,t,s,o):t;r>=n.computed&&(n={value:t,computed:r})}),n.value},k.min=function(t,e,i){if(!e&&k.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&k.isEmpty(t))return 1/0;var n={computed:1/0,value:1/0};return $(t,function(t,s,o){var r=e?e.call(i,t,s,o):t;r<n.computed&&(n={value:t,computed:r})}),n.value},k.shuffle=function(t){var e,i=0,n=[];return $(t,function(t){e=k.random(i++),n[i-1]=n[e],n[e]=t}),n};var T=function(t){return k.isFunction(t)?t:function(e){return e[t]}};k.sortBy=function(t,e,i){var n=T(e);return k.pluck(k.map(t,function(t,e,s){return{value:t,index:e,criteria:n.call(i,t,e,s)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index<e.index?-1:1}),"value")};var _=function(t,e,i,n){var s={},o=T(e||k.identity);return $(t,function(e,r){var a=o.call(i,e,r,t);n(s,a,e)}),s};k.groupBy=function(t,e,i){return _(t,e,i,function(t,e,i){(k.has(t,e)?t[e]:t[e]=[]).push(i)})},k.countBy=function(t,e,i){return _(t,e,i,function(t,e){k.has(t,e)||(t[e]=0),t[e]++})},k.sortedIndex=function(t,e,i,n){i=null==i?k.identity:T(i);for(var s=i.call(n,e),o=0,r=t.length;r>o;){var a=o+r>>>1;i.call(n,t[a])<s?o=a+1:r=a}return o},k.toArray=function(t){return t?k.isArray(t)?a.call(t):t.length===+t.length?k.map(t,k.identity):k.values(t):[]},k.size=function(t){return null==t?0:t.length===+t.length?t.length:k.keys(t).length},k.first=k.head=k.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:a.call(t,0,e)},k.initial=function(t,e,i){return a.call(t,0,t.length-(null==e||i?1:e))},k.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:a.call(t,Math.max(t.length-e,0))},k.rest=k.tail=k.drop=function(t,e,i){return a.call(t,null==e||i?1:e)},k.compact=function(t){return k.filter(t,k.identity)};var I=function(t,e,i){return $(t,function(t){k.isArray(t)?e?r.apply(i,t):I(t,e,i):i.push(t)}),i};k.flatten=function(t,e){return I(t,e,[])},k.without=function(t){return k.difference(t,a.call(arguments,1))},k.uniq=k.unique=function(t,e,i,n){k.isFunction(e)&&(n=i,i=e,e=!1);var s=i?k.map(t,i,n):t,o=[],r=[];return $(s,function(i,n){(e?n&&r[r.length-1]===i:k.contains(r,i))||(r.push(i),o.push(t[n]))}),o},k.union=function(){return k.uniq(l.apply(n,arguments))},k.intersection=function(t){var e=a.call(arguments,1);return k.filter(k.uniq(t),function(t){return k.every(e,function(e){return k.indexOf(e,t)>=0})})},k.difference=function(t){var e=l.apply(n,a.call(arguments,1));return k.filter(t,function(t){return!k.contains(e,t)})},k.zip=function(){for(var t=a.call(arguments),e=k.max(k.pluck(t,"length")),i=new Array(e),n=0;e>n;n++)i[n]=k.pluck(t,""+n);return i},k.object=function(t,e){if(null==t)return{};for(var i={},n=0,s=t.length;s>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},k.indexOf=function(t,e,i){if(null==t)return-1;var n=0,s=t.length;if(i){if("number"!=typeof i)return n=k.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,s+i):i}if(b&&t.indexOf===b)return t.indexOf(e,i);for(;s>n;n++)if(t[n]===e)return n;return-1},k.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(y&&t.lastIndexOf===y)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var s=n?i:t.length;s--;)if(t[s]===e)return s;return-1},k.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),s=0,o=new Array(n);n>s;)o[s++]=t,t+=i;return o};var N=function(){};k.bind=function(t,e){var i,n;if(t.bind===x&&x)return x.apply(t,a.call(arguments,1));if(!k.isFunction(t))throw new TypeError;return i=a.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(a.call(arguments)));N.prototype=t.prototype;var s=new N;N.prototype=null;var o=t.apply(s,i.concat(a.call(arguments)));return Object(o)===o?o:s}},k.bindAll=function(t){var e=a.call(arguments,1);return 0===e.length&&(e=k.functions(t)),$(e,function(e){t[e]=k.bind(t[e],t)}),t},k.memoize=function(t,e){var i={};return e||(e=k.identity),function(){var n=e.apply(this,arguments);return k.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},k.delay=function(t,e){var i=a.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},k.defer=function(t){return k.delay.apply(k,[t,1].concat(a.call(arguments,1)))},k.throttle=function(t,e){var i,n,s,o,r=0,a=function(){r=new Date,s=null,o=t.apply(i,n)};return function(){var l=new Date,c=e-(l-r);return i=this,n=arguments,0>=c?(clearTimeout(s),s=null,r=l,o=t.apply(i,n)):s||(s=setTimeout(a,c)),o}},k.debounce=function(t,e,i){var n,s;return function(){var o=this,r=arguments,a=function(){n=null,i||(s=t.apply(o,r))},l=i&&!n;return clearTimeout(n),n=setTimeout(a,e),l&&(s=t.apply(o,r)),s}},k.once=function(t){var e=!1,i;return function(){return e?i:(e=!0,i=t.apply(this,arguments),t=null,i)}},k.wrap=function(t,e){return function(){var i=[t];return r.apply(i,arguments),e.apply(this,i)}},k.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},k.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},k.keys=w||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)k.has(t,i)&&(e[e.length]=i);return e},k.values=function(t){var e=[];for(var i in t)k.has(t,i)&&e.push(t[i]);return e},k.pairs=function(t){var e=[];for(var i in t)k.has(t,i)&&e.push([i,t[i]]);return e},k.invert=function(t){var e={};for(var i in t)k.has(t,i)&&(e[t[i]]=i);return e},k.functions=k.methods=function(t){var e=[];for(var i in t)k.isFunction(t[i])&&e.push(i);return e.sort()},k.extend=function(t){return $(a.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},k.pick=function(t){var e={},i=l.apply(n,a.call(arguments,1));return $(i,function(i){i in t&&(e[i]=t[i])}),e},k.omit=function(t){var e={},i=l.apply(n,a.call(arguments,1));for(var s in t)k.contains(i,s)||(e[s]=t[s]);return e},k.defaults=function(t){return $(a.call(arguments,1),function(e){if(e)for(var i in e)null==t[i]&&(t[i]=e[i])}),t},k.clone=function(t){return k.isObject(t)?k.isArray(t)?t.slice():k.extend({},t):t},k.tap=function(t,e){return e(t),t};var j=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof k&&(t=t._wrapped),e instanceof k&&(e=e._wrapped);var s=c.call(t);if(s!=c.call(e))return!1;switch(s){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=i.length;o--;)if(i[o]==t)return n[o]==e;i.push(t),n.push(e);var r=0,a=!0;if("[object Array]"==s){if(r=t.length,a=r==e.length)for(;r--&&(a=j(t[r],e[r],i,n)););}else{var l=t.constructor,u=e.constructor;if(l!==u&&!(k.isFunction(l)&&l instanceof l&&k.isFunction(u)&&u instanceof u))return!1;for(var d in t)if(k.has(t,d)&&(r++,!(a=k.has(e,d)&&j(t[d],e[d],i,n))))break;if(a){for(d in e)if(k.has(e,d)&&!r--)break;a=!r}}return i.pop(),n.pop(),a};k.isEqual=function(t,e){return j(t,e,[],[])},k.isEmpty=function(t){if(null==t)return!0;if(k.isArray(t)||k.isString(t))return 0===t.length;for(var e in t)if(k.has(t,e))return!1;return!0},k.isElement=function(t){return!(!t||1!==t.nodeType)},k.isArray=C||function(t){return"[object Array]"==c.call(t)},k.isObject=function(t){return t===Object(t)},$(["Arguments","Function","String","Number","Date","RegExp"],function(t){k["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),k.isArguments(arguments)||(k.isArguments=function(t){return!(!t||!k.has(t,"callee"))}),"function"!=typeof/./&&(k.isFunction=function(t){return"function"==typeof t}),k.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},k.isNaN=function(t){return k.isNumber(t)&&t!=+t},k.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},k.isNull=function(t){return null===t},k.isUndefined=function(t){return void 0===t},k.has=function(t,e){return u.call(t,e)},k.noConflict=function(){return t._=e,this},k.identity=function(t){return t},k.times=function(t,e,i){for(var n=Array(t),s=0;t>s;s++)n[s]=e.call(i,s);return n},k.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var L={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};L.unescape=k.invert(L.escape);var A={escape:new RegExp("["+k.keys(L.escape).join("")+"]","g"),unescape:new RegExp("("+k.keys(L.unescape).join("|")+")","g")};k.each(["escape","unescape"],function(t){k[t]=function(e){return null==e?"":(""+e).replace(A[t],function(e){return L[t][e]})}}),k.result=function(t,e){if(null==t)return null;var i=t[e];return k.isFunction(i)?i.call(t):i},k.mixin=function(t){$(k.functions(t),function(e){var i=k[e]=t[e];k.prototype[e]=function(){var t=[this._wrapped];return r.apply(t,arguments),P.call(this,i.apply(k,t))}})};var D=0;k.uniqueId=function(t){var e=++D+"";return t?t+e:e},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var O=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\t|\u2028|\u2029/g;k.template=function(t,e,i){var n;i=k.defaults({},i,k.templateSettings);var s=new RegExp([(i.escape||O).source,(i.interpolate||O).source,(i.evaluate||O).source].join("|")+"|$","g"),o=0,r="__p+='";t.replace(s,function(e,i,n,s,a){return r+=t.slice(o,a).replace(H,function(t){return"\\"+B[t]}),i&&(r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(r+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),s&&(r+="';\n"+s+"\n__p+='"),o=a+e.length,e}),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{n=new Function(i.variable||"obj","_",r)}catch(a){throw a.source=r,a}if(e)return n(e,k);var l=function(t){return n.call(this,t,k)};return l.source="function("+(i.variable||"obj")+"){\n"+r+"}",l},k.chain=function(t){return k(t).chain()};var P=function(t){return this._chain?k(t).chain():t};k.mixin(k),$(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=n[t];k.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],P.call(this,i)}}),$(["concat","join","slice"],function(t){var e=n[t];k.prototype[t]=function(){return P.call(this,e.apply(this._wrapped,arguments))}}),k.extend(k.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(){var t=this,e=t.Backbone,i=[],n=i.push,s=i.slice,o=i.splice,r;r="undefined"!=typeof exports?exports:t.Backbone={},r.VERSION="1.0.0";var a=t._;a||"undefined"==typeof require||(a=require("underscore")),r.$=t.jQuery||t.Zepto||t.ender||t.$,r.noConflict=function(){return t.Backbone=e,this},r.emulateHTTP=!1,r.emulateJSON=!1;var l=r.Events={on:function(t,e,i){if(!u(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,i){if(!u(this,"once",t,[e,i])||!e)return this;var n=this,s=a.once(function(){n.off(t,s),e.apply(this,arguments)});return s._callback=e,this.on(t,s,i)},off:function(t,e,i){var n,s,o,r,l,c,d,h;if(!this._events||!u(this,"off",t,[e,i]))return this;if(!t&&!e&&!i)return this._events={},this;for(r=t?[t]:a.keys(this._events),l=0,c=r.length;c>l;l++)if(t=r[l],o=this._events[t]){if(this._events[t]=n=[],e||i)for(d=0,h=o.length;h>d;d++)s=o[d],(e&&e!==s.callback&&e!==s.callback._callback||i&&i!==s.context)&&n.push(s);n.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!u(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&d(i,e),n&&d(n,arguments),this},stopListening:function(t,e,i){var n=this._listeners;if(!n)return this;var s=!e&&!i;"object"==typeof e&&(i=this),t&&((n={})[t._listenerId]=t);for(var o in n)n[o].off(e,i,this),s&&delete this._listeners[o];return this}},c=/\s+/,u=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(c.test(i)){for(var o=i.split(c),r=0,a=o.length;a>r;r++)t[e].apply(t,[o[r]].concat(n));return!1}return!0},d=function(t,e){var i,n=-1,s=t.length,o=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r,a);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e)}},h={listenTo:"on",listenToOnce:"once"};a.each(h,function(t,e){l[e]=function(e,i,n){var s=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=a.uniqueId("l"));return s[o]=e,"object"==typeof i&&(n=this),e[t](i,n,this),this}}),l.bind=l.on,l.unbind=l.off,a.extend(r,l);var g=r.Model=function(t,e){var i,n=t||{};e||(e={}),this.cid=a.uniqueId("c"),this.attributes={},a.extend(this,a.pick(e,p)),e.parse&&(n=this.parse(n,e)||{}),(i=a.result(this,"defaults"))&&(n=a.defaults({},n,i)),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)},p=["url","urlRoot","collection"];a.extend(g.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return a.clone(this.attributes)},sync:function(){return r.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return a.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,i){var n,s,o,r,l,c,u,d;if(null==t)return this;if("object"==typeof t?(s=t,i=e):(s={})[t]=e,i||(i={}),!this._validate(s,i))return!1;o=i.unset,l=i.silent,r=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=a.clone(this.attributes),this.changed={}),d=this.attributes,u=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(n in s)e=s[n],a.isEqual(d[n],e)||r.push(n),a.isEqual(u[n],e)?delete this.changed[n]:this.changed[n]=e,o?delete d[n]:d[n]=e;if(!l){r.length&&(this._pending=!0);for(var h=0,g=r.length;g>h;h++)this.trigger("change:"+r[h],this,d[r[h]],i)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,a.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var i in this.attributes)e[i]=void 0;return this.set(e,a.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!a.isEmpty(this.changed):a.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?a.clone(this.changed):!1;var e,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var s in t)a.isEqual(n[s],e=t[s])||((i||(i={}))[s]=e);return i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return a.clone(this._previousAttributes)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,i=t.success;return t.success=function(n){return e.set(e.parse(n,t),t)?(i&&i(e,n,t),void e.trigger("sync",e,n,t)):!1},H(this,t),this.sync("read",this,t)},save:function(t,e,i){var n,s,o,r=this.attributes;if(null==t||"object"==typeof t?(n=t,i=e):(n={})[t]=e,!(!n||i&&i.wait||this.set(n,i)))return!1;if(i=a.extend({validate:!0},i),!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=a.extend({},r,n)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(t){l.attributes=r;var e=l.parse(t,i);return i.wait&&(e=a.extend(n||{},e)),a.isObject(e)&&!l.set(e,i)?!1:(c&&c(l,t,i),void l.trigger("sync",l,t,i))},H(this,i),s=this.isNew()?"create":i.patch?"patch":"update","patch"===s&&(i.attrs=n),o=this.sync(s,this,i),n&&i.wait&&(this.attributes=r),o},destroy:function(t){t=t?a.clone(t):{};var e=this,i=t.success,n=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(s){(t.wait||e.isNew())&&n(),i&&i(e,s,t),e.isNew()||e.trigger("sync",e,s,t)},this.isNew())return t.success(),!1;H(this,t);var s=this.sync("delete",this,t);return t.wait||n(),s},url:function(){var t=a.result(this,"urlRoot")||a.result(this.collection,"url")||B();return this.isNew()?t:t+("/"===t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(t){return this._validate({},a.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=a.extend({},this.attributes,t);var i=this.validationError=this.validate(t,e)||null;return i?(this.trigger("invalid",this,i,a.extend(e||{},{validationError:i})),!1):!0}});var f=["keys","values","pairs","invert","pick","omit"];a.each(f,function(t){g.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.attributes),a[t].apply(a,e)}});var m=r.Collection=function(t,e){e||(e={}),e.url&&(this.url=e.url),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,a.extend({silent:!0},e))},v={add:!0,remove:!0,merge:!0},b={add:!0,merge:!1,remove:!1};a.extend(m.prototype,l,{model:g,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return r.sync.apply(this,arguments)},add:function(t,e){return this.set(t,a.defaults(e||{},b))},remove:function(t,e){t=a.isArray(t)?t.slice():[t],e||(e={});var i,n,s,o;for(i=0,n=t.length;n>i;i++)o=this.get(t[i]),o&&(delete this._byId[o.id],delete this._byId[o.cid],s=this.indexOf(o),this.models.splice(s,1),this.length--,e.silent||(e.index=s,o.trigger("remove",o,this,e)),this._removeReference(o));return this},set:function(t,e){e=a.defaults(e||{},v),e.parse&&(t=this.parse(t,e)),a.isArray(t)||(t=t?[t]:[]);var i,s,r,l,c,u,d=e.at,h=this.comparator&&null==d&&e.sort!==!1,g=a.isString(this.comparator)?this.comparator:null,p=[],f=[],m={};for(i=0,s=t.length;s>i;i++)(r=this._prepareModel(t[i],e))&&((c=this.get(r))?(e.remove&&(m[c.cid]=!0),e.merge&&(c.set(r.attributes,e),h&&!u&&c.hasChanged(g)&&(u=!0))):e.add&&(p.push(r),r.on("all",this._onModelEvent,this),this._byId[r.cid]=r,null!=r.id&&(this._byId[r.id]=r)));if(e.remove){for(i=0,s=this.length;s>i;++i)m[(r=this.models[i]).cid]||f.push(r);f.length&&this.remove(f,e)}if(p.length&&(h&&(u=!0),this.length+=p.length,null!=d?o.apply(this.models,[d,0].concat(p)):n.apply(this.models,p)),u&&this.sort({silent:!0}),e.silent)return this;for(i=0,s=p.length;s>i;i++)(r=p[i]).trigger("add",r,this,e);return u&&this.trigger("sort",this,e),this},reset:function(t,e){e||(e={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return e.previousModels=this.models,this._reset(),this.add(t,a.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:this.length},e)),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,a.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(t,e){return this.models.slice(t,e)},get:function(t){return null==t?void 0:this._byId[null!=t.id?t.id:t.cid||t]},at:function(t){return this.models[t]},where:function(t,e){return a.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),a.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(a.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},sortedIndex:function(t,e,i){e||(e=this.comparator);var n=a.isFunction(e)?e:function(t){return t.get(e)};return a.sortedIndex(this.models,t,n,i)},pluck:function(t){return a.invoke(this.models,"get",t)},fetch:function(t){t=t?a.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,i=this;return t.success=function(n){var s=t.reset?"reset":"set";i[s](n,t),e&&e(i,n,t),i.trigger("sync",i,n,t)},H(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?a.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var i=this,n=e.success;return e.success=function(s){e.wait&&i.add(t,e),n&&n(t,s,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof g)return t.collection||(t.collection=this),t;e||(e={}),e.collection=this;var i=new this.model(t,e);return i._validate(t,e)?i:(this.trigger("invalid",this,t,e),!1)},_removeReference:function(t){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a.each(y,function(t){m.prototype[t]=function(){var e=s.call(arguments);return e.unshift(this.models),a[t].apply(a,e)}});var C=["groupBy","countBy","sortBy"];a.each(C,function(t){m.prototype[t]=function(e,i){var n=a.isFunction(e)?e:function(t){return t.get(e)};return a[t](this.models,n,i)}});var w=r.View=function(t){this.cid=a.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},x=/^(\S+)\s*(.*)$/,k=["model","collection","el","id","attributes","className","tagName","events"];a.extend(w.prototype,l,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof r.$?t:r.$(t),this.el=this.$el[0],e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=a.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var i=t[e];if(a.isFunction(i)||(i=this[t[e]]),i){var n=e.match(x),s=n[1],o=n[2];i=a.bind(i,this),s+=".delegateEvents"+this.cid,""===o?this.$el.on(s,i):this.$el.on(s,o,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_configure:function(t){this.options&&(t=a.extend({},a.result(this,"options"),t)),a.extend(this,a.pick(t,k)),this.options=t},_ensureElement:function(){if(this.el)this.setElement(a.result(this,"el"),!1);else{var t=a.extend({},a.result(this,"attributes"));this.id&&(t.id=a.result(this,"id")),this.className&&(t["class"]=a.result(this,"className"));var e=r.$("<"+a.result(this,"tagName")+">").attr(t);this.setElement(e,!1)}}}),r.sync=function(t,e,i){var n=$[t];a.defaults(i||(i={}),{emulateHTTP:r.emulateHTTP,emulateJSON:r.emulateJSON});var s={type:n,dataType:"json"};if(i.url||(s.url=a.result(e,"url")||B()),null!=i.data||!e||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||e.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===n||"DELETE"===n||"PATCH"===n)){s.type="POST",i.emulateJSON&&(s.data._method=n);var o=i.beforeSend;i.beforeSend=function(t){return t.setRequestHeader("X-HTTP-Method-Override",n),o?o.apply(this,arguments):void 0}}"GET"===s.type||i.emulateJSON||(s.processData=!1),"PATCH"!==s.type||!window.ActiveXObject||window.external&&window.external.msActiveXFilteringEnabled||(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=i.xhr=r.ajax(a.extend(s,i));return e.trigger("request",e,l,i),l};var $={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};r.ajax=function(){return r.$.ajax.apply(r.$,arguments)};var S=r.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},E=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,_=/\*\w+/g,I=/[\-{}\[\]+?.,\\\^$|#\s]/g;a.extend(S.prototype,l,{initialize:function(){},route:function(t,e,i){a.isRegExp(t)||(t=this._routeToRegExp(t)),a.isFunction(e)&&(i=e,e=""),i||(i=this[e]);var n=this;return r.history.route(t,function(s){var o=n._extractParameters(t,s);i&&i.apply(n,o),n.trigger.apply(n,["route:"+e].concat(o)),n.trigger("route",e,o),r.history.trigger("route",n,e,o)}),this},navigate:function(t,e){return r.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=a.result(this,"routes");for(var t,e=a.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(I,"\\$&").replace(E,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/]+)"}).replace(_,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){var i=t.exec(e).slice(1);return a.map(i,function(t){return t?decodeURIComponent(t):null})}});var N=r.History=function(){this.handlers=[],a.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},j=/^[#\/]|\s+$/g,L=/^\/+|\/+$/g,A=/msie [\w.]+/,D=/\/$/;N.started=!1,a.extend(N.prototype,l,{interval:50,getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var i=this.root.replace(D,"");t.indexOf(i)||(t=t.substr(i.length))}else t=this.getHash();return t.replace(j,"")},start:function(t){if(N.started)throw new Error("Backbone.history has already been started");N.started=!0,this.options=a.extend({},{root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var e=this.getFragment(),i=document.documentMode,n=A.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);this.root=("/"+this.root+"/").replace(L,"/"),n&&this._wantsHashChange&&(this.iframe=r.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?r.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!n?r.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),
this.fragment=e;var s=this.location,o=s.pathname.replace(/[^\/]$/,"$&/")===this.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&s.hash&&(this.fragment=this.getHash().replace(j,""),this.history.replaceState({},document.title,this.root+this.fragment+s.search)),this.options.silent?void 0:this.loadUrl())},stop:function(){r.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),N.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i=a.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0});return i},navigate:function(t,e){if(!N.started)return!1;if(e&&e!==!0||(e={trigger:e}),t=this.getFragment(t||""),this.fragment!==t){this.fragment=t;var i=this.root+t;if(this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}e.trigger&&this.loadUrl(t)}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),r.history=new N;var O=function(t,e){var i=this,n;n=t&&a.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},a.extend(n,i,e);var s=function(){this.constructor=n};return s.prototype=i.prototype,n.prototype=new s,t&&a.extend(n.prototype,t),n.__super__=i.prototype,n};g.extend=m.extend=S.extend=w.extend=N.extend=O;var B=function(){throw new Error('A "url" property or function must be specified')},H=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}}}.call(this),function(t,e){return t=t||global,t.EVENTS_NO_REQUIRE?void(t.Events=e()):void("object"==typeof exports?module.exports.Events=e():"function"==typeof define&&define.amd?define(function(){return{Events:e()}}):t.Events=e())}(this,function(){function t(t,e){return t.indexOf?t.indexOf(e):String.prototype.indexOf(t,e)}function e(t){if(m.strict)throw new Error(t);"console"in window&&(console.error?console.error(t):console.warn?console.warn(t):console.log(t))}function i(t){return t.replace(/^on([A-Z])/,function(t,e){return e.toLowerCase()})}function n(t){var i=t.match(u);return t.split(":").length>2&&e("Library does not support multiple pseudo events"),{name:i[1],pseudo:i[2],args:i[3]}}function s(t){return n(i(t))}function o(t,e,i,n){var s;return c?(s=document.createEvent("UIEvents"),s.initUIEvent(t,n,!0,window,1)):s={},s.dispatcher=e,s.args=i,s.object_event=!0,s}function r(e,i,n){c?e.$event_element.addEventListener(i,n,!1):e.$events[i]?-1==t(e.$events[i],n)&&e.$events[i].push(n):e.$events[i]=[n]}function a(t,e,i){var n,s;if(c)t.$event_element.dispatchEvent(i);else{if(!t.$events[e])return;for(n=0;s=t.$events[e][n];n++)s.apply(null,[i])}}function l(e,i,n){var s;if(c)e.$event_element.removeEventListener(i,n,!1);else{if(!e.$events[i])return;if(s=t(e.$events[i],n),0>s)return;e.$events[i].splice(s,1)}}var c=!1,u=/([^:]+)(?:\:([^(]*)(?:\((.*)\))?)?/,d,h,g,p,f,m,v;try{c=document&&"addEventListener"in document}catch(b){}return m=function y(t,e){var i=this,n,s="$event_element $latched $events $once addEvent addEvents fireEvent removeEvent addEventOnce fireLatchedEvent".split(" ");c?this.$event_element=t||document.createElement("events"):this.$events={},this.$has_events=!0,this.$latched={},this.$once={},this.addEvent=d,this.addEvents=h,this.fireEvent=g,this.removeEvent=p,this.addEventOnce=f,this.fireLatchedEvent=v;for(n in y.aliases)this[n]=this[y.aliases[n]],s.push(n);e||this.addEvent("destroy:delay(0)",function(){var t,e;if(!i.$no_ev_destroy){for(t=0;e=s[t];t++)i[e]=null;i.$events_destroyed=!0}})},m.removeOn=i,m.getPseudos=n,m.processType=s,m.createEvent=o,m.strict=!1,m.aliases={on:"addEvent",addListener:"addEvent",once:"addEventOnce",removeListener:"removeEvent",off:"removeEvent",emit:"fireEvent"},m.Pseudoes={once:{addEvent:function(t,e){return this.addEventOnce(t,e)}},latched:{fireEvent:function(t,e){return this.fireLatchedEvent(t,e)}},times:{addEvent:function(t,e,i){var n=0,s=this;this.addEvent(t,function o(){e.apply(null,arguments),n+=1,n==i&&s.removeEvent(t,o)})}},delay:{addEvent:function(t,e,i){this.addEvent(t,function(){setTimeout(e,i)})},fireEvent:function(t,e,i){var n=this;setTimeout(function(){n.fireEvent(t,e)},i)}}},d=function C(t,e){if(this.$events_destroyed)return this;var i=s(t),n=m.Pseudoes[i.pseudo]&&m.Pseudoes[i.pseudo].addEvent,a=this.$latched[i.name]&&this.$latched[i.name].args,l;return n?n.apply(this,[i.name,e,i.args]):(r(this,i.name,e),this.$latched&&this.$latched[i.name]&&(l=o(i.name,this,a),e.apply(null,[l])),this)},h=function w(t){if(this.$events_destroyed)return this;var e;for(e in t)t.hasOwnProperty(e)&&this.addEvent(e,t[e]);return this},g=function x(t,e,i){if(this.$events_destroyed)return this;var n=s(t),r=m.Pseudoes[n.pseudo]&&m.Pseudoes[n.pseudo].fireEvent,l,c,u,d;if(null==i&&(i=!0),r)return r.call(this,n.name,e);if(u=this.$once[n.name],this.$once[n.name]=null,l=o(n.name,this,e,i),a(this,n.name,l),!u)return this;for(;c=u.pop();)this.removeEvent(n.name,c,!0);return this},p=function k(e,i,n){if(this.$events_destroyed)return this;var o=s(e),r;return l(this,o.name,i),!n&&this.$once[o.name]&&(r=t(this.$once[o.name],i))>-1&&this.$once[o.name].splice(r,1),this},f=function $(e,i){if(this.$events_destroyed)return this;var n=this,o=s(e);return this.$once[o.name]||(this.$once[o.name]=[]),-1==t(this.$once[o.name],i)&&this.$once[o.name].push(i),this.addEvent(o.name,i)},v=function S(t,e){return this.$events_destroyed?this:(this.$latched||(this.$latched={}),this.$latched[t]={args:e},this.fireEvent(t,e),this)},m.addEvent=d,m.addEvents=h,m.addEventOnce=f,m.fireEvent=g,m.fireLatchedEvent=v,m.removeEvent=p,m.processType=s,m}),function(t){function e(t,e){this.$parent_stack||(this.$parent_stack={});var i=this.$parent_stack[t];this.$parent_stack[t]=i?i.constructor?i.constructor.__super__:null:this.constructor.__super__;var n=this.$parent_stack[t][t].apply(this,e||[]);return this.$parent_stack[t]=i,n}var i={},n=Backbone.View.extend({mixins:null,do_render:!0,_namespace:"",initialize:function(){this.mixins&&this._applyMixins(),this._namespace&&this._attachNamespace(),!this.$generated&&this.do_render&&this.render(),this.init&&this.init(),this.$attached||this.addListeners()},$parent:e,render:function(){this.$generated=!0},addListeners:function(){return this.$attached=!0,this.Eggshell&&this.Eggshell.on("destroy",this.destroy.bind(this)),this},_applyMixins:function(){var t,e;for(t=0;e=this.mixins[t];t++)i[e]?i[e].call(this):e.call?e.call(this):console.warn("Trying to apply undefined mixin: "+e)},_attachNamespace:function(){function e(){}function i(i){if(!o[i]){var n=t.camelCase(i.replace(/ /g,"-")),s=a[n]?a[n].bind(a):e;r.on(i,s),o[i]=!0}}function n(t){var e,n;if(t instanceof Array)for(n=0;e=t[n];n++)i(e);else for(e in t)i(e)}var s=Eggshell.getDefinition(this._namespace),o={},r=this.Eggshell,a=this;s&&s.config.inputs&&n(s.config.inputs)},destroy:function(){}});n.registerMixin=function(t,e){i[t]=e},C.define=function(t,e,i){return i._namespace=t,Eggshell.define(t,e,n.extend(i)),t},n.$parent=e,n.mixins=i,C.CheggView=n}(window.Zepto||window.jQuery),function(){C.CheggView.registerMixin("Attacher",function(){function t(){var t,i;for(t=0;i=e[t];t++)i.fn?i.target.off(i.name,i.ns,i.fn):i.target.off(i.name,i.ns);e=null}var e=[];this.attach=function i(t,n,s,o){return t.on||(t=$(t)),o?t.on(n,s,o):t.on(n,s),e.push({target:t,name:n,ns:s,fn:o}),this},this.Eggshell&&this.Eggshell.on("destroy",t),this.dettach=t})}(window.Zepto||window.jQuery),function(){C.CheggView.registerMixin("$parent",function(){this.$parent=C.CheggView.$parent})}(),C.CheggView.registerMixin("Options",function(){this.setOptions=function(t){function e(t,i){var n;for(n in t)i.hasOwnProperty(n)&&t.hasOwnProperty(n)&&("object"==typeof i[n]?e(t[n],i[n]):t[n]=i[n])}return e(this.options,t),this}}),C.CheggView.registerMixin("Generator",function(){var t=this["generator:elements"],e=_.result(this,"generator:getData"),i=this["generator:template"],n="function"==typeof i?i.call(this,e):i,s;if(n&&(this.element=$(n)),t&&this.element){this.elements={};for(s in t)this.elements[s]=$(t[s],this.element)}this.Eggshell&&this.Eggshell.on("destroy",function o(){this.Eggshell.off("destroy",o),this.element&&this.element.remove(),this.elements={}}.bind(this))}),C.CheggView.registerMixin("Bind",function(){var t,e;if(this.bound=function(t){if(!this.bound[t])try{this.bound[t]=this[t].bind(this)}catch(e){return void utils.warn("Trying to bind undefined method "+t)}return this.bound[t]},this.bind)for(t=0;e=this.bind[t];t++)this.bound(e)}),C.CheggView.registerMixin("Validator",function(){this.defaultOptions={onkeyup:!1,onfocusout:!1,onclick:!1,onsubmit:!1};var t=_.result(this,"validator:element")||this.element;this.opt=this["validator:options"],this.opt=$.extend(this.defaultOptions,this.opt),this.validator=t.validate(this.opt),this.setElementRules=function(t,e){t.rules("add",e)},this.showErrors=function(t){this.validator.showErrors(t)},this.runValidator=function(){return t.valid()},this.Eggshell&&this.Eggshell.on("destroy",function e(){this.Eggshell.off("destroy",e)}.bind(this))}),Eggshell.define("C.report.GA",{inputs:["submit custom command","report custom event","report","register"],outputs:["custom command sent","custom report sent"],singleton:!0,immueToDestroyAll:!0},function(t){var e=t?t:[],i=Eggshell.find(this),n=!1,s=[],o=setInterval($.proxy(function(){if("undefined"==typeof ga)n=!1;else{n=!0,clearInterval(o);for(var t=0,e=s.length;e>t;t++)r(s[t][0],s[t][1]);s=[]}},this),1e3),r=function(t,e){if(!n)return s.push([null,e]),"";var o=_.isArray(e)?e:[e];ga.apply(null,o);var r="event"==t?"custom report sent":"custom command sent",a=$.proxy(function(){this.trigger(r,e)},i);ga(a)},a=function(t,e){r(null,e)},l=function(t,e){r("event",["send","event",e.page,e.section,e.link])},c=function(t){if("register"!==t.action){var i=t.channel,n=t.action,s=null;if(e&&e[i]&&e[i][n])return s=e[i][n],void r("event",["send","event",s.page,s.section,s.link]);var o=Eggshell.find(i);return o&&o.getClass()&&(i=o.getClass(),e&&e[i]&&e[i][n])?(s=e[i][n],void r("event",["send","event",s.page,s.section,s.link])):void 0}},u=function(t,i){var n=i;if(n)for(var s in n){var o=n[s];for(var r in o){var a=o[r];e[s]||(e[s]={}),e[s][r]=a}}};return Eggshell.on("*","*",c,this),Eggshell.find(this).on("submit custom command",a).on("report",c).on("report custom event",l).on("register",u),{}}),Eggshell.module("Factory",["Logger","DefinitionRegistry","Api"],function(t,e,i){Eggshell.loader.setFactory({escapeCss:function(t){return t=t.replace(/[!\"#$%&'\(\)\*\+,\.\/:;<=>\?\@\[\\\]\^`\{\|\}~]/g,"-")},instantiate:function(t,i,n,s){"object"!=typeof s&&(s={});var o=e.get(i);s.createSafeDomContainer!==!1&&s.newNode!==!1&&(null===o||o&&null===o.config||o&&o.config&&o.config.newNode!==!1)?(s.el||(s.el=$("body")),s.el.jquery||(s.el=$(s.el)),s.el.jquery&&(s.el=$.extend({},s.el)),s.el.attr("id")!=this.escapeCss(t)&&(s.el=$("<div/>").appendTo(s.el)),s.el.attr("id",this.escapeCss(t)),s.el.addClass(this.escapeCss(i)),s.className&&s.el.addClass(s.className)):s.el&&(s.el.jquery||(s.el=$(s.el)),s.el.attr("id",this.escapeCss(t)),s.el.addClass(this.escapeCss(i)),s.className&&s.el.addClass(s.className)),s.shell&&s.shell;var r=new n(s);return r&&r.Eggshell&&(r.Eggshell.listen("show",function(){this.$el&&this.$el.show()}),r.Eggshell.listen("hide",function(){this.$el&&this.$el.hide()}),r.Eggshell.on("track impression",function(){this.component.activityTracking={},this.component.activityTracking.$el=this.el,this.component.activityTracking.isSeen=!1,this.component.activityTracking.scrollDetector=Eggshell.create("C.Eggshell.window.scroll.tracker"),this.component.activityTracking.scrollDetected=$.proxy(function(){this.el.height()>0&&this.el.offset().top+Math.floor(this.el.height()/2)>=window.pageYOffset&&this.el.offset().top+Math.floor(this.el.height()/2)<window.pageYOffset+$(window).height()&&(this.component.activityTracking.scrollDetector.off("scrolled",this.component.activityTracking.scrollDetected,this),Eggshell.find(this.component).trigger("impression fired"))},this),this.component.activityTracking.scrollDetector.on("scrolled",this.component.activityTracking.scrollDetected,this),setTimeout(this.component.activityTracking.scrollDetected,1)},{component:r,el:s.el})),r},destroy:function(t,e){e.unbind&&e.unbind(),e.model&&e.model.unbind&&(e.model.unbind(),delete this.model),e.collection&&e.collection.unbind&&(e.collection.unbind(),delete this.collection),e.remove&&e.remove(),this.$el&&delete this.$el,this.el&&delete this.el,$("#"+this.escapeCss(t)).remove()}})}),Eggshell.define("C.eggshell.component.ajax.client",{inputs:["push","flush all"],outputs:[],singleton:!0},function(){var t=this,e={},i={},n=function(t){for(var i=0;i<e[t].length;i++)delete e[t][i];e[t]=[]},s=function(t){if(!t)throw"Empty payload.";if("string"!=typeof t.url||!t.url)throw"Invalid URL."},o=function(t){var e="";if(t.type&&(e=t.type),e+=t.url,"?"!=e[e.length-1]&&(e+="?"),t.data)for(var i in t.data)e+=i+"="+encodeURIComponent(t.data[i])+"&";return e},r=function(t,e,i){var n={request:t,response:e,arguments:i};return n},a=function(i,n,s,o){for(var a=0;a<e[i].length;a++){var l=e[i][a],c=r(l,s,o);t.Eggshell.trigger(n,c)}},l=function(l,c){var u=c;s(u),"undefined"==typeof u.cache&&(u.cache=!0);var d=o(u);if(e[d]||(e[d]=[]),e[d].push(u),!(u.cache&&e[d].length>1)){if(u.cache&&i[d])return a.call(t,d,"success",i[d].response,[i[d].response]),a.call(t,d,"ready",i[d].response,[i[d].response]),void n(d);var h=function(){},g=$.extend({},u,{done:h,success:h,fail:h,error:h,always:h,complete:h}),p=$.ajax($.extend({},g,{context:this}));p.done(function(){a.call(t,d,"success",arguments[0],arguments),a.call(t,d,"ready",arguments[0],arguments),n(d),u.cache&&(i[d]=r(u,arguments[0],arguments))}),p.fail(function(e,i,s){a.call(t,d,"error",null,arguments),a.call(t,d,"ready",null,arguments),n(d)})}};t.Eggshell.listen("ajax",l),t.Eggshell.listen("push",function(t,e){if(!e)throw"Invalid payload";if(!e.settings)throw"Invalid ajax settings";if(!e.response)throw"Invalid ajax response";var n=e.settings,a=e.response;s(n);var l=o(n);i[l]=r(n,a,null)}),t.Eggshell.listen("flush all",function(t,e){i={}})}),$.cjax=function(){var t=Eggshell.create("C.eggshell.component.ajax.client");return Eggshell.immuneToDestroyAll(t),Eggshell.input(t,"success",function(t,e){var i=e.request,n=i.context;i.done?i.done.apply(n,e.arguments):i.success&&i.success.apply(n,e.arguments)}),Eggshell.input(t,"error",function(t,e){var i=e.request,n=i.context;i.fail?i.fail.apply(n,e.arguments):i.error&&i.error.apply(n,e.arguments)}),Eggshell.input(t,"ready",function(t,e){var i=e.request,n=i.context;i.always?i.always.apply(n,e.arguments):i.complete&&i.complete.apply(n,e.arguments)}),function(){var e={};1==arguments.length?"string"==typeof arguments[0]?e.url=arguments[0]:e=arguments[0]:2==arguments.length&&(e=arguments[1],e.url=arguments[0]),e.context||(e.context=this),Eggshell.trigger(t,"ajax",e)}}(),Eggshell.define("C.Eggshell.window.scroll.tracker",{outputs:["scrolled"],singleton:!0},function(){$(window).scroll($.proxy(function(){this.Eggshell.trigger("scrolled")},this))}),Eggshell.define("C.common.tracking",{inputs:{"enable automatic tracking":{},"disable automatic tracking":{},"push class matcher":{payload:"string"},"set page information":{payload:{page:{name:"string",namespace:"string"}}}},singleton:!0,immueToDestroyAll:!0},Backbone.Model.extend({initialize:function(){this.reset(),Eggshell.find(this).on("reset",this.reset).on("push class matcher",this.pushClassMatcher,this).on("set page information",this.setPageInfo).on("enable automatic tracking",this.enable).on("disable automatic tracking",this.disable),Eggshell.on("*","*",this.track,this)},reset:function(){this.clear(),this.set({enabled:!0,"class":[]})},pushClassMatcher:function(t,e){var i=this.get("class");i.push(e),this.set("class",i)},setPageInfo:function(t,e){this.set("page",e)},enable:function(){this.set("enabled",!0)},disable:function(){this.set("enabled",!1)},track:function(t,e){if(this.get("enabled")){var i=t.action;if(i.indexOf("clicked")>=0||i.indexOf("focused")>=0||i.indexOf("blurred")>=0){var n=t.namespace;if(n)for(var s=t.namespace,o=Eggshell.shell(s),r=o.getConstructorNamespace(),a=this.get("class"),l=0;l<a.length;l++)if(r.indexOf(a[l])>=0){r=r===a[l]?r.substr(r.lastIndexOf(".")+1):r.replace(a[l]+".",""),r=r.replace(/\./g," "),r=r.charAt(0).toUpperCase()+r.slice(1);var c=this.get("page")&&this.get("page").name?this.get("page").name:$("title").html(),u=r,d=i;Eggshell.create("C.report.GA").trigger("report custom event",{page:c,section:u,link:d});break}}}}})),function(t,e){var n=function(){this.init=function(){"undefined"==typeof t.digitalData&&(t.digitalData={})},this.setData=function(e,i){function n(e,i){var n,s=e.split("."),o=t.digitalData,r,a;for(n=0;n<s.length;n++){var l=s[n];r=o,a=l,o[l]?"object"==typeof o[l]&&(o=o[l]):o=o[l]={}}return void 0!==i?r[a]=i:delete r[a],t.digitalData}function s(t){try{t=JSON.parse(t)}catch(e){}return t}e&&(arguments.length>1?n(e,s(i)):t.digitalData=s(e))},this.removeKey=function(t){this.setData(t,void 0)},this.track=function(t,e){if(t){try{t=JSON.parse(t)}catch(n){"string"==typeof t&&(t=[t])}if("undefined"!=typeof _satellite)for(i=0;i<t.length;i++)_satellite.track(t[i])}},this.log=function(t,e){"undefined"!=typeof _satellite&&_satellite.notify(t,e)},this.init()};e.adobeAnalytics=new n}(window,C),C.resource||(C.resource=function(){var t=function(t,e,i){if(!t||"string"!=typeof t)throw"Invalid language";if(!e||"string"!=typeof e)throw"Invalid country";i||(i=""),this.toString=function(){var n=t.toLowerCase()+"-"+e.toUpperCase();return i&&(n+="-"+i),n}},e=function(){var t={};this.add=function(e,i){if(!e||"string"!=typeof e)throw"Invalid key";if(!i||"string"!=typeof i)throw"Invalid message";t[e]=i},this.remove=function(e){if(!e||"string"!=typeof e)throw"Invalid key";delete t[e]},this.fetch=function(e){if(!e||"string"!=typeof e)throw"Invalid key";return t[e]},this.fetchAll=function(){return t}},i=!1,n=new t("en","US"),s={},o=function(t){i=!!t},r=function(e){if(!e instanceof t)throw"Invalid locale";n=e,i&&console.log("default locale registered",e)},a=function(){return n},l=function(){var t,n,o,r=null;if(1!=arguments.length||"object"!=typeof arguments[0])if(2!=arguments.length||"object"!=typeof arguments[1]){if(2==arguments.length)t=a(),n=arguments[0],o=arguments[1];else{if(3!=arguments.length)throw"Invalid arguments";t=arguments[0],n=arguments[1],o=arguments[2]}if(!t)throw"Invalid locale";if(!n||"string"!=typeof n)throw"Invalid key";if(!o||"string"!=typeof o)throw"Invalid message";s[t.toString()]||(s[t.toString()]=new e),s[t.toString()].add(n,o),i&&console.log("message added",t.toString(),n,o)}else{if(t=arguments[0],!t)throw"Invalid locale";for(var n in arguments[1]){var o=arguments[1][n];l(t,n,o)}}else for(var n in arguments[0]){var o=arguments[0][n];l(n,o)}},c=function(){var e,n,o=null,r=[];if(1==arguments.length)e=a(),n=arguments[0];else if(2==arguments.length)arguments[0]instanceof t?(e=arguments[0],n=arguments[1]):(e=a(),n=arguments[0],r=arguments[1]);else{if(3!=arguments.length)throw"Invalid arguments";e=arguments[0],n=arguments[1],r=arguments[2]}if(!e)throw"Invalid locale";if(!n||"string"!=typeof n)throw"Invalid key";return s[e.toString()]&&(o=s[e.toString()].fetch(n)),r&&_.each(r,function(t,e){o=o.replace("{"+e+"}",t)},this),i&&console.log("message fetched",e.toString(),n,o),o},u=function(){var t=a();return 1==arguments.length&&(t=arguments[0]),s[t.toString()]?s[t.toString()].fetchAll():{}};return{Locale:t,setDebug:o,setDefaultLocale:r,getDefaultLocale:a,add:l,fetch:c,toJSON:u}}()),function(t){t=t||{};for(var e=["debug","info","warn","error","assert","clear","dir","dirxml","trace","group","groupCollapsed","groupEnd","time","timeEnd","profile","profileEnd","count","exception","table"],i=0;i<e.length;i++)t[e[i]]=t[e[i]]||function(){};var n=C.utility.getParams();for(var s in n)"profile"==s&&(C("global").profile=1);C("global").profile&&console.profile("Global package profiler")}(window.console),C("support"),C.support.touch="ontouchstart"in document.documentElement,C.support.placeholder=C.utility.attrSupportedByEl("input","placeholder"),function(){var t="rgba(1,1,1,0.5)",e=document.createElement("p"),i;try{e.style.color=t}catch(n){}C.support.rgba=/^rgba/.test(e.style.color),e=null,C.support.util={moved:!1,slideRight:!1,slideLeft:!1,resetTouch:function(){C.support.util.moved=!1,C.support.util.slideRight=!1,C.support.util.slideLeft=!1,C.support.util.startX=0,C.support.util.startY=0,C.support.util.diffX=0,C.support.util.diffY=0,C.support.util.changeX=0,C.support.util.changeY=0},onTouchMove:function(t){var e=t.originalEvent.touches[0];C.support.util.diffX=e.clientX-C.support.util.startX,C.support.util.diffY=e.clientY-C.support.util.startY,C.support.util.changeX=Math.abs(C.support.util.diffX),C.support.util.changeY=Math.abs(C.support.util.diffY),(C.support.util.changeX>15||C.support.util.changeY>15)&&(C.support.util.moved=!0),C.support.util.diffX>60&&C.support.util.changeY<50?C.support.util.slideRight=!0:C.support.util.diffX<-60&&C.support.util.changeY<50?C.support.util.slideLeft=!0:(C.support.util.slideRight=!1,C.support.util.slideLeft=!1)},onTouchStart:function(t){var e=t.originalEvent.touches[0];C.support.util.resetTouch(),C.support.util.startX=e.clientX,C.support.util.startY=e.clientY}},C.support.util.resetTouch(),$("body").on("touchstart",C.support.util.onTouchStart).on("touchmove",C.support.util.onTouchMove)}(),function(){var t={},e,i,n,s,o,r;for(var a in document.body.style)if(o=a.match(/^(webkit|Moz|O|ms)/),e=a,o?(s||(s=o[0]?o[0].toLowerCase():null,r=new RegExp("/-"+s+"-/","g")),i=("-"+a.replace(/([A-Z])/g,function(t){return"-"+t}).toLowerCase()).replace("--","-"),n=i.replace("-"+s+"-","")):(e=a,i=a.replace(/([A-Z])/g,function(t){return"-"+t}).toLowerCase(),n=i),!t[n]){if(n in document.body.style&&(e!=n||i!=n))continue;t[n]={css:i,js:e}}$.fn._css=$.fn.css,$.fn.css=function(){if(arguments.length&&"[object Object]"==Object.prototype.toString.call(arguments[0]))for(var e in arguments[0])"[object String]"==Object.prototype.toString.call(arguments[0][e])&&(arguments[0][e]=arguments[0][e].replace(r,"")),t[e]&&t[e].js!=e&&(arguments[0][t[e].js]=arguments[0][e],delete arguments[0][e]);return this._css.apply(this,arguments)}}(),C("dom"),C.dom.$window=$(window),C.dom.$html=$(document.documentElement),C.dom.$header=$($(".chgg-hdr").length>0?".chgg-hdr":".chg-header"),C.dom.$headerRoot=$(".chg-hdr-root"),C.dom.$content=$(".chg-content"),C.dom.$nav=$(".chg-nav"),C.dom.$body=$(document.body),C.dom.$root=$(".chg-root"),C.dom.$container=$(".chg-container"),C.dom.$navToggle=$(".icn-menu-toggle"),function(t,e){"use strict";var i=t.History=t.History||{},n=t.jQuery;if("undefined"!=typeof i.Adapter)throw new Error("History.js Adapter has already been loaded...");i.Adapter={bind:function(t,e,i){n(t).bind(e,i)},trigger:function(t,e,i){n(t).trigger(e,i)},extractEventData:function(t,i,n){var s=i&&i.originalEvent&&i.originalEvent[t]||n&&n[t]||e;return s},onDomLoad:function(t){n(t)}},"undefined"!=typeof i.init&&i.init()}(window),function(t,e){"use strict";var i=t.console||e,n=t.document,s=t.navigator,o=!1,r=t.setTimeout,a=t.clearTimeout,l=t.setInterval,c=t.clearInterval,u=t.JSON,d=t.alert,h=t.History=t.History||{},g=t.history;if(u.stringify=u.stringify||u.encode,u.parse=u.parse||u.decode,"undefined"!=typeof h.init)throw new Error("History.js Core has already been loaded...");h.init=function(){return"undefined"==typeof h.Adapter?!1:("undefined"!=typeof h.initCore&&h.initCore(),"undefined"!=typeof h.initHtml4&&h.initHtml4(),!0)},h.initCore=function(){if("undefined"!=typeof h.initCore.initialized)return!1;if(h.initCore.initialized=!0,h.options=h.options||{},h.options.hashChangeInterval=h.options.hashChangeInterval||100,h.options.safariPollInterval=h.options.safariPollInterval||500,h.options.doubleCheckInterval=h.options.doubleCheckInterval||500,h.options.storeInterval=h.options.storeInterval||1e3,h.options.busyDelay=h.options.busyDelay||250,h.options.debug=h.options.debug||!1,h.options.initialTitle=h.options.initialTitle||n.title,h.intervalList=[],h.clearAllIntervals=function(){var t,e=h.intervalList;if("undefined"!=typeof e&&null!==e){for(t=0;t<e.length;t++)c(e[t]);h.intervalList=null}},h.debug=function(){h.options.debug&&h.log.apply(h,arguments)},h.log=function(){var t=!("undefined"==typeof i||"undefined"==typeof i.log||"undefined"==typeof i.log.apply),e=n.getElementById("log"),s,o,r,a,l;for(t?(a=Array.prototype.slice.call(arguments),s=a.shift(),"undefined"!=typeof i.debug?i.debug.apply(i,[s,a]):i.log.apply(i,[s,a])):s="\n"+arguments[0]+"\n",o=1,r=arguments.length;r>o;++o){if(l=arguments[o],"object"==typeof l&&"undefined"!=typeof u)try{l=u.stringify(l)}catch(c){}s+="\n"+l+"\n"}return e?(e.value+=s+"\n-----\n",e.scrollTop=e.scrollHeight-e.clientHeight):t||d(s),!0},h.getInternetExplorerMajorVersion=function(){var t=h.getInternetExplorerMajorVersion.cached="undefined"!=typeof h.getInternetExplorerMajorVersion.cached?h.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=n.createElement("div"),i=e.getElementsByTagName("i");(e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&i[0];);return t>4?t:!1}();return t},h.isInternetExplorer=function(){var t=h.isInternetExplorer.cached="undefined"!=typeof h.isInternetExplorer.cached?h.isInternetExplorer.cached:Boolean(h.getInternetExplorerMajorVersion());return t},h.emulated={pushState:!Boolean(t.history&&t.history.pushState&&t.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(s.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(s.userAgent))),hashChange:Boolean(!("onhashchange"in t||"onhashchange"in n)||h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8)},h.enabled=!h.emulated.pushState,h.bugs={setHash:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===s.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(s.userAgent)),safariPoll:Boolean(!h.emulated.pushState&&"Apple Computer, Inc."===s.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(s.userAgent)),ieDoubleCheck:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(h.isInternetExplorer()&&h.getInternetExplorerMajorVersion()<7)},h.isEmptyObject=function(t){for(var e in t)return!1;return!0},h.cloneObject=function(t){var e,i;return t?(e=u.stringify(t),i=u.parse(e)):i={},i},h.getRootUrl=function(){var t=n.location.protocol+"//"+(n.location.hostname||n.location.host);return n.location.port&&(t+=":"+n.location.port),t+="/"},h.getBaseHref=function(){var t=n.getElementsByTagName("base"),e=null,i="";return 1===t.length&&(e=t[0],i=e.href.replace(/[^\/]+$/,"")),i=i.replace(/\/+$/,""),i&&(i+="/"),i},h.getBaseUrl=function(){var t=h.getBaseHref()||h.getBasePageUrl()||h.getRootUrl();return t},h.getPageUrl=function(){var t=h.getState(!1,!1),e=(t||{}).url||n.location.href.replace(/#.*/,""),i;return i=e.replace(/\/+$/,"").replace(/[^\/]+$/,function(t,e,i){return/\./.test(t)?t:t+"/"})},h.getBasePageUrl=function(){var t=n.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t,e,i){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/";return t},h.getFullUrl=function(t,e){var i=t,n=t.substring(0,1);return e="undefined"==typeof e?!0:e,/[a-z]+\:\/\//.test(t)||(i="/"===n?h.getRootUrl()+t.replace(/^\/+/,""):"#"===n?h.getPageUrl().replace(/#.*/,"")+t:"?"===n?h.getPageUrl().replace(/[\?#].*/,"")+t:e?h.getBaseUrl()+t.replace(/^(\.\/)+/,""):h.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),i.replace(/\#$/,"")},h.getShortUrl=function(t){var e=t,i=h.getBaseUrl(),n=h.getRootUrl();return h.emulated.pushState&&(e=e.replace(i,"")),e=e.replace(n,"/"),h.isTraditionalAnchor(e)&&(e="./"+e),e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},h.store={},h.idToState=h.idToState||{},h.stateToId=h.stateToId||{},h.urlToId=h.urlToId||{},h.storedStates=h.storedStates||[],h.savedStates=h.savedStates||[],h.normalizeStore=function(){h.store.idToState=h.store.idToState||{},h.store.urlToId=h.store.urlToId||{},h.store.stateToId=h.store.stateToId||{}},h.getState=function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!0);var i=h.getLastSavedState();return!i&&e&&(i=h.createStateObject()),t&&(i=h.cloneObject(i),i.url=i.cleanUrl||i.url),i},h.getIdByState=function(t){var e=h.extractId(t.url),i;if(!e)if(i=h.getStateString(t),"undefined"!=typeof h.stateToId[i])e=h.stateToId[i];else if("undefined"!=typeof h.store.stateToId[i])e=h.store.stateToId[i];else{for(;;)if(e=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof h.idToState[e]&&"undefined"==typeof h.store.idToState[e])break;h.stateToId[i]=e,h.idToState[e]=t}return e},h.normalizeState=function(t){var e,i;return t&&"object"==typeof t||(t={}),"undefined"!=typeof t.normalized?t:(t.data&&"object"==typeof t.data||(t.data={}),e={},e.normalized=!0,e.title=t.title||"",e.url=h.getFullUrl(h.unescapeString(t.url||n.location.href.replace(/#.*/,""))),e.hash=h.getShortUrl(e.url),e.data=h.cloneObject(t.data),e.id=h.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,i=!h.isEmptyObject(e.data),(e.title||i)&&(e.hash=h.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=h.getFullUrl(e.hash),(h.emulated.pushState||h.bugs.safariPoll)&&h.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e)},h.createStateObject=function(t,e,i){var n={data:t,title:e,url:i};return n=h.normalizeState(n)},h.getStateById=function(t){t=String(t);var i=h.idToState[t]||h.store.idToState[t]||e;return i},h.getStateString=function(t){var e,i,n;return e=h.normalizeState(t),i={data:e.data,title:t.title,url:t.url},n=u.stringify(i)},h.getStateId=function(t){var e,i;return e=h.normalizeState(t),i=e.id},h.getHashByState=function(t){var e,i;return e=h.normalizeState(t),i=e.hash},h.extractId=function(t){var e,i,n;return i=/(.*)\&_suid=([0-9]+)$/.exec(t),n=i?i[1]||t:t,e=i?String(i[2]||""):"",e||!1},h.isTraditionalAnchor=function(t){var e=!/[\/\?\.]/.test(t);return e},h.extractState=function(t,e){var i=null,n,s;return e=e||!1,n=h.extractId(t),n&&(i=h.getStateById(n)),i||(s=h.getFullUrl(t),n=h.getIdByUrl(s)||!1,n&&(i=h.getStateById(n)),i||!e||h.isTraditionalAnchor(t)||(i=h.createStateObject(null,null,s))),i},h.getIdByUrl=function(t){var i=h.urlToId[t]||h.store.urlToId[t]||e;return i},h.getLastSavedState=function(){return h.savedStates[h.savedStates.length-1]||e},h.getLastStoredState=function(){return h.storedStates[h.storedStates.length-1]||e},h.hasUrlDuplicate=function(t){var e=!1,i;return i=h.extractState(t.url),e=i&&i.id!==t.id},h.storeState=function(t){return h.urlToId[t.url]=t.id,h.storedStates.push(h.cloneObject(t)),t},h.isLastSavedState=function(t){var e=!1,i,n,s;return h.savedStates.length&&(i=t.id,n=h.getLastSavedState(),s=n.id,e=i===s),e},h.saveState=function(t){return h.isLastSavedState(t)?!1:(h.savedStates.push(h.cloneObject(t)),!0)},h.getStateByIndex=function(t){var e=null;return e="undefined"==typeof t?h.savedStates[h.savedStates.length-1]:0>t?h.savedStates[h.savedStates.length+t]:h.savedStates[t]},h.getHash=function(){var t=h.unescapeHash(n.location.hash);return t},h.unescapeString=function(t){var e=t,i;return e},h.unescapeHash=function(t){var e=h.normalizeHash(t);return e=h.unescapeString(e)},h.normalizeHash=function(t){
var e=t.replace(/[^#]*#/,"").replace(/#.*/,"");return e},h.setHash=function(t,e){var i,s,o;return e!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.setHash,args:arguments,queue:e}),!1):(i=h.escapeHash(t),h.busy(!0),s=h.extractState(t,!0),s&&!h.emulated.pushState?h.pushState(s.data,s.title,s.url,!1):n.location.hash!==i&&(h.bugs.setHash?(o=h.getPageUrl(),h.pushState(null,null,o+"#"+i,!1)):n.location.hash=i),h)},h.escapeHash=function(e){var i=h.normalizeHash(e);return i=t.escape(i),h.bugs.hashEscape||(i=i.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),i},h.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=h.unescapeHash(e)},h.setTitle=function(t){var e=t.title,i;e||(i=h.getStateByIndex(0),i&&i.url===t.url&&(e=i.title||h.options.initialTitle));try{n.getElementsByTagName("title")[0].innerHTML=e.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(s){}return n.title=e,h},h.queues=[],h.busy=function(t){if("undefined"!=typeof t?h.busy.flag=t:"undefined"==typeof h.busy.flag&&(h.busy.flag=!1),!h.busy.flag){a(h.busy.timeout);var e=function(){var t,i,n;if(!h.busy.flag)for(t=h.queues.length-1;t>=0;--t)i=h.queues[t],0!==i.length&&(n=i.shift(),h.fireQueueItem(n),h.busy.timeout=r(e,h.options.busyDelay))};h.busy.timeout=r(e,h.options.busyDelay)}return h.busy.flag},h.busy.flag=!1,h.fireQueueItem=function(t){return t.callback.apply(t.scope||h,t.args||[])},h.pushQueue=function(t){return h.queues[t.queue||0]=h.queues[t.queue||0]||[],h.queues[t.queue||0].push(t),h},h.queue=function(t,e){return"function"==typeof t&&(t={callback:t}),"undefined"!=typeof e&&(t.queue=e),h.busy()?h.pushQueue(t):h.fireQueueItem(t),h},h.clearQueue=function(){return h.busy.flag=!1,h.queues=[],h},h.stateChanged=!1,h.doubleChecker=!1,h.doubleCheckComplete=function(){return h.stateChanged=!0,h.doubleCheckClear(),h},h.doubleCheckClear=function(){return h.doubleChecker&&(a(h.doubleChecker),h.doubleChecker=!1),h},h.doubleCheck=function(t){return h.stateChanged=!1,h.doubleCheckClear(),h.bugs.ieDoubleCheck&&(h.doubleChecker=r(function(){return h.doubleCheckClear(),h.stateChanged||t(),!0},h.options.doubleCheckInterval)),h},h.safariStatePoll=function(){var e=h.extractState(n.location.href.replace(/#.*/,"")),i;if(!h.isLastSavedState(e))return i=e,i||(i=h.createStateObject()),h.Adapter.trigger(t,"popstate"),h},h.back=function(t){return t!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.back,args:arguments,queue:t}),!1):(h.busy(!0),h.doubleCheck(function(){h.back(!1)}),g.go(-1),!0)},h.forward=function(t){return t!==!1&&h.busy()?(h.pushQueue({scope:h,callback:h.forward,args:arguments,queue:t}),!1):(h.busy(!0),h.doubleCheck(function(){h.forward(!1)}),g.go(1),!0)},h.go=function(t,e){var i;if(t>0)for(i=1;t>=i;++i)h.forward(e);else{if(!(0>t))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(i=-1;i>=t;--i)h.back(e)}return h},h.emulated.pushState){var p=function(){};h.pushState=h.pushState||p,h.replaceState=h.replaceState||p}else h.onPopState=function(e,i){var s=!1,o=!1,r,a;return h.doubleCheckComplete(),s=h.Adapter.extractEventData("state",e,i)||!1,o=s?h.getStateById(s):h.expectedStateId?h.getStateById(h.expectedStateId):h.extractState(n.location.href.replace(/#.*/,"")),o||(o=h.createStateObject(null,null,n.location.href.replace(/#.*/,""))),h.expectedStateId=!1,h.isLastSavedState(o)?(h.busy(!1),!1):(h.storeState(o),h.saveState(o),h.setTitle(o),h.Adapter.trigger(t,"statechange"),h.busy(!1),!0)},h.Adapter.bind(t,"popstate",h.onPopState),h.pushState=function(e,i,n,s){if(h.getHashByUrl(n)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(s!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:s}),!1;h.busy(!0);var o=h.createStateObject(e,i,n);return h.isLastSavedState(o)?h.busy(!1):(h.storeState(o),h.expectedStateId=o.id,g.pushState(o.id,o.title,o.url),h.Adapter.trigger(t,"popstate")),!0},h.replaceState=function(e,i,n,s){if(h.getHashByUrl(n)&&h.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(s!==!1&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:s}),!1;h.busy(!0);var o=h.createStateObject(e,i,n);return h.isLastSavedState(o)?h.busy(!1):(h.storeState(o),h.expectedStateId=o.id,g.replaceState(o.id,o.title,o.url),h.Adapter.trigger(t,"popstate")),!0};if(o){try{h.store=u.parse(o.getItem("History.store"))||{}}catch(f){h.store={}}h.normalizeStore()}else h.store={},h.normalizeStore();h.Adapter.bind(t,"beforeunload",h.clearAllIntervals),h.Adapter.bind(t,"unload",h.clearAllIntervals),h.saveState(h.storeState(h.extractState(n.location.href.replace(/#.*/,""),!0))),o&&(h.onUnload=function(){var t,e;try{t=u.parse(o.getItem("History.store"))||{}}catch(i){t={}}t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{};for(e in h.idToState)h.idToState.hasOwnProperty(e)&&(t.idToState[e]=h.idToState[e]);for(e in h.urlToId)h.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=h.urlToId[e]);for(e in h.stateToId)h.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=h.stateToId[e]);h.store=t,h.normalizeStore(),o.setItem("History.store",u.stringify(t))},h.intervalList.push(l(h.onUnload,h.options.storeInterval)),h.Adapter.bind(t,"beforeunload",h.onUnload),h.Adapter.bind(t,"unload",h.onUnload)),h.emulated.pushState||(h.bugs.safariPoll&&h.intervalList.push(l(h.safariStatePoll,h.options.safariPollInterval)),("Apple Computer, Inc."===s.vendor||"Mozilla"===(s.appCodeName||""))&&(h.Adapter.bind(t,"hashchange",function(){h.Adapter.trigger(t,"popstate")}),h.getHash()&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(t,"hashchange")})))},h.init()}(window),window.matchMedia=window.matchMedia||function(t,e){var i,n=t.documentElement,s=n.firstElementChild||n.firstChild,o=t.createElement("body"),r=t.createElement("div");return r.id="mq-test-1",r.style.cssText="position:absolute;top:-100em",o.style.background="none",o.appendChild(r),function(t){return r.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',n.insertBefore(o,s),i=42==r.offsetWidth,n.removeChild(o),{matches:i,media:t}}}(document),function(t){t.fn.placeholder=function(e){return this.each(function(){function i(e){n(t(e.target))}function n(){if(""===o.val()){if("password"===o.attr("type"))try{o.attr("type","text")}catch(t){return!1}o.val(r),o.addClass("ui-placeholder")}}function s(t){o.removeClass("ui-placeholder"),o.val()===r&&o.val("")}var o=t(this),r,a="placeholder"in document.createElement("input");r=void 0===e?t(this).attr("placeholder"):e,a?o.attr("placeholder",r):(n(o.blur(i).focus(s).addClass("ui-placeholder")),o.parents("form").submit(function(t){o.val()===r&&o.val("")}))})}}(jQuery),function(t){var e=!1,i=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,n=t.Class=function(){};"undefined"!=typeof this&&(this.Class=n),n.extend=function(t){var s=this.prototype;e=!0;var o=new this;e=!1;for(var r in t)o[r]="function"==typeof t[r]&&"function"==typeof s[r]&&i.test(t[r])?function(t,e){return function(){var i=this._super;this._super=s[t];var n=e.apply(this,arguments);return this._super=i,n}}(r,t[r]):t[r];var a=function(){!e&&this.init&&this.init.apply(this,arguments)};return a.prototype=o,a.prototype.constructor=a,a.extend=n.extend,a}}("undefined"!=typeof global?global:window),C("widget"),C.widget.__base={init:function(){this.instanceNumber=++C.global.instanceCounter,C("widget."+this.instanceNumber),C.widget[this.instanceNumber]._widget=[],this.eventNamespace="widget"+this.instanceNumber,this.construct.apply(this,arguments)},destroy:function(){if(this.destruct(),this.eventNamespace){var t="."+this.eventNamespace;$(window).off(t),$("*").off(t)}for(var e=0;e<C.widget[this.instanceNumber]._widget.length;e++)C.widget[this.instanceNumber]._widget[e].destroy?C.widget[this.instanceNumber]._widget[e].destroy():C.log("Widget "+e+" does not have a destroy method");for(;C.widget[this.instanceNumber]._widget.length;)C.widget[this.instanceNumber]._widget.pop()},addWidget:function(t){return C.widget[this.instanceNumber]._widget.push(t),t},construct:function(t){C.log("Missing widget construct(opts) function!")},destruct:function(){C.log("Missing widget destruct() function!")}},C.widget._base=Class.extend(C.widget.__base),C("widget.backbone"),C.widget.backbone.view=Backbone.View.extend(_.extend(C.widget.__base,{initialize:function(t){this.init(t)}})),C("page"),C.page._base=Class.extend({init:function(){this.arguments=arguments,C.page._widget=C.page._widget||[],this.instanceNumber=++C.global.pageCounter,this.eventNamespace="page"+this.instanceNumber,this.construct.apply(this,arguments)},getData:function(){return this.arguments},destroy:function(){if(this.destruct(),this.eventNamespace){var t="."+this.eventNamespace;$(window).off(t),$("*").off(t)}for(var e=0;e<C.page._widget.length;e++)C.page._widget[e].destroy?C.page._widget[e].destroy():C.log("Widget "+C.page._widget[e].toString()+" does not have a destroy method");for(;C.page._widget.length;)C.page._widget.pop()},addWidget:function(t){return C.page._widget.push(t),t},construct:function(t){C.log("Missing page construct(opts) function!")},destruct:function(){C.log("Missing page destruct() function!")}}),C.Events=_.extend({},Backbone.Events),C.Collection=Backbone.Collection.extend({objName:"C.Collection",destroy:function(){for(this.log("destroy");this.length>0;)this.at(0).destroy(),this.remove(this.at(0));this.trigger("destroy")}}),C.Model=Backbone.Model.extend({objName:"C.Model",destroy:function(){this.trigger("destroy")}}),C.View=Backbone.View.extend({objName:"C.View"}),C.Collection.prototype.log=C.Model.prototype.log=C.View.prototype.log=function(){var t=Array.prototype.slice.call(arguments);t.unshift(this.objName),C.log.apply(this,t)},jQuery.extend(jQuery,{escapeSelector:function(){var t=["#","&","~","=",">","'",":",'"',"!",";",","],e=[".","*","+","|","[","]","(",")","/","^","$"],i=new RegExp("("+t.join("|")+"|\\"+e.join("|\\")+")","g");return function(t){return t.replace(i,"\\$1")}}()}),$.fn.serializeObject=function(){var t={},e=this.serializeArray();return $.each(e,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},$.safeAjax=function(t){function e(t){return String(t).replace(/[&<>"'\/]/g,function(t){return n[t]})}function i(t){if("string"==typeof t)return e(t);if("object"==typeof t){for(var n in t){var s=t[n];t[n]=i(s)}return t}return t}var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},s=t.success;return t.success=function(t,e,n){t=i(t),s&&s(t,e,n)},$.ajax(t)},$.fn.observe=function(){var t=arguments,e,i,n,s=t[0],o,r=this,a=function(t,e){t=t.split(/\s+/);for(var i=[],n=0;n<t.length;n++)i.push(t[n]+e);return i.join(" ")};if(2==t.length){e=t[1],o="string"==typeof e.eventNamespace?"."+e.eventNamespace:"";for(var l in s)!function(t){r.on(a(t,o),function(i){return s[t].call(e,i)})}(l)}else if(3==t.length)if("object"==typeof s){n=t[1],e=t[2],o="string"==typeof e.eventNamespace?"."+e.eventNamespace:"";for(var l in s)!function(t){r.on(a(t,o),n,function(i){return s[t].call(e,i)})}(l)}else i=t[1],e=t[2],o="string"==typeof e.eventNamespace?"."+e.eventNamespace:"",this.on(a(s,o),function(t){return i.call(e,t)});else 4==t.length&&(n=t[1],i=t[2],e=t[3],o="string"==typeof e.eventNamespace?"."+e.eventNamespace:"",this.on(a(s,o),n,function(t){return i.call(e,t)}));return this},$.fn.unobserve=function(){var t=arguments,e,i,n=t[0],s,o=this,r=function(t,e){t=t.split(/\s+/);for(var i=[],n=0;n<t.length;n++)i.push(t[n]+e);return i.join(" ")};if(2==t.length)if(e=t[1],s="string"==typeof e.eventNamespace?"."+e.eventNamespace:"","object"==typeof n)for(var a in n)!function(t){o.off(r(t,s))}(a);else this.off(r(n,s));else if(3==t.length)if(i=t[1],e=t[2],s="string"==typeof e.eventNamespace?"."+e.eventNamespace:"","object"==typeof n)for(var a in n)!function(t){o.off(r(t,s),i)}(a);else this.off(r(n,s),i);return this},function(t){C("widget"),C.widget.spinner=C.widget._base.extend({construct:function(e){var i=this;this.options=t.extend({spokes:16,animTime:75,color:"#666666",type:"round"},e),this.$set=this.options.canvas.jquery?this.options.canvas:t(this.options.canvas),this.canvases=this.getAndValidateCanvases(this.$set),this.canvases.length&&(this.rotation=2*Math.PI/this.options.spokes,this.rgbColor=this.getRGBColor(this.options.color),this.contexts=this.setupContexts(this.canvases),this.draw())},draw:function(){var t=this;this.translateContexts(this.contexts),this.drawIntervalID=setInterval(function(){t.paintFrame()},this.options.animTime)},clearFrame:function(t){t.ctx.clearRect(t.negHalf,t.negHalf,t.size,t.size)},paintFrame:function(){for(var t=0;t<this.contexts.length;t++){var e=this.contexts[t];if(this.isPresent(e.ctx.canvas)){this.clearFrame(e),e.ctx.rotate(this.rotation);for(var i=0;i<this.options.spokes;i++)e.ctx.rotate(this.rotation),e.ctx.strokeStyle=this.rgbColor+i/this.options.spokes+")",e.ctx.beginPath(),e.ctx.moveTo(0,e.startPos),e.ctx.lineTo(0,e.endPos),e.ctx.stroke()}else this.contexts.splice(t,1),t--}if(!this.contexts.length){clearInterval(this.drawIntervalID);for(var e in this.contexts)this.contexts.hasOwnProperty(e)&&(e=this.contexts[e],this.clearFrame(e),this.translateContext(e,!0))}},isPresent:function(e){return!!t(e).closest("body").length},getAndValidateCanvases:function(t){var e=[];return t.each(function(t,i){"CANVAS"===i.nodeName&&e.push(i)}),e},setupContexts:function(e){var i=[];for(var n in e)if(e.hasOwnProperty(n)){n=e[n];var s=t(n);if(s.is(":visible")){var o=s.height(),r=.5*o,a=-1*r,l=Math.floor(1/3*o),c=o*(30>o?.08:.0625),u=Math.floor(.5*o)-c,d=n.getContext("2d");d.lineWidth=c,d.lineCap=this.options.type,i.push({ctx:d,size:o,halfSize:r,negHalf:a,startPos:l,endPos:u,thickness:c})}}return i},translateContext:function(t,e){e?t.ctx.translate(t.negHalf,t.negHalf):t.ctx.translate(t.halfSize,t.halfSize)},translateContexts:function(t,e){for(var i in t)t.hasOwnProperty(i)&&(i=t[i],this.translateContext(i,e))},getRGBColor:function(t){function e(t,e,n){return parseInt(i(t).substring(e,n),16)}function i(t){return"#"==t.charAt(0)?t.substring(1,7):t}return["rgba(",e(t,0,2),",",e(t,2,4),",",e(t,4,6),","].join("")},clearAllCanvases:function(){if(this.contexts)for(var t=0;t<this.contexts.length;t++){var e=this.contexts[t];this.isPresent(e.ctx.canvas)?this.clearFrame(e):(this.contexts.splice(t,1),t--)}},destruct:function(){clearInterval(this.drawIntervalID),this.clearAllCanvases()}})}(jQuery),function(t){C("widget"),C.widget.autoComplete=C.widget._base.extend({construct:function(e){C.log("autocomplete:construct"),this.opts=t.extend({minChar:1,delay:200,paramName:"search_by",ajaxParamName:"search_by",button:".search-submit",dropdownOverride:null,overrideActiveClass:null,topOffset:0,showTypeIcons:!1,showCommentCounts:!1,limitParamsString:"",additionalGetParamsString:"",cssPositioning:"absolute",combineResultSets:!1,callback:null,lastItem:null,lastItemCallback:null,track:null,refreshAfterSchoolChange:!1,urlToNavigateToAfterSchoolChange:null,schoolChangeCallback:null,useSpinner:!1,onTextboxBlur:null,attachToParent:null,overrideSolutionsImage:!1},e),"answers"==this.opts.type&&(this.opts.subType="answers",this.opts.type="instantAnswers"),this.mouseInDropdown=!1,this.$initializationElement=this.opts.el.jquery?this.opts.el:t(this.opts.el),this.$lastItem=this.opts.lastItem?this.opts.lastItem.jquery?this.opts.lastItem:t(this.opts.lastItem):null,this.$initializationElement.length&&(this.$initializationElement.is("input")||this.$initializationElement.is("textarea")?(this.$input=this.$initializationElement,this.$el=this.$input.offsetParent(),this.inputInitialized=!0):(this.$el=this.$initializationElement,this.favorWrapElem=!0,this.$input=this.$el.find("input[name="+this.opts.paramName+"]"),this.inputInitialized=!1),this.activeQuestionsListWidget=null,this.needsQuestionsLists=!1,this.type||(this.type=this.opts.type||"combined"),this.determineQuestionsListNeeded(),this.$parentHeaderSelector=this.$input.closest(".chg-header, .chg-hdr-root"),this.isHeaderChild=this.$parentHeaderSelector&&this.$parentHeaderSelector.length,this.$dialogParentSelector=this.$input.closest(".dialog-widget"),this.isDialogChild=this.$dialogParentSelector&&this.$dialogParentSelector.length,this.$appendTarget=this.opts.attachToParent?this.opts.attachToParent:this.isHeaderChild?C.dom.$headerRoot:C.dom.$root,this.isFixedCss="fixed"===this.opts.cssPositioning.toLowerCase(),this.$input.attr("autocomplete","off"),this.$form=this.$input.parents("form"),this.$button=this.$form.parent().find(this.opts.button),this.buttonRestoreHtml=this.$button.html(),this.liRestoreHtml=null,this.submitButtonSpinner=null,this.url="/_ajax/autocomplete",this.trackId=this.generateTrackId(),this.xhrCounter=0,this.xhr=[],this.canShow=0,this.suggestVal="",this.lastQuery="",this.userForcedSubmission=!1,this.saveClickedHeader=null,this.changeSchoolUrl="/_ajax/user/changeschool",this.createDropdownContainer(),this.doBind(),this.hasRoundedCorners=parseInt(this.$input.css("border-bottom-right-radius"),10))},generateTrackId:function(){var t=Math.abs(4294967295*Math.random()<<0).toString(16);return("000000000"+t).slice(-8)},destruct:function(){return C.log("autocomplete:destruct"),this.$dropdown&&this.opts.dropdownOverride&&this.opts.overrideActiveClass?(this.$dropdown.hasClass(this.opts.overrideActiveClass)||this.$dropdown.addClass(this.opts.overrideActiveClass),void this.$dropdown.remove()):(this.activeQuestionsListWidget&&this.activeQuestionsListWidget.destroy(),this.submitButtonSpinner&&this.submitButtonSpinner.destroy(),void(this.$dropdown&&this.$dropdown.length&&this.$dropdown.remove()))},determineQuestionsListNeeded:function(){var t=new RegExp("question","i"),e=new RegExp("instantanswers","i"),i=new RegExp("homeworkhelp","i"),n=this.type;(t.test(n)||e.test(n)||i.test(n))&&(this.needsQuestionsLists=!0),"answers"==this.opts.subType&&(this.needsQuestionsLists=!1)},createDropdownContainer:function(){return this.opts.dropdownOverride&&this.opts.overrideActiveClass?("string"==typeof this.opts.dropdownOverride&&(this.opts.dropdownOverride=t(this.opts.dropdownOverride)),this.$dropdown=this.opts.dropdownOverride,void this.$dropdown.addClass("chg-autocomplete-container")):void(this.$dropdown=t('<div class="chg-autocomplete-container" id="autocomplete-'+this.instanceNumber+'"></div>').appendTo(this.$appendTarget).hide().css({position:this.opts.cssPositioning,zIndex:-1,width:this.opts.width}))},doBind:function(){var e=this;this.$input.observe({"focus.autocomplete":this.onTextboxFocus,"blur.autocomplete":this.opts.onTextboxBlur||this.onTextboxBlur,"keydown.autocomplete":this.onKeyDown,"keyup.autocomplete":this.onKeyUp},this),this.$input.observe("paste",function(){var t=arguments;setTimeout(function(){e.onKeyUp.apply(e,t)},0)},this),this.$dropdown.observe({mouseover:this.onMouseOverSelection,mousedown:this.onSelectionClick,mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave},this),this.$button.observe("click",this.onButtonClick,this),t(window).observe("resize",this.hideDropdown,this)},getParsedUrl:function(){var t="",e="",i="",n="";return this.opts.additionalGetParamsString.length&&(n="&"==this.opts.additionalGetParamsString.substring(1)?"":"&",t=n+this.opts.additionalGetParamsString),this.opts.limitParamsString.length&&(n="&"==this.opts.limitParamsString.substring(1)?"":"&",e=n+this.opts.limitParamsString),this.opts.combineResultSets&&(i="&combine_results="+this.opts.combineResultsString),this.url+"?"+this.opts.ajaxParamName+"="+encodeURIComponent(this.$input.val())+"&type="+this.type+t+e+i+"&trackid="+this.trackId},fireAjax:function(){clearTimeout(this.ajaxTimeout);var t=this;this.ajaxTimeout=setTimeout(function(){t.callAjax()},this.opts.delay)},callAjax:function(){if(this.canShow){if(this.opts.useSpinner&&this.$button.length&&this.buttonRestoreHtml&&!this.submitButtonSpinner){this.$button.html('<canvas class="loading" width="15" height="15"><img src="/s/_global/images/ajax-loader.gif"></canvas>');var e=this.$button.find("canvas.loading");this.submitButtonSpinner=new C.widget.spinner({canvas:e,color:"#000000"})}this.xhr.push(t.ajax({url:this.getParsedUrl(),dataType:"json",context:this,success:this.onAjaxSuccess,error:this.onAjaxError}))}},onAjaxSuccess:function(t,e,i){this.canShow&&this.isResponseInOrder(i)&&this.onAjaxResponse(t)},onAjaxError:function(t,e,i){},isResponseInOrder:function(t){var e;for(e=0;e<this.xhr.length&&this.xhr[e]!==t;e++);return e>=this.xhrCounter?(this.xhrCounter=e,!0):!1},onAjaxResponse:function(e){var i=this.buildAutocompleteDropdown(e);i?(this.$button.length&&this.submitButtonSpinner&&(this.$button.html(this.buttonRestoreHtml),this.submitButtonSpinner=null),this.showDropdown(),t("body").trigger("autocomplete:success",{data:e})):t("body").trigger("autocomplete:noResults")},showDropdown:function(){if(this.canShow&&!this.userForcedSubmission){if(this.opts.dropdownOverride&&this.opts.overrideActiveClass)return this.$dropdown&&!this.$dropdown.hasClass(this.opts.overrideActiveClass)&&this.$dropdown.addClass(this.opts.overrideActiveClass),void this.$dropdown.find("p").css({visibility:"hidden"}).each(function(){var e=this,i=t(this),n=i.text(),s=i.find("span").text(),o,r="",a,l;return e.scrollHeight<=e.offsetHeight?void i.css({visibility:"visible"}):(o=n.split(/\s+/),a=0,void(l=setInterval(function(){return o[a]?(r+=o[a]+" ",i.text(r),e.scrollHeight>e.offsetHeight?(o=o.slice(0,a-1),o=o.join(" ")+"...",s.length&&($regex=new RegExp("("+s+")"),o=o.replace($regex,'<span class="chg-suggest-term">$1</span>')),i.html(o),clearInterval(l),void i.css({visibility:"visible"})):void a++):(clearInterval(l),void i.css({visibility:"visible"}))},0)))});var e=this.opts.width||this.$input.outerWidth()-2,i=this.$input.offset(),n=i.left,s=this.favorWrapElem?this.$initializationElement:this.$input,o=this.isFixedCss?s.position().top:s.offset().top,r=s.outerHeight(!0),a=i.left,l=r+this.opts.topOffset,c=[0];if(this.$input.parents().each(function(e,i){c.push(+t(i).css("zIndex")||0)}),c=C.utility.max(c)+1,"fixed"===this.opts.cssPositioning||this.isHeaderChild)this.isDialogChild&&(l+=s.position().top+parseInt(this.$dialogParentSelector.css("top"),10));else{var u=this.$input.scrollTop();l+=u+i.top}this.$dropdown.css({position:this.opts.cssPositioning,zIndex:c,width:e+"px",left:a+"px",top:l+"px"}).show(),this.opts.attachToParent&&this.$dropdown.css({position:"relative",left:"0px",top:"0px"}),this.hasRoundedCorners&&this.$input.css({"border-radius":"5px 5px 0 0"}),this.userForcedSubmission=!1}},hideDropdown:function(){var t=this;return this.opts.dropdownOverride&&this.opts.overrideActiveClass?void(this.$dropdown.hasClass(this.opts.overrideActiveClass)&&this.$dropdown.removeClass(this.opts.overrideActiveClass)):void setTimeout(function(){t.hasRoundedCorners&&t.$input.css({"border-radius":"5px"}),t.$dropdown.hide()},300)},onTextboxFocus:function(t){this.$input.val().length&&this.$dropdown.html().length&&(this.canShow=1,this.showDropdown())},onTextboxBlur:function(t){this.mouseInDropdown||this.$input.is(":focus")||(this.canShow=0,this.hideDropdown())},onMouseEnter:function(){this.mouseInDropdown||(this.mouseInDropdown=!0)},onMouseLeave:function(){this.mouseInDropdown&&(this.mouseInDropdown=!1,this.onTextboxBlur())},onKeyUp:function(e){if(13==e.keyCode)return this.userForcedSubmission=!0,void this.hideDropdown();var i=t.trim(this.$input.val());if(this.lastQuery!=i){this.lastQuery=i;var n=String(this.$input.attr("textvalue"));if(i==n||""===i||i.length<this.opts.minChar)return this.$button.length&&this.submitButtonSpinner&&(this.$button.html(this.buttonRestoreHtml),this.submitButtonSpinner=null),this.canShow=0,void this.hideDropdown();this.canShow=1,this.suggestVal="",this.fireAjax(),this.userForcedSubmission=!1}},onKeyDown:function(t){40==t.keyCode?(this.doNextSelection(t),t.preventDefault()):38==t.keyCode?(this.doPrevSelection(t),t.preventDefault()):27==t.keyCode?this.$input.blur():13==t.keyCode&&this.onSubmit(t)},onMouseOverSelection:function(e){var i=this.getTargetedLi(e),n=e.currentTarget;i.hasClass("disabled")||(i.length&&(t(n).find("li").removeClass("suggest-selected"),i.addClass("suggest-selected")),this.changeSelection(i))},getTargetedLi:function(e){return t(e.target).closest("li")},doNextSelection:function(t){var e=this.$dropdown.find("li"),i=e.index(this.$dropdown.find("li.suggest-selected")),n;return e.removeClass("suggest-selected"),n=-1==i||i>=e.length-1?e.eq(0).addClass("suggest-selected"):e.eq(i+1).addClass("suggest-selected"),n.hasClass("disabled")?(this.doNextSelection(t),!1):void this.changeSelection(n)},doPrevSelection:function(t){var e=this.$dropdown.find("li"),i=e.index(this.$dropdown.find("li.suggest-selected")),n;return e.removeClass("suggest-selected"),n=-1==i||0===i?e.eq(e.length-1).addClass("suggest-selected"):e.eq(i-1).addClass("suggest-selected"),n.hasClass("disabled")?(this.doPrevSelection(t),!1):void this.changeSelection(n)},onButtonClick:function(){var e=t.trim(this.$input.val());return e!=this.$input.attr("textvalue")&&""!==e&&this.$form.submit(),!1},changeSelection:function(t){this.$curLi=t;var e=this.$curLi.find(".autocomplete-hdr");this.saveClickedHeader=e.length?e.text():null,this.suggestVal=this.saveClickedHeader},onSubmit:function(t){if(!this.$curLi){if(this.opts.track){var e=this.opts.track.split("=");this.$form.append('<input type="hidden" name="'+e[0]+'" value="'+e[1]+'" />')}return this.opts.callback&&this.opts.callback(t),!0}if(this.$curLi.hasClass("disabled"))return t.preventDefault(),!1;if(this.suggestVal.length){t.preventDefault(),this.hideDropdown();var i=this.$curLi.find(".autocomplete-hdr");if(i.length&&(this.saveClickedHeader=i.text()),this.opts.callback&&this.$curLi)return this.opts.callback(t,this.$curLi,this.$initializationElement),!1;if(this.$curLi.hasClass("school-change"))return this.changeUserSchool(t,this.$curLi),!1;var n=this.$curLi.attr("data-url"),s=this.$curLi.attr("data-ii");return void 0!=s&&(n=-1==n.indexOf("?")?n+"?ii="+s:n+"&ii="+s,this.opts.track&&(n+="&"+this.opts.track)),top.location.href=n,!1}return!0},getDisabledItems:function(e){this.opts||(this.opts={}),this.opts.disabledItems&&"object"==typeof this.opts.disabledItems||(this.opts.disabledItems={});var i=[];return this.opts.disabledItems[e]&&"object"==typeof this.opts.disabledItems[e]&&_.each(this.opts.disabledItems[e],function(e){i.push(t.trim(e))}),i},convertItemsToArray:function(t){return t?"object"!=typeof t?[t]:t:[]},setDisabledItems:function(t,e){var i=this.getDisabledItems(t);return t&&"string"==typeof t&&(this.opts.disabledItems[t]=this.convertItemsToArray(e)),i.toString()!=this.getDisabledItems(t).toString()&&(this.hideDropdown(),this.$dropdown.html("")),this},addDisabledItems:function(t,e){var i=_.union(this.getDisabledItems(t),this.convertItemsToArray(e));return this.setDisabledItems(t,i)},removeDisabledItems:function(t,e){var i=_.difference(this.getDisabledItems(t),this.convertItemsToArray(e));return this.setDisabledItems(t,i)},checkItemIsDisabled:function(t){if(!t||"object"!=typeof t||!_.size(t))return!1;if(t.hasOwnProperty("disabled")&&1==t.disabled)return!0;var e=!1,i=this;return _.each(t,function(t,n){return _.indexOf(i.getDisabledItems(n),t)>-1?(e=!0,!1):void 0}),e},buildAutocompleteSectionItem:function(e,i){var n=[],s=i,o='<span class="chg-suggest-term">$1</span>',r=e.title?e.title.toLowerCase().indexOf("question")>=0:!1,a=r?e.replaceIsSafe:!0,l=t.trim(r&&a?e.replaceTerm:this.$input.val()),c=new RegExp("("+this.RegExpQuote(l)+")","i"),u=t("<div/>").html(e.title).text(),d="undefined"!=typeof e.hasTBS&&e.hasTBS?e.hasTBS:!1,h='<li data-ii="'+s+'" ',g=this.checkItemIsDisabled(e.attributes)?"disabled ":"";if(e.listClass&&(g+=" "+e.listClass+" "),g&&(h+='class="'+t.trim(g)+'" '),n.push(h),e.attributes)for(var p in e.attributes)n.push(p+'="'+e.attributes[p]+'" ');if(n.push(">"),e.img){if(e.img.url){n.push('<img src="'+e.img.url+'"');var f=e.img.alt?e.img.alt:"chegg image";n.push(' alt="'+f+'"'),e.img.width&&n.push(' width="'+e.img.width+'"'),e.img.height&&n.push(' height="'+e.img.height+'"'),e.img.onError&&n.push('this.onerror=null; onError="'+e.img.onError+'"'),n.push(" />")}n.push("<div>")}if(e.typeicon&&this.opts.showTypeIcons&&n.push("count"===e.typeicon.type&&e.countDisplay?'<span class="icn-count-22 '+e.typeicon.iconclass+'">'+e.countDisplay+"</span>":'<span class="autocomplete-type-icon '+e.typeicon.iconclass+'">'+e.typeicon.type+"</span>"),"undefined"!=typeof e.starRating&&e.starRating&&n.push('<div class="autocomplete-star-rating"><span class="star-'+e.starRating+'-sm">'+e.starRating+" Stars</span></div>"),d&&e.solutionsUrl&&!this.opts.overrideSolutionsImage&&n.push('<a class = "autocomplete-hasTBS" href ='+e.solutionsUrl+"></a>"),e.title){var m=a?u.replace(c,o):e.title;n.push('<p class="autocomplete-hdr">'+m+"</p>")}if(e.subtitle){var v=a?e.subtitle.replace(c,o):e.subtitle;n.push('<p class="autocomplete-subtitle">'+v+"</p>")}if(e.author){var b=e.author.replace(c,o);n.push('<p class="autocomplete-author">'+b+"</p>")}if(e.isbnText){var y=e.isbnText.replace(c,o);y=y.replace("&amp;nbsp;"," &nbsp; "),e.editionNo&&0!=e.editionNo&&(y="Edition: "+e.editionNo+" "+y),n.push('<p class="autocomplete-isbn">'+y+"</p>")}if(e.coursename){var C=e.coursename.replace(c,o);n.push('<p class="autocomplete-course">'+C+"</p>")}if(this.showCommentCounts&&e.commentCount>0&&n.push('<span class="comment-count">'+e.commentCount+"</span>"),e.button){var w=e.button.id?' id="'+e.button.id+'"':"",x=e.button.btnclass?' class="'+e.button.btnclass+'"':"btn-primary-mini",k=e.button.text?e.button.text:"go";n.push("<button"+w+x+">"+k+"</button>")}return e.img&&n.push("</div>"),n.push("</li>"),n.join("")},buildAutocompleteDropdown:function(e){var i="object"==typeof e?e:jQuery.parseJSON(e);if(i){var n=this.opts.type.replace("|","_"),s='<div id="'+n+'_autocomplete"></div>',o=t(s),r=1;if(i){for(var a in i)if(i[a].title){var l='<p class="automplete-sec-hdr">'+i[a].title+"</p>";o.append(t(l));var c=t("<ul></ul>");this.needsQuestionsLists&&c.addClass("questions-list");for(var u in i[a].items){var d=this.buildAutocompleteSectionItem(i[a].items[u],r),h=t(d);h.data("itemDetail",i[a].items[u]),c.append(h),r++}this.$lastItem&&(this.$lastItem.addClass("last-item"),c.append(this.$lastItem)),o.append(c)}if(this.$lastItem&&0==o.find("ul").length){this.$lastItem.addClass("last-item");var g=t("<ul></ul>");g.append(this.$lastItem),o.append(g)}return this.$dropdown.html(o).find("li:last-child").css({borderBottom:0}),""==o.html()?!1:!0}}},wireQuestionsList:function(t){this.activeQuestionsListWidget&&this.activeQuestionsListWidget.destroy();var e=this.$dropdown.find(".questions-list");e.length&&(this.activeQuestionsListWidget=new C.widget.questionsList({el:e,removeCourseButton:!0,disableAnswering:!0}));var i=t||null;i&&this.activeQuestionsListWidget&&this.activeQuestionsListWidget.getAjaxQuestion(i)},RegExpQuote:function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},onSelectionClick:function(e){if(t(e.target).hasClass("autocomplete-hasTBS"))return void this.hideDropdown();if(!t(e.target).hasClass("automplete-sec-hdr")&&1===e.which){var i=this.getTargetedLi(e);if(!i.hasClass("disabled")){if(this.$curLi=i,this.hideDropdown(),this.$curLi.hasClass("last-item"))return this.opts.lastItemCallback&&this.opts.lastItemCallback(e,this.$curLi,this.$initializationElement),!1;if(this.opts.callback)return void this.opts.callback(e,this.$curLi,this.$initializationElement);var n=this.$curLi.find(".autocomplete-hdr");n.length&&(this.saveClickedHeader=n.text(),this.updateInputVal()),this.liRestoreHtml=this.$curLi.html(),this.$curLi.html('<canvas class="loading" width="20" height="20"><img src="/s/_global/images/ajax-loader.gif"></canvas>');var s=this.$curLi.find("canvas.loading");if(new C.widget.spinner({canvas:s,color:"#000000"}),this.$curLi.hasClass("school-change"))return this.changeUserSchool(e,this.$curLi),
!1;var o=this.$curLi.attr("data-url"),r=this.$curLi.attr("data-ii");return void 0!=r&&(o=-1==o.indexOf("?")?o+"?ii="+r:o+"&ii="+r,this.opts.track&&(o+="&"+this.opts.track)),this.liRestoreHtml&&(this.$curLi.html(this.liRestoreHtml),this.liRestoreHtml=null),top.location.href=o,!1}}},changeType:function(e,i){var n=i||{},s=this.opts;"string"!=typeof e&&JSON.stringify(e),this.type=e,this.opts=t.extend({type:e},s,n),this.$dropdown&&(this.hideDropdown(),this.$dropdown.html("")),this.determineQuestionsListNeeded()},setPlaceholder:function(t){this.$input.attr("placeholder",t)},changeUserSchool:function(e,i){var n=i.jQuery?i:t(i),s=n.attr("data-schoolid");return this.updateInputVal(),this.liRestoreHtml&&(this.$curLi.html(this.liRestoreHtml),this.liRestoreHtml=null),this.opts.schoolChangeCallback?(this.opts.schoolChangeCallback(e,n),!1):void this.submitUserSchool(s)},submitUserSchool:function(e){var i={gid:e},n=this;this.addAPITokenTo(i);var s=this.opts.refreshAfterSchoolChange,o=this.opts.urlToNavigateToAfterSchoolChange;t.ajax({type:"POST",dataType:"json",url:this.changeSchoolUrl,data:i,success:function(e){return o?void C.utility.navigate(o):(s&&(t(".chg-content > div").css({opacity:.5}),top.location.reload()),n.opts.schoolChangeSuccessCallback?void n.opts.schoolChangeSuccessCallback(e):void 0)},error:function(){return!1}})},updateInputVal:function(){this.saveClickedHeader&&(this.$input.off(".autocomplete"),this.$input.val(this.saveClickedHeader),this.$input.blur(),this.$input.observe({"focus.autocomplete":this.onTextboxFocus,"blur.autocomplete":this.onTextboxBlur,"keydown.autocomplete":this.onKeyDown,"keyup.autocomplete":this.onKeyUp},this),this.saveClickedHeader=null)},addAPITokenTo:function(t){t.token=C.global.csrfToken}})}(jQuery),function(t){C.widget.autoCompleteHeader=C.widget.autoComplete.extend({construct:function(e){C.log("autocomplete:construct"),this.GAclient=Eggshell.create("C.report.GA"),this.opts=t.extend({minChar:1,delay:200,paramName:"search_by",ajaxParamName:"search_by",button:".search-magnify-btn",dropdownOverride:null,overrideActiveClass:null,topOffset:0,showTypeIcons:!1,showCommentCounts:!1,limitParamsString:"",additionalGetParamsString:"",cssPositioning:"absolute",combineResultSets:!1,callback:null,lastItem:null,lastItemCallback:null,track:null,refreshAfterSchoolChange:!1,urlToNavigateToAfterSchoolChange:null,schoolChangeCallback:null,useSpinner:!1,inHeader:!1,psycicResults:"#autosuggest-psycic",autoSuggestResults:"#autosuggest-results",container:"#autosuggest-results-container",thumbWidth:70,thumbHeight:85,thumbLetterBox:!0,showResultsFlag:!1,slideDown:!0},e),this.mouseInDropdown=!1,this.$initializationElement=this.opts.el.jquery?this.opts.el:t(this.opts.el),this.$lastItem=this.opts.lastItem?this.opts.lastItem.jquery?this.opts.lastItem:t(this.opts.lastItem):null,this.$initializationElement.length&&(this.$el=this.$initializationElement,this.favorWrapElem=!0,this.$input=this.$el.find("input[name="+this.opts.paramName+"]"),this.inputInitialized=!1,this.type||(this.type=this.opts.type||"combined"),this.$parentHeaderSelector=this.$input.closest(".chg-header, .chg-hdr-root"),this.isHeaderChild=this.$parentHeaderSelector&&this.$parentHeaderSelector.length,this.$dialogParentSelector=this.$input.closest(".dialog-widget"),this.isDialogChild=this.$dialogParentSelector&&this.$dialogParentSelector.length,this.$appendTarget=this.isHeaderChild?C.dom.$headerRoot:C.dom.$root,this.isFixedCss="fixed"===this.opts.cssPositioning.toLowerCase(),this.$input.attr("autocomplete","off"),this.$form=this.$input.parents("form"),this.$button=this.$form.parent().find(this.opts.button),this.buttonRestoreHtml=this.$button.html(),this.liRestoreHtml=null,this.submitButtonSpinner=null,this.url="/_ajax/autocomplete",this.trackId=this.generateTrackId(),this.xhrCounter=0,this.xhr=[],this.canShow=0,this.suggestVal="",this.lastQuery="",this.userForcedSubmission=!1,this.saveClickedHeader=null,this.changeSchoolUrl="/_ajax/user/changeschool",this.getSchoolUrl="/_ajax/school/info",this.gid=C.utility.getCookie("gid"),this.schoolInfo={},this.evaluateSchoolData(this.gid),this.createDropdownContainer(),this.doBind(),t("#header_autocomplete").removeAttr("disabled").blur(),t("#header_autocomplete_close").removeClass("icn-disabled"),t(".chg-header input#header_autocomplete").keyup(function(e){13==e.keyCode&&C.logger.doSessionLog(t("li.suggest-selected").length>0?{src:"header"}:{src:"header",action:"enter"})}),t(".chg-header #header_autocomplete_submit").click(function(t){C.logger.doSessionLog({src:"header",action:"button"})}))},createDropdownContainer:function(){return this.opts.dropdownOverride&&this.opts.overrideActiveClass?("string"==typeof this.opts.dropdownOverride&&(this.opts.dropdownOverride=t(this.opts.dropdownOverride)),this.$dropdown=this.opts.dropdownOverride,void(this.$psycic=this.opts.psycicResults)):void(this.$dropdown=t('<div class="chg-autocomplete-container" id="autocomplete-'+this.instanceNumber+'"></div>').appendTo(this.$appendTarget).hide().css({position:this.opts.cssPositioning,zIndex:-1,width:this.opts.width}))},doBind:function(){this.$input.observe({"focus.autocomplete":this.onTextboxFocus,"blur.autocomplete":this.onTextboxBlur,"keydown.autocomplete":this.onKeyDown,"keyup.autocomplete":this.onKeyUp},this),this.$dropdown.observe({mouseover:this.onMouseOverSelection,mousedown:this.onSelectionClick,mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave},this),t(this.opts.psycicResults).observe({mousedown:this.onSelectionClick,mouseover:this.onMouseOverSelection},this),this.$button.observe("click",this.onButtonClick,this),t(".chg-container").observe({mousedown:this.hideAS},this),t(".chg-header").observe({mousedown:this.hideAS},this),t("#header_autocomplete_close").observe({click:this.hideAS},this),t(window).observe("resize",this.hideDropdown,this)},getParsedUrl:function(){var t="",e="",i="",n="";return this.opts.additionalGetParamsString.length&&(n="&"==this.opts.additionalGetParamsString.substring(1)?"":"&",t=n+this.opts.additionalGetParamsString),this.opts.limitParamsString.length&&(n="&"==this.opts.limitParamsString.substring(1)?"":"&",e=n+this.opts.limitParamsString),this.opts.combineResultSets&&(i="&combine_results="+this.opts.combineResultsString),this.url+"?"+this.opts.ajaxParamName+"="+encodeURIComponent(this.$input.val())+"&type="+this.type+t+e+i+"&trackid="+this.trackId},onTextboxFocus:function(t){this.$input.val().length&&this.$dropdown.html().length&&(this.canShow=1),this.animateContainerOpen()},onTextboxBlur:function(t){this.mouseInDropdown||(this.$input.is(":focus")||(this.canShow=0,this.hideDropdown(),this.$input.val()||this.clearSearchInput()),this.opts.showResultsFlag=!1)},onButtonClick:function(){var e=t.trim(this.$input.val());return e!=this.$input.attr("textvalue")&&""!==e&&this.$form.submit(),!1},callAjax:function(){if(this.canShow){if(this.opts.useSpinner&&this.$button.length&&this.buttonRestoreHtml&&!this.submitButtonSpinner){this.$button.html('<canvas class="loading" width="15" height="15"><img src="/s/_global/images/ajax-loader.gif"></canvas>');var e=this.$button.find("canvas.loading");this.submitButtonSpinner=new C.widget.spinner({canvas:e,color:"#FFFFFF"})}this.xhr.push(t.ajax({url:this.getParsedUrl(),dataType:"json",context:this,success:this.onAjaxSuccess,error:this.onAjaxError}))}},onAjaxResponse:function(e){var i=this.buildAutocompleteDropdown(e);i?this.$button.length&&this.submitButtonSpinner&&(this.$button.html(this.buttonRestoreHtml),this.submitButtonSpinner=null):t("body").trigger("autocomplete:noResults")},onKeyUp:function(e){if(13==e.keyCode){var i=t("#autosuggest-psycic li.autosuggest-result-psycic.suggest-selected a");return i.length>0&&(i.removeClass("suggest-selected"),this.GAclient.trigger("report custom event",{page:"Header",section:"Psycic search",link:i.attr("data-reportlink")})),this.userForcedSubmission=!0,void this.hideDropdown()}var n=t.trim(this.$input.val());if(this.lastQuery!=n){this.lastQuery=n;var s=String(this.$input.attr("textvalue"));if(n==s||""===n||n.length<this.opts.minChar)return this.$button.length&&this.submitButtonSpinner&&(this.$button.html(this.buttonRestoreHtml),this.submitButtonSpinner=null),this.canShow=0,t("#autosuggest-results").hide().removeClass("active"),t(this.opts.psycicResults).show().css("height","auto").addClass("active"),void t(this.opts.psycicResults).find("li").removeClass("suggest-selected");this.canShow=1,this.suggestVal="",this.fireAjax(),this.userForcedSubmission=!1,t(this.opts.psycicResults).hide(),t(this.opts.psycicResults).find("li").removeClass("suggest-selected"),this.onTextboxFocus()}},animateContainerOpen:function(){C.global.pageObject.schoolId&&(this.responseId=C.global.pageObject.schoolId),this.canShow?(t(this.opts.autoSuggestResults).removeAttr("style").addClass("active"),t(this.opts.autoSuggestResults).show(),this.showDropdown()):(this.GAclient.trigger("report custom event",{page:"Header",section:"Psycic search",link:"Show"}),this.updatePsycicMarkup(),t(this.opts.psycicResults).removeAttr("style").addClass("active"),t(this.opts.psycicResults).show(),t(".icn-x").show(),this.opts.showResultsFlag=!0),1==this.opts.slideDown?t(this.opts.container).slideDown(300):t(this.opts.container).css("display","block"),this.resizeTitleContainer()},clearSearchInput:function(){t("#header_autocomplete").val(""),t(".icn-x").hide(),t("#header_autocomplete").focusout()},onMouseEnter:function(){this.mouseInDropdown||(this.mouseInDropdown=!0)},onMouseOverSelection:function(e){var i=this.getTargetedLi(e),n=e.currentTarget;i.length&&(t(n).find("li").removeClass("suggest-selected"),i.addClass("suggest-selected")),this.changeSelection(i)},showDropdown:function(){if(this.canShow&&!this.userForcedSubmission){if(this.opts.dropdownOverride&&this.opts.overrideActiveClass)return void(this.$dropdown&&!this.$dropdown.hasClass(this.opts.overrideActiveClass)&&this.$dropdown.addClass(this.opts.overrideActiveClass));var e=this.opts.width||this.$input.outerWidth(),i=this.$input.offset(),n=i.left,s=this.favorWrapElem?this.$initializationElement:this.$input,o=this.isFixedCss?s.position().top:s.offset().top,r=s.outerHeight(!0),a=i.left,l=r+this.opts.topOffset,c=[0];if(this.$input.parents().each(function(e,i){c.push(+t(i).css("zIndex")||0)}),c=C.utility.max(c)+1,"fixed"===this.opts.cssPositioning||this.isHeaderChild)this.isDialogChild&&(l+=s.position().top+parseInt(this.$dialogParentSelector.css("top"),10));else{var u=this.$input.scrollTop();l+=u+i.top}this.$dropdown.css({position:this.opts.cssPositioning,zIndex:c,width:e+"px",left:a+"px",top:l+"px"}).show(),this.userForcedSubmission=!1}},hideDropdown:function(){var e=this;t("#autosuggest-results-container").hide(),e.$dropdown.hide(),t("#header_autocomplete").focusout()},hideAS:function(e){var i=e.target,n=document.getElementById("autosuggest-results-container"),s=t.contains(n,i),o=i==document.getElementById("header_autocomplete"),r=this;t(n).find("li").removeClass("suggest-selected"),0==t(i).hasClass("icn-magnify")&&(s||o||(t(n).hide(),t(this.opts.autoSuggestResults).hide(),t("#header_autocomplete").blur().val("")),this.canShow=0,this.opts.showResultsFlag=!1)},toOrdinal:function(t){var e=t%10;return 1==e&&11!=t?t+"st":2==e&&12!=t?t+"nd":3==e&&13!=t?t+"rd":t+"th"},buildAutocompleteSectionItem:function(e,i){var n=[],s=i,o='<span class="chg-suggest-term">$1</span>',r=e.title?e.title.toLowerCase().indexOf("question")>=0:!1,a=r?e.replaceIsSafe:!0,l=t.trim(r&&a?e.replaceTerm:this.$input.val()),c=new RegExp("("+this.RegExpQuote(l)+")","i"),u=t("<div/>").html(e.title).text(),d="undefined"!=typeof e.hasTBS&&e.hasTBS?e.hasTBS:!1,h=e.typeicon&&"course"==e.typeicon.type,g=e.itemType?e.itemType:"book";if(e.title){var p=a?u.replace(c,o):e.title;e.title=p}if(e.isbnText){var f=e.isbnText.replace(c,o);f=f.replace("&amp;nbsp;"," &nbsp; "),e.editionNo&&0!=e.editionNo&&(f=this.toOrdinal(e.editionNo)+" Edition - "+f),"ebook"==g&&(f=f.replace("ISBN","eISBN"),f=f.replace("ISBN13","eISBN13")),e.isbnText=f}if(e.img&&e.img.url){var m=e.img.alt?e.img.alt:"chegg image";e.img.alt=m}if("object"==typeof e.itemPromo&&(e.itemPromo.hasTBS||e.itemPromo.hasInstantAccess||e.itemPromo.hasEbook)){var v=e.itemPromo;e.hasItemPromo=!0,e.hasTBS=v.hasTBS?v.hasTBS:!1,e.hasInstantAccess=v.hasInstantAccess?v.hasInstantAccess:!1,e.hasEbook=v.hasEbook?v.hasEbook:!1,e.availableEbookText=e.hasEbook&&e.hasTBS?'<span class="skip-available">eTextbook</span>':'<span class="emphasis">Available:</span> eTextbook'}else e.hasItemPromo=!1;switch(e.courseClassName=courseClassName=h?" autosuggest-result-course":" ",e.iiCount=s,g){case"ebook":var v=template.ebook({item:e});break;case"course":var v=template.course({item:e});break;case"dac":var v=template.dac({item:e});break;case"book":default:var v=template.book({item:e})}return n.push(v),n.join("")},onKeyDown:function(t){40==t.keyCode?(this.doNextSelection(t),t.preventDefault()):38==t.keyCode?(this.doPrevSelection(t),t.preventDefault()):27==t.keyCode?(this.$input.val(""),this.$input.blur(),this.hideDropdown()):13==t.keyCode&&this.onSubmit(t)},doNextSelection:function(e){var i=this.$dropdown.hasClass("active")?this.$dropdown:this.$psycic,n=t(i).find("li.autosuggest-result"),s=n.index(t(i).find("li.suggest-selected")),o;n.removeClass("suggest-selected"),o=-1==s||s>=n.length-1?n.eq(0).addClass("suggest-selected"):n.eq(s+1).addClass("suggest-selected"),this.changeSelection(o)},doPrevSelection:function(e){var i=this.$dropdown.hasClass("active")?this.$dropdown:this.$psycic,n=t(i).find("li.autosuggest-result"),s=n.index(t(i).find("li.suggest-selected")),o;n.removeClass("suggest-selected"),o=-1==s||0===s?n.eq(n.length-1).addClass("suggest-selected"):n.eq(s-1).addClass("suggest-selected"),this.changeSelection(o)},evaluateSchoolData:function(t){return savedId=C.utility.getLocal("schoolId"),savedName=C.utility.getLocal("schoolName"),t?t&&savedId&&savedName&&t==savedId?(this.schoolInfo={schoolName:savedName,schoolId:savedId},!0):void this.getSchool(t):!1},updatePsycicMarkup:function(){t("#autosuggest-psycic").html(template.psycic({schoolInfo:this.schoolInfo}))},getSchool:function(e){var i={school:e},n=this;t.ajax({type:"GET",dataType:"json",url:this.getSchoolUrl,data:i,success:function(t){var e=t.schoolInfo;return C.utility.setLocal("schoolId",e.schoolId),C.utility.setLocal("schoolName",e.nickname?e.nickname:e.longName),n.schoolInfo={schoolName:e.nickname?e.nickname:e.longName,schoolId:e.schoolId},n.updatePsycicMarkup(),!0},error:function(){return!1}})},onSelectionClick:function(e){if(t(e.target).hasClass("autocomplete-show-more"))return this.hideAS(e.target),void C.utility.navigate(e.target.href);if(t(e.target).parents().hasClass("autosuggest-result-psycic")){var i=void 0!=t(e.target).parents("a").attr("href")?t(e.target).parents("a").attr("href"):t(e.target).attr("href");return this.GAclient.trigger("report custom event",{page:"Header",section:"Psycic search",link:t(e.target).parents("a").attr("data-reportlink")}),void C.utility.navigate(i)}if(!t(e.target).parents().hasClass("autosuggest-no-results")&&!t(e.target).hasClass("autocomplete-hasTBS")&&1===e.which){if(this.$curLi=this.getTargetedLi(e),this.hideDropdown(),this.$curLi.hasClass("last-item"))return this.opts.lastItemCallback&&this.opts.lastItemCallback(e,this.$curLi,this.$initializationElement),!1;if(this.$curLi.hasClass("question-get")&&!this.$curLi.hasClass("no-modal")&&"answers"!=this.opts.subType){var n=this.$curLi.attr("data-qid");return this.wireQuestionsList(n),!1}if(this.opts.callback)return void this.opts.callback(e,this.$curLi,this.$initializationElement);var s=this.$curLi.find(".autocomplete-hdr");s.length&&(this.saveClickedHeader=s.text(),this.updateInputVal()),this.liRestoreHtml=this.$curLi.html(),this.$curLi.html('<canvas class="loading" width="20" height="20"><img src="/s/_global/images/ajax-loader-white.gif"></canvas>');var o=this.$curLi.find("canvas.loading");if(new C.widget.spinner({canvas:o,color:"#000000"}),this.$curLi.hasClass("school-change"))return this.changeUserSchool(e,this.$curLi),!1;var i=this.$curLi.attr("data-url"),r=this.$curLi.attr("data-ii");return void 0!=r&&(i=-1==i.indexOf("?")?i+"?ii="+r:i+"&ii="+r,this.opts.track&&(i+="&"+this.opts.track)),this.liRestoreHtml&&(this.$curLi.html(this.liRestoreHtml),this.liRestoreHtml=null),C.logger.doSessionLog({src:"header"}),C.utility.navigate(i),!1}},resizeTitleContainer:function(){var e=t(".autosuggest-result-data").width();e=parseInt(e)-30,t(".autosuggest-result-title").css("width",e)},onSubmit:function(e){if(!this.$curLi){if(this.opts.track){var i=this.opts.track.split("=");this.$form.append('<input type="hidden" name="'+i[0]+'" value="'+i[1]+'" />')}return!0}var n=this.$curLi.find(".autocomplete-hdr"),s=this.$input.val();if(this.suggestVal&&this.suggestVal.length||""!=s){if(e.preventDefault(),this.hideDropdown(),n.length&&(this.saveClickedHeader=n.text()),this.opts.callback&&this.$curLi)return this.opts.callback(e,this.$curLi,this.$initializationElement),!1;if(this.$curLi.hasClass("school-change"))return this.changeUserSchool(e,this.$curLi),!1;var o=this.$curLi.attr("data-url"),r=this.$curLi.attr("data-ii");if(void 0!=r){var a=t(".autosuggest-result"),l=!1;if(t.each(a,function(){t(this).hasClass("suggest-selected")&&(l=!0)}),!l)return o="/search/"+s+"/books",C.utility.navigate(o),!1;o=-1==o.indexOf("?")?o+"?ii="+r:o+"&ii="+r,this.opts.track&&(o+="&"+this.opts.track)}else o="/search/"+s+"/books";return C.utility.navigate(o),!1}var o=this.$curLi.find("a").attr("href");return C.utility.navigate(o),!1},buildAutocompleteDropdown:function(e){var i="object"==typeof e?e:jQuery.parseJSON(e);if(i){var n=this.opts.type.replace("|","_"),s='<div id="'+n+'_autocomplete"></div>',o=t(s),r=1;if(void 0==i[0].items[0])return this.$dropdown.html(o),t(this.opts.psycicResults).hide().removeClass("active"),t(this.opts.autoSuggestResults).show().addClass("active"),o.append(template.noresults()),!0;if(i){for(var a in i)if(i[a].title){var l=t("<ul></ul>");this.needsQuestionsLists&&l.addClass("questions-list");for(var c in i[a].items){var u=this.buildAutocompleteSectionItem(i[a].items[c],r),d=t(u);l.append(d),r++}o.append(l)}return this.$dropdown.html(o),t(this.opts.psycicResults).hide().removeClass("active"),t(this.opts.autoSuggestResults).show().addClass("active"),""==o.html()?!1:(this.schoolInfo.query=this.$input.val(),o.append(template.showall({schoolInfo:this.schoolInfo})),this.resizeTitleContainer(),!0)}}}})}(jQuery);var template={};template.book=_.template('<li class="autosuggest-result" data-ii="<%= item.iiCount %>" data-url="<%= item.attributes["data-url"] %>"><a href="<%= item.attributes["data-url"] %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><div class="autosuggest-result-meta"><% if(_.isEqual(item.hasItemPromo,true)){ %><span class="autosuggest-icon-meta"></span><div class="autosuggest-results-meta-info"><% if(_.isEqual(item.hasTBS,true)){ %><span class="autosuggest-results-meta-info-item"><span class="emphasis">Available:</span> Step-by-step Solutions</span><% } %><% if(_.isEqual(item.hasEbook,true)){ %><span class="autosuggest-results-meta-info-item"><%= item.availableEbookText %><% } %><% if(_.isEqual(item.hasInstantAccess,true)){ %><span class="autosuggest-results-meta-info-item"><span class="emphasis">Includes:</span> Free 7-day eTextbook Access</span><% } %></div><% } %></div><div class="autosuggest-result-data"><span class="img-wrapper"><img src="<%= item.img.url %>" alt="<%= item.imgAlt %>"></span><div class="autosuggest-result-bookinfo-sizer"><div class="autosuggest-result-bookinfo"><span class="autosuggest-result-title autocomplete-hdr"><%= item.title %></span><span class="autosuggest-result-author"><%= item.author %></span><span class="autosuggest-result-info"><%= item.isbnText %></span></div></div></div></span></span></span></a></li>'),template.ebook=_.template('<li class="autosuggest-result" data-ii="<%= item.iiCount %>" data-url="<%= item.attributes["data-url"] %>"><a href="<%= item.attributes["data-url"] %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><div class="autosuggest-result-meta"><% if(_.isEqual(item.hasItemPromo,true)){ %><span class="autosuggest-icon-meta"></span><div class="autosuggest-results-meta-info"><% if(_.isEqual(item.hasTBS,true)){ %><span class="autosuggest-results-meta-info-item"><span class="emphasis">Available:</span> Step-by-step Solutions</span><% } %><% if(_.isEqual(item.hasInstantAccess,true)){ %><span class="autosuggest-results-meta-info-item"><span class="emphasis">Includes:</span> Free 7-day eTextbook Access</span><% } %></div><% } %></div><div class="autosuggest-result-data"><span class="autosuggest-icon autosuggest-icon-etextbook-sml"></span><span class="img-wrapper"><img src="<%= item.img.url %>" alt="<%= item.imgAlt %>"></span><div class="autosuggest-result-bookinfo-sizer"><div class="autosuggest-result-bookinfo"><span class="autosuggest-result-title autocomplete-hdr"><%= item.title %></span><span class="autosuggest-result-author"><%= item.author %></span><span class="autosuggest-result-info"><%= item.isbnText %></span></div></div></div></span></span></span></a></li>'),template.dac=_.template('<li class="autosuggest-result" data-ii="<%= item.iiCount %>" data-url="<%= item.attributes["data-url"] %>"><a href="<%= item.attributes["data-url"] %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><div class="autosuggest-result-meta"><% if(_.isEqual(item.hasItemPromo,true)){ %><span class="autosuggest-icon-meta"></span><div class="autosuggest-results-meta-info"><% if(_.isEqual(item.hasTBS,true)){ %><span class="autosuggest-results-meta-info-item"><span class="emphasis">Available:</span> Step-by-step Solutions</span><% } %><% if(_.isEqual(item.hasEbook,true)){ %><span class="autosuggest-results-meta-info-item"><%= item.availableEbookText %><% } %><% if(_.isEqual(item.hasInstantAccess,true)){ %><span class="autosuggest-results-meta-info-item"><span class="emphasis">Includes:</span> Free 7-day eTextbook Access</span><% } %></div><% } %></div><div class="autosuggest-result-data"><span class="autosuggest-icon autosuggest-icon-etextbook-sml"></span><span class="img-wrapper icon-dac"></span><div class="autosuggest-result-bookinfo-sizer"><div class="autosuggest-result-bookinfo"><span class="autosuggest-result-title autocomplete-hdr"><%= item.title %></span><span class="autosuggest-result-author"><%= item.author %></span><span class="autosuggest-result-info"><%= item.isbnText %></span></div></div></div></span></span></span></a></li>'),template.course=_.template('<li class="autosuggest-result autosuggest-result-course" data-ii="<%= item.iiCount %>" data-url="<%= item.attributes["data-url"] %>"><a href="<%= item.attributes["data-url"] %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><div class="autosuggest-result-data"><span class="autosuggest-icon autosuggest-icon-course"></span><div class="autosuggest-result-courseinfo"><span class="autosuggest-result-title autocomplete-hdr"><%= item.title %><span class="small"> at <%= item.attributes["data-schoolName"] %></span></span><span class="autosuggest-result-info"><%= item.subtitle %></span></div></div></span></span></span></a></li>'),template.psycic=_.template('<ul><li class="autosuggest-result autosuggest-result-psycic" data-url="topbooks"><a data-reportLink="Top textbooks" href="/psearch/top-textbooks<% if(_.isNumber(schoolInfo.schoolId)){ %>?schoolId=<%= schoolInfo.schoolId %><% } %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><span class="autosuggest-icon autosuggest-icon-textbook"></span>Top Textbooks<% if(!_.isEmpty(schoolInfo.schoolName)){ %> at <%= schoolInfo.schoolName %><% } %></span></span></span></a></li><li class="autosuggest-result autosuggest-result-psycic" data-url="topebooks"><a data-reportLink="Top eTextbooks" href="/psearch/top-etextbooks<% if(_.isNumber(schoolInfo.schoolId)){ %>?schoolId=<%= schoolInfo.schoolId %><% } %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><span class="autosuggest-icon autosuggest-icon-etextbook"></span>Top eTextbooks<% if(!_.isEmpty(schoolInfo.schoolName)){ %> at <%= schoolInfo.schoolName %><% } %></span></span></span></a></li><li class="autosuggest-result autosuggest-result-psycic" data-url="topsolutions"><a data-reportLink="Top textbook solutions" href="/psearch/top-textbooksolutions<% if(_.isNumber(schoolInfo.schoolId)){ %>?schoolId=<%= schoolInfo.schoolId %><% } %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><span class="autosuggest-icon autosuggest-icon-solution"></span>Top Textbook Solutions<% if(!_.isEmpty(schoolInfo.schoolName)){ %> at <%= schoolInfo.schoolName %><% } %></span></span></span></a></li><li class="autosuggest-result autosuggest-result-psycic" data-url="sell-textbooks"><a data-reportLink="Sell textbooks" href="/sell-textbooks" class="psychic-sell-textbooks"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><span class="autosuggest-icon autosuggest-icon-selltextbooks"></span>Sell your books</span></span></span></a></li></ul>'),template.noresults=_.template('<ul class="autosuggest-no-results"><li class="autosuggest-result autosuggest-result-psycic"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><div class="autosuggest-result-data"><span class="img-wrapper"></span><div class="autosuggest-result-bookinfo-sizer"><div class="autosuggest-result-bookinfo">No Search Results Were Found.</div></div></div></span></span></span></li></ul>'),template.showall=_.template('<div class="autosuggest-morelinks"><ul><li><a href="/search/<% if(!_.isEmpty(schoolInfo.query)){ %><%= schoolInfo.query %><% } %>/books" class="autocomplete-show-more">Search For Books <span>&raquo;</span></a></li><li><a href="/search/<% if(!_.isEmpty(schoolInfo.query)){ %><%= schoolInfo.query %><% } %>/books#p=1&eBook=1" class="autocomplete-show-more">Search For eBooks <span>&raquo;</span></a></li><% if(!_.isEmpty(schoolInfo.schoolName) && _.isNumber(schoolInfo.schoolId)){ %><li><a href="/search/<% if(!_.isEmpty(schoolInfo.query)){ %><%= schoolInfo.query %><% } %>/courses/<%= schoolInfo.schoolName %>#p=1" class="autocomplete-show-more">Search For Courses <span>&raquo;</span></a></li><% } %></ul></div>'),function(t){C("widget"),C.widget.floatingMenu=C.widget._base.extend({construct:function(e){this.opts=t.extend({contentArea:C.dom.$content,fixedClass:null,lastFixTopOffset:0},e),this.elem=e.el.jquery?e.el:t(e.el),this.marginTop=e.marginTop,this.cssPosition=this.elem.css("position"),this.cssTop=this.elem.css("top"),this.cssWidth=this.elem.width(),this.setDiv=t("<div></div>"),this.elem.before(this.setDiv),C.dom.$window.observe("scroll",this.doScroll,this),C.dom.$window.observe("resize",this.doScroll,this),this.doScroll()},doScroll:function(e){var i=this.setDiv.offset().top-this.marginTop,n=t(window).scrollTop();if(n>=i){this.elem.css({visibility:"hidden",position:"fixed",top:this.marginTop,"min-width":this.cssWidth}),this.opts.fixedClass&&this.elem.addClass(this.opts.fixedClass);var s=this.getContentBottom(),o=this.getElemBottom();this.opts.lastFixTopOffset&&o>=this.opts.lastFixTopOffset?this.elem.css({position:this.cssPosition,top:this.cssTop,"min-width":this.cssWidth}):o>=s&&this.elem.css("top",this.marginTop-(o-s)),this.elem.css("visibility","visible")}else this.opts.fixedClass&&this.elem.removeClass(this.opts.fixedClass),this.elem.css({position:this.cssPosition,top:this.cssTop,"min-width":this.cssWidth})},getContentBottom:function(){var t=this.opts.contentArea;return 0===t.length?0:t.offset().top+t.outerHeight()},getElemBottom:function(){return 0===this.elem.length?0:this.elem.offset().top+this.elem.outerHeight()+parseFloat(this.elem.css("margin-bottom").replace("px",""))},destruct:function(){this.setDiv.remove()}})}(jQuery),C("widget"),C.widget.dialog=C.widget._base.extend({construct:function(t){this.opts=$.extend({top:"50",type:"string",content:"",overlay:!0,background:"#000",opacity:.4,overlayClose:!0,resizeClose:!1,successCallback:null,errorCallback:null,showPaging:!1,pageRightCallback:null,pageLeftCallback:null,contentChangeCallback:null,fixed:!0,afterHideCallback:null,afterHideCallbackContext:null,destroyOnClose:!1,noAutoScroll:!1},t),this.$root=C.dom.$root,this.$window=C.dom.$window,this.$root.length&&this.$window.length&&(this.closeDialog=".chg-dialog-close",this.isHidden=!0,this.$body=C.dom.$body||null,this.isResizing=!1,this.overlayZIndex=0,this.createOverlay(),this.createDialog(),this.createPagingButtons(),this.doBind(),this.handlingScroll=!1,this.lastScrollTop=null,this.opts.content.length&&("ajax"==this.opts.type?this.doAjax():"string"==this.opts.type&&this.doString()))},createOverlay:function(){this.overlayZIndex=C.utility.getMaxIndex()+1,this.opts.overlay&&(this.$overlay=$('<div style="position:fixed;top:0;left:0;z-index:-1;" id="overlay-'+this.eventNamespace+'"></div>').appendTo(this.$root).css({background:this.opts.background,opacity:this.opts.opacity}).hide())},createDialog:function(){var t=this.opts.fixed?"fixed":"absolute";this.$dialog=$('<div id="dialog-'+this.eventNamespace+'" class="dialog-widget"></div>').appendTo(this.$root).css({position:t,zIndex:-1,top:"-9999px",left:"-9999px"})},styleDropdown:function(t){t=t||"select",this.$dialog.find(t).chosen({disable_search_threshold:8})},createPagingButtons:function(){this.opts.showPaging&&(this.$pageLeft=this.$pageLeft||$('<div class="dialog-pg-lt-wrap"><button class="dialog-pg-lt" type="button"> </button></div>'),this.$pageRight=this.$pageRight||$('<div class="dialog-pg-rt-wrap"><button class="dialog-pg-rt" type="button"> </button></div>'))},positionPagingButtons:function(){if(this.$dialog&&this.opts.showPaging){var t=this.$dialog.find(".dialog-pg-lt-wrap");if(t.length||(this.$dialog.append(this.$pageLeft),this.$dialog.append(this.$pageRight)),this.$pageLeft&&this.$pageRight)if(this.opts.fixed){var e=$(document),i=e.width(),n=(i-this.$dialog.width())/2,s=+this.$dialog.outerWidth(),o=n-50,r=n+s;this.$pageLeft.css({left:o+"px"}),this.$pageRight.css({left:r+"px"})}else{var a=$(".dialog-pg-lt-wrap"),l=$(".dialog-pg-rt-wrap");a.css({position:"absolute",top:"100px"}),l.css({position:"absolute",top:"100px"}),this.$pageLeft.css({left:"-50px"}),this.$pageRight.css({right:"-50px"})}}},showOverLay:function(t){if(this.$overlay){var e=$(document),i=e.width(),n=e.height();this.$overlay.css({width:i+"px",height:n+"px"}).show(),this.isHidden=!1,t&&this.$overlay.css({zIndex:this.overlayZIndex})}},showDialog:function(){var t=$(document).width(),e=this.overlayZIndex+1,i=this.getDialogTopPositionVal(),n=this;this.$dialog.css({top:i+"px",left:(t-n.$dialog.width())/2+"px",zIndex:e}),this.opts.fixed&&this.setMaxDialogContentHeight(),this.$dialog.show(),this.showOverLay(1),this.isHidden=!1},applySizeChangeAfterHide:function(){var t=$(document),e=t.width(),i=t.height(),n;this.$overlay.css({width:e+"px",height:i+"px"});var n=this.overlayZIndex+1,s=this.getDialogTopPositionVal();this.$dialog.css({zIndex:n});var o=this;this.$dialog.css({top:s+"px",left:(e-o.$dialog.width())/2+"px"}),this.opts.fixed&&this.setMaxDialogContentHeight(),this.positionPagingButtons()},getDialogTopPositionVal:function(){var t=parseInt(this.opts.top,10);return this.opts.fixed||(t+=parseInt(C.dom.$window.scrollTop(),10)),t},handleResize:function(){if(this.$dialog&&!this.isResizing){if(this.isResizing=!0,this.opts.resizeClose)return this.hideDialog(),this.hideOverlay(),void this.applySizeChangeAfterHide();!this.$overlay&&this.opts.overlay&&this.createOverlay(),this.$dialog||this.createDialog(),this.isHidden?this.applySizeChangeAfterHide():this.showDialog(),
this.positionPagingButtons(),this.isResizing=!1}},setMaxDialogContentHeight:function(){if(this.$dialog){var t=this.$dialog.find(".dialog-hdr"),e=this.$dialog.find(".dialog-ftr"),i=this.$dialog.find(".dialog-content"),n=+t.outerHeight(),s=+e.outerHeight(),o=$(window).height()-2*+this.opts.top-n-s,r=this.opts.noAutoScroll?"":"auto";i.css({"max-height":o+"px","overflow-y":r})}},doBind:function(){this.$dialog.observe("click",this.closeDialog,this.fireClose,this),this.opts.overlayClose&&this.$overlay.observe("click",this.hide,this),this.$window.observe("resize",this.handleResize,this),this.$window.observe("scroll",this.pagerButtonsHandleScroll,this),this.opts.showPaging&&(this.$pageLeft.observe("click",this.handlePageLeft,this),this.$pageRight.observe("click",this.handlePageRight,this),this.$body&&this.$body.observe("keyup",this.pagingKeyUp,this),C.support.touch&&this.$dialog.observe("touchend",function(t){this.isHidden||(C.support.util.slideLeft?(this.handlePageRight(),t.preventDefault(),t.stopPropagation()):C.support.util.slideRight&&(this.handlePageLeft(),t.preventDefault(),t.stopPropagation()))},this))},pagerButtonsHandleScroll:function(){!this.opts.showPaging||this.handlingScroll||this.opts.fixed||(this.handlingScroll=!0,setTimeout($.proxy(function(){var t=$(".dialog-pg-lt-wrap"),e=$(".dialog-pg-rt-wrap"),i=parseInt(t.css("top")),n=parseInt(this.$dialog.css("top"),10),s=C.dom.$body.scrollTop()-n,o=this.$dialog.outerHeight(),r=o-n-100,a;if(200>o)return void(this.handlingScroll=!1);a=this.lastScrollTop&&s<this.lastScrollTop?i-s:i+s,a>r&&(a=r),(100>a||C.dom.$body.scrollTop()<n)&&(a=100),this.lastScrollTop=a,t.animate({top:a+"px"},250),e.animate({top:a+"px"},250);var l=this;setTimeout(function(){l.handlingScroll=!1},300)},this),1e3))},pagingKeyUp:function(t){if(!this.isHidden&&this.$dialog){var e=$(":focus"),i=this.$dialog.find(".mceIframeContainer");if(!i.length&&!e.is("textarea, input")){var n=t.which;return 39===n&&this.handlePageRight(),37===n&&this.handlePageLeft(),!1}}},handlePageRight:function(){this.opts.pageRightCallback()},handlePageLeft:function(){this.opts.pageLeftCallback()},disablePaging:function(){this.disablePageLeft(),this.disablePageRight()},disablePageLeft:function(){this.$pageLeft&&(this.$pageLeft.find(".dialog-pg-lt").attr("disabled","disabled"),this.$pageLeft.off("click"))},disablePageRight:function(){this.$pageRight&&(this.$pageLeft.find(".dialog-pg-rt").attr("disabled","disabled"),this.$pageRight.off("click"))},show:function(){if(this.opts.overlay&&(this.$overlay||this.createOverlay(),this.$overlay.show()),this.$dialog||this.createDialog(),!this.opts.fixed){var t=this.getDialogTopPositionVal(),e=this;this.$dialog.css({top:t+"px"})}this.$dialog.show(),this.isHidden=!1},fireClose:function(t){t&&t.preventDefault(),this.opts.destroyOnClose?this.destroy():(this.hide(),C.dom.$body.trigger("hideModerator"))},hide:function(){this.hideOverlay(),this.hideDialog(),this.opts.afterHideCallback&&(this.opts.afterHideCallbackContext?this.opts.afterHideCallback.call(this.opts.afterHideCallbackContext):this.opts.afterHideCallback())},hideOverlay:function(){this.$overlay.hide()},getHiddenValue:function(){return this.isHidden},hideDialog:function(){this.$dialog.hide(),this.isHidden=!0},remove:function(){this.$dialog&&this.$dialog.remove(),this.$overlay&&this.$overlay.remove()},doAjax:function(){this.$dialog.css({"min-width":"600px"}),this.showLoader(),$.ajax({url:this.opts.content,context:this,success:this.onAjaxSuccess,error:this.onAjaxError})},showLoader:function(){this.populateDialog('<canvas class="chg-dialog-spinner" width="40" height="40"><div class="chg-dialog-spinner-fallback"></div></canvas>'),this.showDialog(),new C.widget.spinner({canvas:".chg-dialog-spinner",color:"#ffffff",spokes:15,thickness:3})},onAjaxSuccess:function(t){this.showLoader(),this.populateDialog(t),this.opts.successCallback&&this.opts.successCallback()},populateDialog:function(t){this.$dialog&&("string"==typeof t?this.$dialog.html(t):(this.$dialog.empty(),this.$dialog.append(t)),this.opts.showPaging&&this.positionPagingButtons(),this.setMaxDialogContentHeight(),this.onDialogContentChange())},doString:function(){this.populateDialog(this.opts.content),this.showDialog()},onAjaxError:function(){this.opts.errorCallback&&this.opts.errorCallback()},onDialogContentChange:function(){"function"==typeof this.opts.onContentChange&&this.opts.contentChangeCallback()},destruct:function(){C.log("dialog:destruct"),this.$overlay.remove(),this.$dialog.remove()}}),C("widget"),C.widget.popup=C.widget._base.extend({construct:function(t){var e={color:"#fff",borderRadius:"5px",background:"rgba(0,0,0,0.8)",shadow:"rgba(0,0,0,0.25)",borderColor:"transparent"};t&&t.opacity&&"number"==typeof t.opacity&&t.opacity<=1&&(e.background="rgba(0,0,0,"+t.opacity+")"),t&&t.template&&("gray"==t.template?e={color:"#333",borderRadius:"5px",background:"rgba(230,230,230,1)",shadow:"rgba(0,0,0,0.25)",borderColor:"transparent"}:"white"==t.template?e={color:"#000",borderRadius:"5px",background:"#fff",shadow:"rgba(0,0,0,0.25)",borderColor:"transparent"}:"header"==t.template?e={color:"#666",borderRadius:"0",background:"white",shadow:"rgba(0,0,0,0.25)",borderColor:"#f07d00"}:"headerGray"==t.template&&(e={color:"#666",borderRadius:"0",background:"#f5f5f5",shadow:"rgba(0,0,0,0.25)",borderColor:"#f07d00"})),this.opts=$.extend({className:"popup-widget",padding:"15px",side:"right",width:"auto",height:"auto",margin:5,overhang:15,pointerEdgePadding:15,pointerSize:10,content:"attr",attr:"title",trigger:"hover",template:null,url:"",method:"get",autoCenter:!1,showDelay:0,hideTimeout:500,resizeClose:!1,needFlush:!0,centerContent:!1,animation:!1},e,t),C.support.rgba||(this.opts.color=C.utility.rgba2rgb(this.opts.color),this.opts.background=C.utility.rgba2rgb(this.opts.background),this.opts.shadow=C.utility.rgba2rgb(this.opts.shadow)),this.delayTimer=null,this.hideTimer=null,this.isShowed=!1,this.$el=t.el.jquery?t.el:$(t.el),this.$parentHeaderSelector=this.$el.closest(".chg-header, .chg-hdr-root"),this.isHeaderChild=this.$parentHeaderSelector&&this.$parentHeaderSelector.length,this.$appendTarget=this.isHeaderChild?C.dom.$headerRoot:C.dom.$content,this.createPopup(),this.doBind(),this.opts.needFlush||this.$container.html(this.opts.content),this.opts.centerContent&&this.$container.css("text-align","center")},setContent:function(t){this.$container.html(t)},destruct:function(){clearTimeout(this.delayTimer),clearTimeout(this.hideTimer),this.$container.length&&this.$container.remove()},createPopup:function(){this.$container=this.$container||$('<div id="popup-'+this.instanceNumber+'"><div></div></div>').appendTo(this.$appendTarget).children().css({position:"absolute","border-radius":this.opts.borderRadius,"background-color":this.opts.background,padding:this.opts.padding,color:this.opts.color,width:this.opts.width,"z-index":-1,visibility:"hidden",border:"1px solid "+this.opts.borderColor});var t={top:0,right:1,bottom:2,left:3};if("transparent"==this.opts.borderColor){var e=["transparent","transparent","transparent","transparent"];e[t[this.opts.side]]=this.opts.background;var i=[this.opts.pointerSize-1,this.opts.pointerSize-1,this.opts.pointerSize-1,this.opts.pointerSize-1];i[t[this.opts.side]]=this.opts.pointerSize;var n={width:0,height:0,position:"absolute",borderColor:e.join(" "),borderStyle:"solid",borderWidth:i.join("px ")+"px"};this.$pointer=$("<div></div>").css(n),this.$innerPointer=$("<div></div>")}else{var e=["transparent","transparent","transparent","transparent"];e[t[this.opts.side]]=this.opts.borderColor;var n={width:0,height:0,position:"absolute",borderColor:e.join(" "),borderStyle:"solid",borderWidth:this.opts.pointerSize};this.$pointer=$("<div></div>").css(n),e=["transparent","transparent","transparent","transparent"],e[t[this.opts.side]]=this.opts.background,n={width:0,height:0,position:"absolute",top:-this.opts.pointerSize+2,left:-this.opts.pointerSize+1,borderColor:e.join(" "),borderStyle:"solid",borderWidth:this.opts.pointerSize-1},this.$innerPointer=$("<div></div>").css(n)}},doBind:function(){"hover"==this.opts.trigger?(this.$el.observe({mouseover:this.toggleContainer,mouseout:this.hidePopup},this),this.$container.observe({mouseover:this.holdContainer,mouseout:this.hidePopup},this)):"click"==this.opts.trigger&&(C.dom.$body.observe({click:this.toggleContainer},this.opts.el,this),this.outsideClickEventHandler||(this.outsideClickEventHandler=$("a,div,span,html").on("click",$.proxy(function(){(0==$(".popup-widget:hover").length||$(".popup-widget").find("a:hover").length>0)&&this.isShowed&&this.hidePopup()},this)))),this.opts.resizeClose&&C.dom.$window.observe("resize",this.hidePopup,this)},holdContainer:function(){clearTimeout(this.hideTimer)},toggleContainer:function(t){if(clearTimeout(this.hideTimer),this.isShowed)this.hidePopup();else{var e=this.opts.el.jquery?this.opts.el:$(this.opts.el),i=this.opts.getData?this.opts.getData.call(this,e):this.getData(e),n=this;i&&i.length&&(this.delayTimer=setTimeout(function(){n.showPopup(e,i)},this.opts.showDelay))}},hidePopup:function(){clearTimeout(this.delayTimer),clearTimeout(this.hideTimer);var t=this;this.hideTimer=setTimeout(function(){t.opts.animation?t.$container.show().fadeOut(function(){t.$container.css({zIndex:-1,visibility:"hidden"})}):t.$container.css({zIndex:-1,visibility:"hidden"})},this.opts.hideTimeout),this.isShowed=!1,$(this.opts.el).removeClass("pop-active")},getData:function(t){var e=this;return"attr"==this.opts.content?"title"==this.opts.attr?(this.title||(this.title=t.attr(this.opts.attr),t.removeAttr(this.opts.attr)),this.title):t.attr(this.opts.attr):"ajax"!=this.opts.content?this.opts.content:void $.ajax({url:this.opts.url,method:this.opts.method,success:function(i){e.showPopup(t,i)}})},positionPopup:function(t){var e=t.position(),i,n,s,o,r,a;this.isHeaderChild&&(e=t.position()),"top"==this.opts.side?this.opts.autoCenter?(i=t.outerWidth(),n=t.outerHeight(),r=this.$container.outerWidth(),a=this.$container.outerHeight(),s={top:e.top-a-this.opts.pointerSize-this.opts.margin,left:e.left+i/2-r/2,"box-shadow":"2px -2px 2px "+this.opts.shadow},o={bottom:-2*this.opts.pointerSize,left:r/2-this.opts.pointerSize}):(s={top:e.top-this.$container.outerHeight()-this.opts.pointerSize-this.opts.margin,left:e.left-this.opts.overhang,"box-shadow":"2px -2px 2px "+this.opts.shadow},o={bottom:-2*this.opts.pointerSize,left:this.opts.pointerEdgePadding}):"left"==this.opts.side?this.opts.autoCenter?(i=t.outerWidth(),n=t.outerHeight(),r=this.$container.outerWidth(),a=this.$container.outerHeight(),s={top:e.top+n/2-a/2,left:e.left-r-this.opts.pointerSize-this.opts.margin},o={right:-2*this.opts.pointerSize,top:a/2-this.opts.pointerSize}):(s={top:e.top-this.opts.overhang,left:e.left-this.$container.outerWidth()-this.opts.pointerSize-this.opts.margin},o={right:-2*this.opts.pointerSize,top:this.opts.pointerEdgePadding}):"right"==this.opts.side?this.opts.autoCenter?(i=t.outerWidth(),n=t.outerHeight(),r=this.$container.outerWidth(),a=this.$container.outerHeight(),s={top:e.top+n/2-a/2,left:e.left+i+this.opts.pointerSize+this.opts.margin},o={left:-2*this.opts.pointerSize,top:a/2-this.opts.pointerSize}):(s={top:e.top-this.opts.overhang,left:e.left+t.outerWidth()+this.opts.pointerSize+this.opts.margin},o={left:-2*this.opts.pointerSize,top:this.opts.pointerEdgePadding}):"bottom"==this.opts.side&&(this.opts.autoCenter?(i=t.outerWidth(),n=t.outerHeight(),r=this.$container.outerWidth(),a=this.$container.outerHeight(),s={top:e.top+n+this.opts.pointerSize+this.opts.margin,left:e.left+i/2-r/2,"box-shadow":"2px 2px 2px "+this.opts.shadow},o={top:-2*this.opts.pointerSize,left:r/2-this.opts.pointerSize}):(s={top:e.top+t.outerHeight()+this.opts.pointerSize+this.opts.margin,left:e.left-this.opts.overhang,"box-shadow":"0 2px 2px "+this.opts.shadow},o={top:-2*this.opts.pointerSize,left:this.opts.pointerEdgePadding})),this.$container.css(s),this.$pointer.css(o),this.$container.addClass(this.opts.className)},showPopup:function(t,e){e&&e.length&&(this.opts.needFlush&&this.$container.html(e),this.opts.positionCallback?this.opts.positionCallback.call(this,t):this.positionPopup(t),this.opts.afterInsertCallback&&this.opts.afterInsertCallback.call(this,t,this.$container),this.$container.append(this.$pointer.append(this.$innerPointer)).css({zIndex:this.opts.zIndex||C.utility.getMaxIndex()+1,visibility:"visible"}),this.opts.animation&&this.$container.hide().fadeIn(),this.isShowed=!0,$(this.opts.el).addClass("pop-active"))},fadeIn:function(){}}),C("ever"),C.ever.kv={},C.ever.set=function(t,e){void 0!==e&&"undefined"!==e&&(e=$.trim(e),C.ever.setWindow(t,e),C.ever.setLocal(t,e),C.ever.setCookie(t,e),C.ever.kv[t]=e)},C.ever.get=function(t){var e;return e=e||C.ever.getWindow(t),e=e||C.ever.getLocal(t),e=e||C.ever.getCookie(t),e=e||C.ever.kv[t],C.ever.set(t,e),$.trim(e)},C.ever.setCookie=function(t,e){var i=C.global&&C.global.cookieDomain?";domain="+C.global.cookieDomain:"";document.cookie=t+"=; expires=Mon, 20 Sep 2010 00:00:00 UTC; path=/"+i,document.cookie=t+"="+e+"; expires=Tue, 31 Dec 2050 00:00:00 UTC; path=/"+i},C.ever.getCookie=function(t){return C.ever.getFromSerializedString(document.cookie,";",t,1)},C.ever.setWindow=function(t,e){window.name=C.ever.getSetIntoSerializedStringResult(window.name,"&",t,e,1)},C.ever.getWindow=function(t){return window.name?C.ever.getFromSerializedString(window.name,"&",t,1):void 0},C.ever.setLocal=function(t,e){window.localStorage&&window.localStorage.setItem&&localStorage.setItem(t,e)},C.ever.getLocal=function(t){return window.localStorage&&window.localStorage.getItem?localStorage.getItem(t):void 0},C.ever.getSetIntoSerializedStringResult=function(t,e,i,n,s){if(i+="=",!t.length)return i+(s?escape(n):n);var o=0;t=t.split(e);for(var r=0;r<t.length;r++)0===t[r].indexOf(i)&&(t[r]=i+(s?escape(n):n),o=1);return o||t.push(i+(s?escape(n):n)),t.join(e)},C.ever.getFromSerializedString=function(t,e,i,n){t=t.split(e),i+="=";for(var s=0;s<t.length;s++)if(0===$.trim(t[s]).indexOf(i))return $.trim(n?unescape(t[s].replace(i,"")):t[s].replace(i,""))},C.dom.$window.bind("beforeunload",function(){for(var t in C.ever.kv)C.ever.set(t,C.ever.kv[t])}),C("widget"),C.widget.dropmenu=C.widget._base.extend({construct:function(t){this.opts=$.extend({trigger:".drop-menu-trigger",header:""},t),this.setupDropdownMenu(),this.doBaseBind()},destruct:function(){C.dom.$body.unobserve("mousedown."+this.instanceNumber,this),C.dom.$window.unobserve("resize."+this.instanceNumber,this),this.$widget.remove()},setupDropdownMenu:function(){this.$widget=$('<div class="drop-menu-widget"><div class="drop-menu-close"></div><div class="drop-menu-tab"><span>'+this.opts.header+'</span> <b></b></div><div class="drop-menu-content"></div></div>').hide().appendTo(document.body),this.$close=this.$widget.find(".drop-menu-close"),this.$tabText=this.$widget.find(".drop-menu-tab span"),this.$content=this.$widget.find(".drop-menu-content"),this.setContentAndBind&&this.setContentAndBind()},show:function(t,e){this.$widget.css({top:e,left:t-10}).show()},hide:function(){this.$widget.hide()},doBaseBind:function(){C.dom.$body.observe("mousedown."+this.instanceNumber,this.opts.trigger,this.onClickTrigger,this),C.dom.$window.observe("resize."+this.instanceNumber,this.onScrollOrResize,this),this.$close.observe("click",this.hide,this)},onScrollOrResize:function(){var t=this;clearTimeout(this.hideTimer),this.hideTimer=setTimeout(function(){t.hide()},0)},onClickTrigger:function(t){var e=$(t.currentTarget),i=e.offset();this.$curTrigger=e,this.show(i.left,i.top,e),t.preventDefault(),t.stopPropagation(),this.reset&&this.reset(e)}}),C("widget"),C.widget.moderator=C.widget.dropmenu.extend({construct:function(t){this.opts=$.extend({trigger:".abuse-flag",header:"Report abuse",maxDescLength:300},t),this.isMod=$(".content-moderation-view").length,this.setupDropdownMenu(),this.doBaseBind(),this.doBind(),this.reset()},reset:function(t){this.$textarea.val(""),this.$content.find("input:selected").removeAttr("checked").prop("checked",0),this.onTextboxKeyup(),this.$button.removeAttr("disabled","disabled"),this.$reportForm.show(),this.$reportNotice.hide(),this.qid="",this.aid="",this.cid="",this.rid="",this.arid="",t&&t.length&&(this.aid=t.attr("data-answerid")||"",this.qid=t.attr("data-questionid")||"",this.cid=t.attr("data-commentid")||"",this.rid=t.attr("data-ratingid")||"",this.arid=t.attr("data-appratingid")||"")},setContentAndBind:function(){this.$content.html(this.getContent()),this.$textarea=this.$content.find("textarea"),this.$button=this.$content.find("button"),this.$wordsLeft=this.$content.find(".words-left"),this.$form=this.$content.find("form"),this.$reportForm=this.$content.find(".report-form"),this.$reportNotice=this.$content.find(".report-notice")},getContent:function(){var t=this.isMod?"Remove content":"Report Abuse";return'<form onsubmit="return false"><div class="report-reason"><div class="report-form">'+this.getReasons()+'<div class="words-left"></div><textarea name="description" placeholder="Leave a comment (optional)" maxlength="'+this.opts.maxDescLength+'"></textarea><div class="moderator-button"><button class="btn-secondary-dk-mini">'+t+'</button></div></div><div class="report-notice"></div></div></form>'},getReasons:function(){var t={Adult_Or_Inappropriate:"Adult/Inappropriate",Harassment:"Harassment",Spam:"Spam",Solicitation:"Solicitation",Threats_Or_Violence:"Threats/Violence",Other:"Other"},e=function(t){var e="",i="checked",n=0;for(var s in t)"All"!=s&&(e+='<li><input type="radio" '+i+' name="reason" id="reason-'+n+'" value="'+s+'" /><label class="form-radio" for="reason-'+n+'"></label> <label for="reason-'+n+'">'+t[s]+"</label></li>",n++,i="");return"<ul>"+e+"</ul>"};return e(t)},wordsLeft:function(){return this.opts.maxDescLength-this.$textarea.val().length},doBind:function(){this.$button.observe("click",this.onClickSubmit,this),this.$textarea.observe("keyup",this.onTextboxKeyup,this)},onScrollOrResize:function(){var t=this;clearTimeout(this.hideTimer),this.hideTimer=setTimeout(function(){t.hide()},100)},onClickSubmit:function(){var t=this.$widget.find(":checked"),e;if(!t.length)return void alert("Please select a reason");if(this.$button.attr("disabled","disabled"),$.ajax({url:"/_ajax/hwh/moderate/?token="+C.global.csrfToken+"&aid="+this.aid+"&qid="+this.qid+"&cid="+this.cid+"&rid="+this.rid+"&arid="+this.arid+"&reason="+t.val()+"&comment="+encodeURIComponent($.trim(this.$textarea.val())),success:$.proxy(function(){this.$reportForm.hide(),this.$reportNotice.html('<div class="msg-info-dk-sm"><div class="msg-icon"><div class="msg-text">Success</div></div></div>').show()},this),error:$.proxy(function(){this.$reportForm.hide(),this.$reportNotice.html('<div class="msg-info-dk-sm"><div class="msg-icon"><div class="msg-text">We encountered an error. Please try again</div></div></div>').show()},this)}),this.isMod){e=this.$curTrigger.parents(".question, li").find(".content-moderation").first();var i=e.attr("data-type"),n=e.attr("data-id"),s=e.attr("data-extra-id"),o={id:n,type:i,token:C.global.csrfToken};s&&(o.id_extra=s),$.ajax({type:"post",dataType:"json",url:"/_ajax/hwh/delete",data:o,context:this,success:function(){}})}},onTextboxKeyup:function(){this.$wordsLeft.html(this.wordsLeft()+" left")}}),C("utility"),C.utility.profiler=function(){var t=document.location.hostname.indexOf("cheggnet")>0||null!=C.utility.getCookie("logging"),e;return{show:function(){if(t){$(".api-profiler").remove();var i='<div class="api-profiler"><div class="api-profiler-hotspots" onclick="C.utility.profiler.toggleHotspots()">hotspots<br/>OFF</div><div class="api-profiler-timings"><span title="DOM Loading">'+((C.global.domLoading-C.global.navigationStart)/1e3).toFixed(2)+'s</span><br/><span title="DOM Interactive">'+((C.global.domInteractive-C.global.navigationStart)/1e3).toFixed(2)+'s</span><br/></div><div class="api-profiler-more" style="display: none; background-color: white;" onclick="C.utility.profiler.showStack()"></div></div>';$(i).prependTo(".chgg-hdr");var n=function(){if(null===C.global.domComplete)return void(e=setTimeout(n,300));var t=C.global.domComplete-C.global.navigationStart,i='<span title="Total Load Time">'+(t/1e3).toFixed(2)+"s</span><br/>";$(i).appendTo(".api-profiler-timings"),t>0&&2e3>t?$(".api-profiler-timings").css("background-color","#ddffdd"):0==t||t>4500?$(".api-profiler-timings").css("background-color","#ffdddd"):$(".api-profiler-timings").css("background-color","#ffffdd")};n();var s=function(){$.ajax({url:"/_ajax/ajaxApiStack?countOnly=1",type:"post",success:function(t){var e="";if(t){var i=t.experiment.automation?"Automation":"Normal";$(".api-profiler-more").show().html(t.fail+"/"+(t.fail+t.success)+e+"<br/>"+i).css("color",t.fail>0?"#cc0000":"")}}})};s(),setInterval(s,6e4)}},reset:function(){t&&(clearTimeout(e),C.global.navigationStart=null,C.global.domLoading=null,C.global.domInteractive=null,C.global.domComplete=null,$(".api-profiler").html('<div class="api-profiler-timings">loading...</div>'))},showStack:function(){t&&(console.log("Fetching API calls caused by this page load in the last 10 minutes..."),$.ajax({url:"/_ajax/ajaxApiStack",type:"post",success:function(t){console.log(t),C.dom.$window.trigger("apiStackShown",[t])}}))},toggleHotspots:function(){return t?$('.api-profiler-hotspots:contains("ON")').length?($(".api-profiler-hotspots").html("hotspots<br/>OFF"),$(".chg-tracking-label").remove(),$(".chg-tracking-section").removeClass("chg-tracking-section"),void $(".chg-tracking-entity").removeClass("chg-tracking-entity")):void $(".api-profiler-hotspots").html("hotspots<br/>ON"):void 0}}}(),C("logger"),C.logger=function(){var t=function(t,e,i){if(null!==t){var n="http:"===window.location.protocol?C.global.cheggSiteUrl:C.global.cheggSiteSecureUrl;$.ajax({url:n+"_ajax/log",type:"GET",data:{type:t.type,value:JSON.stringify(t),options:i},success:function(){"function"==typeof e&&e()},error:function(e){C.log(t.type+" log failed with error: "+JSON.stringify(e))}})}};return{doEventLog:function(e,i){e.parent_page_url=window.location.href,e.parent_page_timestamp=C.logger.loadTime,e.page_track_id=C.logger.pageTrackId,e.referrer_url=window.location.href,e.destination_url=window.location.href,e.type="event",t(e,i)},doSessionLog:function(e,i,n){e.page_track_id=C.logger.pageTrackId,e.destination_url=window.location.href,e.referrer_url=C.logger.referrer_url,e.type="session",t(e,i,n)}}}(),Eggshell.define("C.common.log",{inputs:["event log","session log"],outputs:["log success","log error"]},Backbone.View.extend({initialize:function(){Eggshell.find(this).on("event log",this.doEventLog),Eggshell.find(this).on("session log",this.doSessionLog)},doEventLog:function(t,e){var i,n,s;C&&C.logger?(i=C.logger.pageTrackId,s=C.logger.loadTime):(i=mChegg.global.pageTrackId,s=null),null!==s&&(e.parent_page_timestamp=s),e.event_uuid="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0,i="x"==t?e:3&e|8;return i.toString(16)}),e.parent_page_url=window.location.href,e.page_track_id=i,e.destination_url=window.location.href,e.referrer_url=window.location.href,e.type="event",this.doLog(e)},doSessionLog:function(t,e){var i,n;C&&C.logger?(i=C.logger.pageTrackId,n=C.logger.referrer_url):(i=mChegg.global.pageTrackId,n=document.referrer),e.page_track_id=i,e.destination_url=window.location.href,e.referrer_url=n,e.type="session",this.doLog(e)},doLog:function(t){$.ajax({url:"/_ajax/log",type:"GET",context:this,data:{type:t.type,value:JSON.stringify(t)},success:function(){Eggshell.find(this).trigger("log success")},error:function(t){Eggshell.find(this).trigger("log error",t)}})}})),C("logs.events"),C.logs.events.common={getOnlyEventName:function(t){return{event_name:t}}},Eggshell.define("C.common.navigation",{inputs:["expand navigation bar","collapse navigation bar","render","refresh left nav","hide group","set left nav type"],outputs:[],singleton:!0,newNode:!1},function(){var t=Backbone.Model.extend({load:function(){$.ajax({url:"/_ajax/navigation",type:"post",dataType:"json",data:{},context:this,success:$.proxy(function(t){this.polishResults(t),this.set("originalResult",t),this.trigger("loaded")},this),error:function(){this.trigger("error")}})},polishResults:function(t){var e=[],i={};$.each(t,function(t,n){"undefined"!=typeof n.group&&null==n.subGroup&&(e.push(n),n.group in i||(i[n.group]=[]))}),$.each(t,function(t,e){"undefined"!=typeof e.group&&null!=e.subGroup&&i[e.group].push(e)}),this.set("groups",e),this.set("subGroups",i)},getSubgroup:function(t){var e=this.get("subGroups");return t in e?e[t]:{}}}),e=Backbone.View.extend({navigationBarCollapsedWidth:50,navigationBarExpandedWidth:210,mainTemplate:_.template('<div class="leftnav"></div>'),linkTemplate:_.template('<%if(link) {%><a href ="<%- link %>" class="<%-classes%>"><% if(newIndicator) { %>	<span class="global-nav-list-new">NEW</span><% } %><%=text%></a><%} else {%><div class="<%-classes%>"><%=text%></div><%}%>'),initialize:function(){this.model=new t,this.setListeners(),this.load()},setListeners:function(){this.model.on("loaded",this.render,this),this.model.on("errored",this.renderError,this),Eggshell.find(this).on("render",this.load,this).on("expand navigation bar",this.expandNavigationBar,this).on("collapse navigation bar",this.collapseNavigationBar,this).on("refresh left nav",this.load,this)},openOverlayLeftNav:function(){var t=C.utility.getMaxIndex()+1;$(".chg-global-nav").css({width:this.navigationBarExpandedWidth+"px","z-index":t+1,"box-shadow":"1px 0px 2px #999",overflow:"hidden"}),$(".chg-global-nav-home").css({opacity:0,visibility:"hidden"}),$(".chg-global-nav-list").css({visibility:"visible",opacity:1}),$(".chg-global-screen-blocker").css({"z-index":t,opacity:.6})},closeOverlayLeftNav:function(){$(".chg-global-nav").css({width:this.navigationBarCollapsedWidth+"px","box-shadow":"none"}),$(".chg-global-nav-home").css({opacity:1,visibility:"visible"}),$(".chg-global-nav-list").css({visibility:"hidden",opacity:0}),$(".chg-global-screen-blocker").css({"z-index":-1,opacity:0})},expandNavigationBar:function(){this.closeOverlayLeftNav(),$(".chg-body").removeClass("chegg-content-nav-collapsed").addClass("chegg-content-nav-expanded"),$(".chg-global-nav").css({width:this.navigationBarExpandedWidth+"px"}),this.$el.find(".chg-global-nav-home").css({opacity:0,visibility:"hidden"}),this.$el.find(".chg-global-nav-list").css({visibility:"visible",opacity:1}),$(".chg-global-content").css("margin-left","210px"),$(".chg-global-nav").off("mouseover").off("mouseleave")},collapseNavigationBar:function(){$(".chg-global-content").css("margin-left","50px"),$(".chg-body").hasClass("chegg-content-nav-collapsed")?this.closeOverlayLeftNav():($(".chg-body").removeClass("chegg-content-nav-expanded").addClass("chegg-content-nav-collapsed"),$(".chg-global-nav").css({width:this.navigationBarCollapsedWidth+"px"}),this.$el.find(".chg-global-nav-home").css({opacity:1,visibility:"visible"}),this.$el.find(".chg-global-nav-list").css({visibility:"hidden",opacity:0})),$(".chg-global-nav").hasClass("chg-global-nav-autosliding")&&($(".chg-global-nav").on("mouseover",$.proxy(function(){$(".chg-body").hasClass("chegg-content-nav-collapsed")&&this.openOverlayLeftNav()},this)),$(".chg-global-nav").on("mouseleave",$.proxy(function(){$(".chg-body").hasClass("chegg-content-nav-collapsed")&&this.closeOverlayLeftNav()},this)))},load:function(){this.model.load()},render:function(){$(".chg-global-nav").append(this.$el),this.$el.html(this.mainTemplate()),this.renderLeftNav()},renderLeftNav:function(){var t=this.model.get("groups");this.$el.find(".leftnav").append('<a class="chg-global-nav-home" href="/">Home</a>'),this.$el.find(".leftnav").append('<div class="chg-global-nav-list"></div>'),this.$el.find(".chg-global-nav-home").css({opacity:0,visibility:"hidden"}),$.each(t,$.proxy(function(t,e){this.renderGroup(e)},this))},renderGroup:function(t){var e=$('<div class="'+t.group.replace(" ","-")+'-item"></div>'),i=this.model.getSubgroup(t.group),n=" chg-global-nav-list-item",s=t.link?t.link:!1,o=t.classes?t.classes:"";e.append(this.linkTemplate({link:s,classes:o+" chg-global-nav-list-section",text:t.group,newIndicator:t.newIndicator})),i.length>0&&(e.append('<div class="'+t.group.replace(" ","-")+'-subgroup-items"></div>'),$.each(i,$.proxy(function(i,s){var o=s.link?s.link:"#",r=s.classes?s.classes+n:n;e.find("."+t.group.replace(" ","-")+"-subgroup-items").append(this.linkTemplate({link:o,classes:r,text:s.subGroup,newIndicator:s.newIndicator}))},this))),this.$el.find(".chg-global-nav-list").append(e)}});return e}()),Eggshell.define("C.global.nav",{inputs:["expand navigation bar","collapse navigation bar","enable fixed header","disable fixed header"],outputs:["returned fixed header content node"],singleton:!0,newNode:!1},function(){var t=C.View.extend({navigationBarCollapsedWidth:50,navigationBarExpandedWidth:210,initialize:function(){this.setNavigationBarTopOffset(0),this.fixPosition(!0),this.collapseNavigationBar(),$(".chg-global-nav a").on("click",function(t){$(".chg-global-nav").off("mouseover"),$(".chg-global-nav").off("mouseleave")}),$(".chg-global-nav a").on("touchstart",function(t){$(".chg-global-nav").off("mouseover"),$(".chg-global-nav").off("mouseleave")}),$(".chg-global-nav a.track-nav-solutions").click(function(t){t.preventDefault(),t.stopPropagation();var e=$(".glass-container .tbs-tab");0!==e.length?e.trigger("click"):Eggshell.create("C.common.tbspopup").trigger("show tbs popup")}).attr("data-noajax","data-noajax").attr("data-noredirect","data-noredirect"),$(".chg-global-nav a.track-nav-qna").click(function(t){t.preventDefault(),t.stopPropagation();var e=$(".glass-container .qna-tab");0!==e.length?e.trigger("click"):C.utility.navigate($(t.target).attr("href"))}).attr("data-noajax","data-noajax").attr("data-noredirect","data-noredirect"),$(".chg-global-nav a.track-nav-live-tutors").click(function(t){t.preventDefault(),t.stopPropagation();var e=$(".glass-container .tutors-tab");0!==e.length?e.trigger("click"):C.global.instaEdu&&C.utility.navigate("/tutors/online-now/Chegg-GPA")}).attr("data-noajax","data-noajax").attr("data-noredirect","data-noredirect")},isNavigationBar:function(){return $(".chg-body").hasClass("no-nav")||0===$(".chg-global-nav-list").length?!1:!0},slideOutNavigationBar:function(){var t=C.utility.getMaxIndex()+1;$(".chg-global-nav").css({width:this.navigationBarExpandedWidth+"px","z-index":t+1,"box-shadow":"1px 0px 2px #999",overflow:"hidden"}),$(".chg-global-nav-home").css({opacity:0,visibility:"hidden"}),$(".chg-global-nav-list").css({visibility:"visible",opacity:1}),$(".chg-global-screen-blocker").css({"z-index":t,opacity:.6})},slideBackNavigationBar:function(){$(".chg-global-nav").css({width:this.navigationBarCollapsedWidth+"px","box-shadow":"none"}),$(".chg-global-nav-home").css({opacity:1,visibility:"visible"}),$(".chg-global-nav-list").css({visibility:"hidden",opacity:0}),$(".chg-global-screen-blocker").css({"z-index":-1,opacity:0})},expandNavigationBar:function(){this.isNavigationBar()&&(this.slideBackNavigationBar(),$(".chg-body").removeClass("chegg-content-nav-collapsed").addClass("chegg-content-nav-expanded"),$(".chg-global-nav").css({width:this.navigationBarExpandedWidth+"px"}),$(".chg-global-nav-home").css({opacity:0,visibility:"hidden"}),$(".chg-global-nav-list").css({visibility:"visible",opacity:1}),$(".chg-global-content").css("margin-left","210px"),$(".chg-global-nav").off("mouseover").off("mouseleave"))},collapseNavigationBar:function(){this.isNavigationBar()&&(0==$(".center-content").length&&$(".chg-global-content").css("margin-left","50px"),$(".chg-body").hasClass("chegg-content-nav-collapsed")?this.slideBackNavigationBar():($(".chg-body").removeClass("chegg-content-nav-expanded").addClass("chegg-content-nav-collapsed"),$(".chg-global-nav").css({width:this.navigationBarCollapsedWidth+"px"}),$(".chg-global-nav-home").css({opacity:1,visibility:"visible"}),$(".chg-global-nav-list").css({visibility:"hidden",opacity:0})),
$(".chg-global-nav").hasClass("chg-global-nav-autosliding")&&($(".chg-global-nav").on("mouseover",$.proxy(function(){$(".chg-body").hasClass("chegg-content-nav-collapsed")&&this.slideOutNavigationBar()},this)),$(".chg-global-nav").on("mouseleave",$.proxy(function(){$(".chg-body").hasClass("chegg-content-nav-collapsed")&&this.slideBackNavigationBar()},this))))},setNavigationBarTopOffset:function(t){$(".chg-global-nav-home").css({top:87+t+"px"}),$(".chg-global-nav-list").css({top:90+t+"px"})},fixPosition:function(t){$(".chg-global-nav, .chg-global-nav-home, .chg-global-nav-list").css(t?{position:"fixed"}:{position:"absolute"})}}),e=C.View.extend({height:100,initialize:function(){this.$globalHeader=$(".chg-header"),this.$fixedHeader=$("<div></div>"),this.scrollDetector=Eggshell.create("C.Eggshell.window.scroll.tracker"),this.fixedHeaderVisibleCallback=this.options.fixedHeaderVisibleCallback,this.render(),Eggshell.immuneToDestroyAll(this.scrollDetector)},render:function(){this.$fixedHeader.addClass("chg-fixed-header").css({height:"0px","z-index":C.utility.getMaxIndex()}).insertAfter($(".chg-header"))},fadeInFixedHeader:function(){this.$fixedHeader.css({height:this.height+"px",position:"fixed",top:"0px"}),this.fixedHeaderVisibleCallback&&"function"==typeof this.fixedHeaderVisibleCallback&&this.fixedHeaderVisibleCallback(this.height)},fadeOutFixedHeader:function(){this.$fixedHeader.css({height:"0px",position:"absolute",top:"50px"}),this.fixedHeaderVisibleCallback&&"function"==typeof this.fixedHeaderVisibleCallback&&this.fixedHeaderVisibleCallback(0)},handleFixedHeaderScrolledEvent:function(){$("body").scrollTop()>=50?this.fadeInFixedHeader():this.fadeOutFixedHeader()},enableFixedHeader:function(t){t?(this.$globalHeader.css({position:"absolute"}),this.scrollDetector.on("scrolled",this.handleFixedHeaderScrolledEvent,this),$("body").scrollTop()>=50&&this.fadeInFixedHeader()):(this.$globalHeader.css({position:"fixed"}),this.fadeOutFixedHeader(),this.scrollDetector.off("scrolled",this.handleFixedHeaderScrolledEvent,this))}});if($(".chg-nav-v2").length>0){this.navigationBar=Eggshell.create("C.common.navigation"),Eggshell.immuneToDestroyAll(this.navigationBar);var i=Eggshell.find(this);Eggshell.connect(i,"expand navigation bar",this.navigationBar,"expand navigation bar").connect(i,"collapse navigation bar",this.navigationBar,"collapse navigation bar")}else this.navigationBar=new t,this.header=new e({fixedHeaderVisibleCallback:$.proxy(function(t){0==t?(this.navigationBar.setNavigationBarTopOffset(0),this.navigationBar.fixPosition(!1)):(this.navigationBar.setNavigationBarTopOffset(t-50),this.navigationBar.fixPosition(!0))},this)}),Eggshell.find(this).on("expand navigation bar",this.navigationBar.expandNavigationBar,this.navigationBar).on("collapse navigation bar",this.navigationBar.collapseNavigationBar,this.navigationBar).on("enable fixed header",function(){this.header.enableFixedHeader(!0),this.navigationBar.fixPosition(!1)}).on("disable fixed header",function(){this.header.enableFixedHeader(!1),this.navigationBar.fixPosition(!0)})}),Eggshell.immuneToDestroyAll(Eggshell.create("C.global.nav")),C("logs.events"),C.logs.events.my=function(){return{onLoad:function(t){return{event_name:"on_load_person_overview",school_id:t.schoolId,question_for_me_ids:t.questions_for_me_ids.join("+"),qa_ids:t.qa_ids.join("+"),notes_ids:t.notes_ids.join("+")}}}}();try{var CRITEO=function(){function t(){return x[0]}function e(){return x[1]}function i(){var t="";return"undefined"!=typeof x[2]&&""!=x[2]&&(t=x[2],"."!=t.charAt(t.length-1)&&(t+=".")),t}function n(){var t=x[3].charAt(0);return"undefined"!=typeof t&&1==t}function s(){var t=x[3].charAt(1);return"undefined"!=typeof t&&1==t}function o(){var t=x[3].charAt(2);return!S&&"undefined"!=typeof t&&1==t}function r(){return x[4]}function a(){return x[5]}function l(){return("https:"==document.location.protocol&&"https:"||"http:")+"//dis."+i()+"criteo.com/dis/dis.aspx"}function c(t){return("https:"==document.location.protocol?"https://sslwidget.":"http://widget.")+"criteo.com/"+e()+"/display.js?resptype="+t+"&"+d()}function u(t,e){switch(t){case"sendEvent":return e[0];case"transaction":return e[1]}}function d(){for(var t="",e=k&&k.length||0,i=r(),n=1,s=0;e>s;s++)for(var o=0;o<i.length;o++)n>1&&(t+="&"),t+=h(k[s],n,i[o]),n++;return t}function h(t,e,i){var n=E[t.pageType];if(n){var s=a(),o="",r="";for(name in s)if(t.hasOwnProperty(name)){var l=s[name][0],c=s[name][1],d=s[name][2],h="";if(h="function"==typeof t[name]?t[name]():t[name])switch(c){case 0:r+="&"+l+"="+h;break;case 1:var g;"string"==typeof h?g=h.split(t.delimiter):"[object Array]"===Object.prototype.toString.apply(h)&&(g=h);var p=g.length;"undefined"!=typeof d&&p>d&&(p=d);for(var f=1;p>=f;f++)r+="&"+l+f+"="+g[f-1];break;case 2:o+="&"+l+"="+encodeURIComponent(h)}}return"t"+e+"="+n.eventType+"&p"+e+"="+encodeURIComponent(n.params+"&wi="+u(n.eventType,i)+r)+o}}function g(){var e=l()+"?p="+t()+"&cb="+Math.floor(99999999999*Math.random());try{e+="&ref="+encodeURIComponent(document.referrer)}catch(i){}try{e+="&sc_r="+encodeURIComponent(screen.width+"x"+screen.height)}catch(i){}try{e+="&sc_d="+encodeURIComponent(screen.colorDepth)}catch(i){}return e.substring(0,2e3)}function p(){var e=l()+"?p="+t();e+="&"+d(),e+="&cb="+Math.floor(99999999999*Math.random());try{e+="&ref="+encodeURIComponent(document.referrer)}catch(i){}try{e+="&sc_r="+encodeURIComponent(screen.width+"x"+screen.height)}catch(i){}try{e+="&sc_d="+encodeURIComponent(screen.colorDepth)}catch(i){}return e.substring(0,2e3)}function f(t){if(window.addEventListener)window.addEventListener("load",t,!1);else if(window.attachEvent)window.attachEvent("onload",t);else{var e=window.onload;window.onload=function(){e&&"undefined"==typeof e.fired&&(e.fired=!0,e()),t()}}}function m(){var t=[];if(n()){if(document.createElement){var e=document.createElement("iframe");e&&(e.width="1px",e.height="1px",e.style.display="none",e.src=p()),t.push(e)}}else{var i=document.createElement("img");i&&(i.width="1px",i.height="1px",i.style.display="none",i.src=c("gif"));var s=document.createElement("iframe");s&&(s.width="1px",s.height="1px",s.style.display="none",s.src=g(),i.onload=function(){b(s)}),t.push(i)}return t}function v(){for(var t=m(),e=0;e<t.length;e++)b(t[e])}function b(t){var e;if(o())e=document.getElementById("cto_mg_div");else{if(e=document.getElementsByTagName("body"),!e||0==e.length)return;e=e[0]}null!=e&&e.appendChild&&e.appendChild(t)}function y(){o()&&document.write("<div id='cto_mg_div' style='display:none;'></div>")}function C(){s()?f(function(){v()}):v()}var w="0.5.2",x,k,$=!1,S=!1,E={home:{eventType:"sendEvent",params:"v=2&pt1=0&pt2=1"},product:{eventType:"sendEvent",params:"v=2&pt1=2"},list:{eventType:"sendEvent",params:"v=2&pt1=3"},basket:{eventType:"transaction",params:"v=2&s=0"},confirmation:{eventType:"transaction",params:"v=2&s=1"},search:{eventType:"sendEvent",params:"v=2&pt1=4"}};return{Load:function(t){"undefined"==typeof CRITEO_CONF||$||($=!0,S=t,x=CRITEO_CONF[1],k=CRITEO_CONF[0],y(),C())}}}()}catch(err){}CRITEO.Load(!0),C("logs.events"),C.logs.events.qa=function(){return{onLoadMyQuestions:function(t){var e=[],i=t.questions_for_me;for(var n in i)e.push(i[n].id);return{event_name:"on_load_my_questions",questions_for_me_ids:e.join("+")}},onLoadTextbooksQA:function(t){var e=[];for(var i in t.questions)e.push(t.questions[i].id);return{event_name:"on_load_textbooks_questions",question_ids:e.join("+"),book_id:t.book_id}},onQuestionClick:function(t,e,i){return{event_name:"on_click_question",pcscrumb:i,qid:t}},onClickAnswer:function(t,e){return{event_name:"on_submit_answer",qid:t}},onSubmitQuestion:function(t,e){var i=t.response;return{event_name:"on_submit_ask_question",question_id:i.id,is_anonymous:i.anonymous,course_id:null!==i.questionCourse?i.questionCourse.id:null}},onClickSeeAllQA:function(){return C.logs.events.common.getOnlyEventName("on_click_see_all_qa")},onClickQuestionsTab:function(t,e,i){var n=[],s="";"asked"==e?s="on_click_asked_questions":"answered"==e&&(s="on_click_answered_questions");for(var o in t)null!==t[o]&&n.push(t[o].id);return{event_name:s,ids:n.join("+")}},onClickHWHSubscribe:function(t,e){var i=t.subscription_type,n="undefined"==typeof e?null:e;return{event_name:"on_click_hwh_subscribe",id:n}},onClickInstantQuestion:function(t){return{event_name:"on_click_instant_question",question_id:t}}}}(),C("logs.events"),C.logs.events.books=function(){return{onClickSeeAllBooks:function(){return C.logs.events.common.getOnlyEventName("on_click_see_all_books")},onClickAddBooks:function(){return C.logs.events.common.getOnlyEventName("on_click_add_books")},onLoadCoursesBooks:function(t){return{event_name:"on_load_courses_books",required_isbns:t.required.join("+"),recommended_isbns:t.recommended.join("+")}},onToggleCheckBoxForCart:function(t){var e=$(t).is(":checked"),i=$(t).attr("id").split("include")[1];return e?{event_name:"on_check_book_for_add_to_cart",isbn:i}:{event_name:"on_uncheck_book_for_add_to_cart",isbn:i}},onClickAddToCart:function(t){return{event_name:"on_add_to_cart",isbns:t.isbns.join("+"),list_price:t.list_price,total_price:t.total_price}},onLoadPersonBooks:function(t){var e=t.userBooks,i=t.orderedBooks,n=[],s=[];if(null!=e)for(var o in e)if(e[o].no)for(var r in e[o].no)n.push(e[o].no[r]);if(null!=i)for(var o in i)i[o]&&s.push(i[o].ean);return{event_name:"on_load_person_books",books_for_me_ids:n.join("+"),books_i_have_ids:s.join("+")}}}}(),C("logs.events"),C.logs.events.notes=function(){return{onClickSeeAllNotes:function(){return C.logs.events.common.getOnlyEventName("on_click_see_all_notes")}}}(),C("logs.events"),C.logs.events.course=function(){var t=function(t){return{event_name:t,schPrefix:this.schPrefix,schoolId:this.schoolId,subjCode:this.subjCode,subject:this.subject,term:this.term,year:this.year}};return{onLoadCoursesCourse:function(t){return{event_name:"on_load_courses_course",question_ids:t.questionIds.join("+"),review_ids:t.reviewIds.join("+"),is_planned:t.statusInfo.is_planned?1:0,is_rated:t.statusInfo.is_rated?1:0,current_term:t.studentInfo.term,student_count:t.studentInfo.count}},onClickIAmInThisCourse:function(e){return t.call(e,"on_click_i_am_in_this_course")},onClickRateThisCourse:function(e){return t.call(e,"on_click_rate_this_course")},onClickSeeAllInfoReviews:function(){return C.logs.events.common.getOnlyEventName("on_click_see_all_info_reviews")},onClickSeeAllStudents:function(){return C.logs.events.common.getOnlyEventName("on_click_see_all_students")},onClickWriteReview:function(){return C.logs.events.common.getOnlyEventName("on_click_write_a_review")},onSubmitRateCourse:function(t){return{event_name:"on_submit_rate_course",school:t.school,subject:t.subject,code:t.code,rating:t.currentRating,grade:t.currentGrade,year:t.currentYear,term:t.currentTerm}},onLoadCoursesQuestions:function(t){return{event_name:"on_load_courses_questions",school_id:t.course.schoolId,course_number:t.course.catalogNumber,subject_code:t.course.subjectCode,year:t.course.academicYear}}}}(),C("logs.events"),C.logs.events.schedule=function(){return{onLoadSuccess:function(t){var e=[];for(var i in t.courses){var n={term:t.courses[i].academicTerm,year:t.courses[i].academicYear,catalogNumber:t.courses[i].catalogNumber,subjectCode:t.courses[i].subjectCode,schoolId:t.courses[i].schoolId};e.push(n)}return{event_name:"on_load_person_schedule",course_info:JSON.stringify(e)}},onClickAddCourse:function(t){return{event_name:"on_click_add_course",catalog_number:t.code,school_id:t.school,subject:t.subject,term:t.term,year:t.year}}}}(),C("logs.events"),C.logs.events.home=function(){var t=function(t){var e=[];if(null!==t)for(var i in t){var n=i,s=[];for(var o in t[i].books)s.push(t[i].books[o].isbn);e.push({info:n,isbns:s.join("+")})}return e};return{onLoad:function(e){return{event_name:"on_load_home",courses_info:JSON.stringify(t(e.courses)),school_name:e.user_info.school,school_id:e.user_info.schoolId,term:e.user_info.term,year:e.user_info.year}},onSubmitAddRemoveCourse:function(t,e){return{event_name:"add"==e?"on_submit_add_course":"on_submit_remove_course",subject:t.subject,code:t.code,term:t.term,year:t.year,school:t.school}},OnHoverCourseItem:function(t,e){var i={event_name:"info"==e?"on_hover_course_info":"on_hover_course_book",year:t.year,term:t.term,code:t.code,subject:t.subject};return"book"==e?$.extend(i,{isbn:t.isbn}):i},onClickInfoLink:function(t,e){return{event_name:e,id:t}},onClickSeeMoreCourses:function(t){return{event_name:"on_click_see_course_info",school:t.school,subject:t.subject,code:t.code}}}}(),C("logs.events"),C.logs.events.solution=function(){return{onLoadBookSolutions:function(t){return{event_name:"on_load_books_solution",isbn:t.isbn,problem_id:t.vmJson.problemId,solution_id:t.vmJson.solutionId}},onClickHWHSubscribe:function(t,e){return{event_name:"on_click_HWH_subscribe",isbn:t,solution_id:e}}}}(),C("tou"),C.tou.model=C.Model.extend({objName:"C.tou.model",initialize:function(){},fetch:function(){var t="/_ajax/tou";$.ajax({context:this,type:"post",dataType:"json",url:t,success:function(t){this.set({version:t.version}),this.trigger("fetch:success")}})},submit:function(){var t="/_ajax/tou/accept",e={token:C.global.csrfToken};$.ajax({context:this,type:"post",dataType:"json",url:t,data:e,success:function(t){this.trigger("submit:success")}})}}),C.tou.view=C.View.extend({objName:"C.tou.view",events:{},initialize:function(){this.model.on("destroy",this.destroy,this),this.model.on("submit:success",this.destroy,this),this.model.on("fetch:success",this.render,this)},render:function(){if($("div.dialog-widget").length>0&&$("div.tou").length>0)return C.log("tou found"),!0;var t=this.model.toJSON().version;return this.termsDialog=Eggshell.create("C.common.dialog"),this.termsDialog.trigger("set headline","Terms of Use and Privacy Policy").trigger("hide sub headline").trigger("hide icon").trigger("hide close button",!0).trigger("disable screen blocker click").trigger("enable default control").trigger("set primary button","I accept").trigger("set secondary button","I do not accept").trigger("set content html",'<div class="placeholder-content">'+t+"</div>").on("primary button clicked",$.proxy(function(){this.model.submit()},this)).on("secondary button clicked",$.proxy(function(){this.termsDialog.trigger("hide"),this.destroy(),this.onClickLogout()},this)),this.showDialog(),this},destroy:function(){this.remove(),this.termsDialog.trigger("hide")},showDialog:function(){this.termsDialog.trigger("show")},onClickLogout:function(t){t&&t.preventDefault();var e="/signout?token="+C.global.csrfToken;window.location.href=e}}),Eggshell.define("C.common.beacon",{inputs:["enable","disable","send beacon request"],outputs:[],singleton:!0},C.Model.extend({enabled:!0,queue:[],locked:!1,initialize:function(){Eggshell.find(this).on("send beacon request",this.add,this).on("enabled",this.enable).on("disable",this.disable)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},fire:function(){if(this.locked!==!0&&0!==this.queue.length){this.locked=!0;var t=this.queue.shift();return 1!=C.global.beacon?(this.locked=!1,void this.fire()):void $.cjax({context:this,url:"/_ajax/odin",dataType:"json",type:"POST",cache:!1,data:{url:"/v1/stream-event",method:"POST",token:C.global.csrfToken,payload:JSON.stringify({impressionId:t.impressionId,eventTargetId:t.eventTargetId,eventType:t.eventType,tracker:C.utility.dataLogger()})},always:function(){this.locked=!1,this.fire()}})}},add:function(t,e){if("undefined"==typeof e||null===e)throw"Empty payload";if(!e.impressionId)throw"Empty impression id";if(!e.eventTargetId)throw"Empty event target id";if(!e.eventType)throw"Empty event type";this.queue.push($.extend({},e)),this.fire()}})),Eggshell.define("C.Eggshell.tabs",{inputs:["build tabs"],outputs:["tab switch"],newNode:!1},Backbone.View.extend({counter:0,firstel:0,loadFlag:!1,initialize:function(t){this.loadFlag=!0,this.options=$.extend({activeTabIsLink:!1,useAlwaysHash:!1,needHashTag:!0},t),Eggshell.find(this).on("build tabs",this.buildTabs).on("view tab",this.activateTab)},events:{"click .tab-nav":"switchTab"},generateUniqueId:function(){var t=this.$el.attr("id");return t+"-"+this.counter++},activateTab:function(t,e){this.$(".tab-nav[data-anchor="+e+"]").click()},switchTab:function(t){var e=$(t.target);if(void 0===$(t.target).attr("data-anchor")&&void 0!==$(t.target).parents(".tab-nav").attr("data-anchor")&&(e=$(t.target).parents(".tab-nav")),e.hasClass("selected")&&!this.options.activeTabIsLink)return!1;this.loadFlag=!1,this.$(".tab-nav").removeClass("selected"),this.$(".tab-content").removeClass("selected");var i=e.attr("id");return e.addClass("selected"),this.$("#"+i+"-content").addClass("selected"),this.options.needHashTag&&(window.location.hash=i!=this.firstel||this.options.useAlwaysHash?e.attr("data-anchor"):""),this.Eggshell.trigger("tab switch",{type:e.attr("data-anchor"),id:i}),!0},buildTabs:function(){for(var t="",e=this.$(".tab-nav"),i=this.$(".tab-content"),n=0;n<e.length;n++){var s=$(e.get(n)),o=$(i.get(n)),r=this.generateUniqueId();s.attr("id",r),o.attr("id",r+"-content");var a=s.attr("data-anchor");("undefined"==typeof a||a===!1)&&s.attr("data-anchor",r+"-anchor"),window.location.hash=="#"+s.attr("data-anchor")&&(t=s)}this.firstel=$(e.get(0)).attr("id"),""==t?this.loadFlag||$(e.get(0)).click():$(t).click()}})),Eggshell.define("C.Eggshell.window.resize.tracker",{inputs:{"trigger resize":{payload:null}},outputs:["resize"],singleton:!0},function(){this.resize=function(){var t=$(window).width(),e=$(window).height();this.viewportWidth&&this.viewportHeight&&this.viewportWidth==t&&this.viewportHeight==e||(this.viewportWidth=t,this.viewportHeight=e,this.Eggshell.trigger("resize",{width:t,height:e}))},$(window).on("resize",$.proxy(function(t){this.resize()},this)),Eggshell.find(this).on("trigger resize",function(){this.resize()},this)}),C.resource.add("C.Eggshell.dialog.close.title","Close"),Eggshell.define("C.Eggshell.dialog",{inputs:["set id","set headline","allow child overflow","set sub headline","set icon","set icon size","set content html","set content component","get content area","destroy content","set control","get control area","show","hide","show headline","hide headline","show sub headline","hide sub headline","show icon","hide icon","enable default control","show control","set primary button","set secondary button","set link","show primary button","hide primary button","disable primary button","enable primary button","show secondary button","hide secondary button","disable secondary button","enable secondary button","show link","hide link","hide control","enable screen blocker click","disable screen blocker click","disable default padding"],outputs:["content component created","content area","control component created","control area","shown","hidden","headline clicked","sub headline clicked","icon clicked","close button clicked","screen blocker clicked","primary button clicked","secondary button clicked","link clicked","content clicked"]},C.View.extend({componentNS:null,controlNS:null,template:_.template('<div class="dialog"><div class="header"><div class="close" title="<%- closeTitle %>"></div><div class="icon"></div><h3 class="headline"></h3><p class="subHeadline"></p></div><div class="content"></div><div class="control disabled"></div></div><div class="screenBlocker"></div>'),initialize:function(t){console.log("This component will be deprecated.  Instead use C.commom.dialog"),this.render(),this.setuplistens(),this.Eggshell.on("destroy",this.destroy)},destroy:function(){this.hide(),this.destroyContent(),this.destroyControl()},render:function(){this.$el.empty(),this.$el.html(this.template({closeTitle:C.resource.fetch("C.Eggshell.dialog.close.title")})),this.$el.hide(),this.$(".screenBlocker").css("z-index",C.utility.getMaxIndex()),this.$(".dialog").css("z-index",C.utility.getMaxIndex()+1)},events:{"click .close":"closeOnClick","click .screenBlocker":"screenBlockerOnClick","click .headline":"headlineOnClick","click .subHeadline":"subHeadlineOnClick","click .icon":"iconOnClick","click .content":"contentOnClick"},setuplistens:function(){this.Eggshell.on("set id",function(t,e){if(!e&&"id"!=typeof e)throw"Invalid id";this.$(".dialog").attr("id",e)}).on("set headline",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid headline";this.$(".headline").html(e)}).on("allow child overflow",function(){this.$(".dialog").addClass("overflowed")}).on("set sub headline",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid sub headline";this.$(".subHeadline").html(e)}).on("set icon",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid icon class name";this.$(".icon").addClass(e)}).on("set icon size",function(t,e){if(!e||"string"!=typeof e||"small"!==e&&"large"!==e)throw"Invalid icon size";this.$(".icon").removeClass("small").removeClass("large"),this.$(".icon").addClass(e)}).on("set content html",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid content html";this.destroyContent(),this.$(".content").html(e)}).on("set content component",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid content component constructor";this.destroyContent(),this.componentNS=Eggshell.create(e,$.extend({},this.$(".content"))),this.Eggshell.trigger("content component created",this.componentNS)}).on("get content area",function(t,e){this.Eggshell.trigger("content area",$.extend({},this.$(".content")))}).on("destroy content",function(t,e){this.destroyContent()}).on("set control",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid control constructor";this.destroyControl(),this.controlNS=Eggshell.create(e,{el:$.extend({},this.$(".control"))}),this.$(".control").show().removeClass("disabled"),this.Eggshell.trigger("control component created",this.controlNS)}).on("get control area",function(t,e){this.Eggshell.trigger("control area",$.extend({},this.$(".control")))}).on("show",function(){this.show()}).on("hide",function(){this.hide()}).on("show headline",function(t,e){this.$(".headline").show()}).on("hide headline",function(t,e){this.$(".headline").hide()}).on("show sub headline",function(t,e){this.$(".subHeadline").show()}).on("hide sub headline",function(t,e){this.$(".subHeadline").hide()}).on("show icon",function(t,e){this.$(".icon").show()}).on("hide icon",function(t,e){this.$(".icon").hide()}).on("show control",function(t,e){this.$(".control").show().removeClass("disabled")}).on("hide control",function(t,e){this.$(".control").hide().addClass("disabled")}).on("disable screen blocker click",function(t,e){this.screenBlockerClickEnabled=!1}).on("enable screen blocker click",function(t,e){this.screenBlockerClickEnabled=!0}).on("disable default padding",function(t,e){this.$(".dialog").addClass("no-padding")}).on("enable default control",function(t,e){if(!e&&"boolean"!=typeof e)throw"Invalid control enable flag";this.$(".control").show().removeClass("disabled"),this.destroyControl(),this.controlNS=Eggshell.create("C.Eggshell.dialog.control.standard",{el:$.extend({},this.$(".control"))}),Eggshell.connect(this.Eggshell.getNamespace(),"set primary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"set secondary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"set link",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"show primary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"hide primary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"disable primary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"enable primary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"show secondary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"hide secondary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"disable secondary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"enable secondary button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"set text below button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"show text below button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"hide text below button",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"show link",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"hide link",this.controlNS),Eggshell.connect(this.Eggshell.getNamespace(),"enable screen blocker",this.controlNS),Eggshell.connect(this.controlNS,"primary button clicked",this.Eggshell.getNamespace()),Eggshell.connect(this.controlNS,"secondary button clicked",this.Eggshell.getNamespace()),Eggshell.connect(this.controlNS,"link clicked",this.Eggshell.getNamespace()),this.controlNS.trigger("show")});var t=Eggshell.create("C.Eggshell.window.resize.tracker");Eggshell.on(t,"resize",$.proxy(this.resize,this))},resize:function(){var t=this.$(".dialog").height(),e=$(window).height(),i=parseInt(e-2*this.$(".dialog").css("top").replace("px","")),n=this.$(".header").height(),s=this.$(".control").height();if(n&&(i-=n),s){i-=s;var o=parseInt(this.$(".control").css("margin-top").replace("px"));i-=o}this.$(".control").css("margin-top")&&(i-=parseInt(this.$(".control").css("margin-top").replace("px")));var r=this.$(".dialog").css("padding");r||(r=this.$(".dialog").css("padding-top")),r&&(i-=2*parseInt(r.replace("px"))),0>=i&&(i=0),this.$(".content").css("max-height",i)},show:function(){this.resizable=!0,this.lockViewport(),this.$el.show(),this.$(".dialog").show(),this.resize(),this.Eggshell.trigger("shown"),this.resize()},hide:function(t){this.resizable=!1,this.$(".dialog").hide(),this.unlockViewport(),this.$el.hide(),this.Eggshell.trigger("hidden")},lockViewport:function(){$("html, body").css({overflow:"hidden"})},unlockViewport:function(){$("html, body").css({overflow:"visible"})},destroyContent:function(){this.componentNS&&Eggshell.destroy(this.componentNS),this.$(".content").html("")},destroyControl:function(){this.controlNS&&Eggshell.destroy(this.controlNS),this.$(".control").html("")},closeOnClick:function(t){t.preventDefault(),t.stopPropagation(),this.Eggshell.trigger("close button clicked"),this.hide()},screenBlockerOnClick:function(){this.screenBlockerClickEnabled!==!1&&(this.Eggshell.trigger("screen blocker clicked"),this.hide())},headlineOnClick:function(){this.Eggshell.trigger("headline clicked")},subHeadlineOnClick:function(){this.Eggshell.trigger("sub headline clicked")},iconOnClick:function(){this.Eggshell.trigger("icon clicked")},contentOnClick:function(t){this.Eggshell.trigger("content clicked",t)}})),Eggshell.define("C.Eggshell.dialog.control.standard",{inputs:["set primary button","set secondary button","set link","set link url","set hint","set text below button","show primary button","hide primary button","enable primary button","disable primary button","focus on primary button","show secondary button","hide secondary button","enable secondary button","disable secondary button","show link","hide link","show hint","hide hint","show text below button","hide text below button"],outputs:["primary button clicked","secondary button clicked","link clicked"]},Backbone.View.extend({template:_.template('<span class="control-standard-hint"></span><button class="secondary btn-lg btn-primary-outline"></button><div class="main-button">   <button class="primary btn-lg btn-primary"></button>   <div class="text-below-button"></div></div><a></a>'),initialize:function(){this.bindEvents(),this.render()},render:function(){this.$el.empty(),this.$el.html(this.template()),Eggshell.find(this).trigger("hide secondary button"),Eggshell.find(this).trigger("hide hint"),Eggshell.find(this).trigger("hide text below button")},events:{"click .primary":"clickPrimary","click .secondary":"clickSecondary","click a":"linkOnClick"},bindEvents:function(){var t=Eggshell.find(this).on("set primary button",function(e,i){if("string"!=typeof i||!$.trim(i))throw"Invalid primary button text";this.$(".primary").html(i).attr("title",i),t.trigger("show primary button")}).on("set secondary button",function(e,i){if("string"!=typeof i||!$.trim(i))throw"Invalid secondary button text";this.$(".secondary").html(i).attr("title",i),t.trigger("show secondary button")}).on("set link",function(t,e){if("string"!=typeof e||!$.trim(e))throw"Invalid link text";this.$("a").html(e).attr("title",e)}).on("set link url",function(e,i){if("string"!=typeof i||!$.trim(i))throw"Invalid link url";this.$("a").attr("href",i),t.trigger("show link")}).on("set text below button",function(e,i){if(!i&&"string"!=typeof i)throw"Invalid text type";this.$(".text-below-button").html(i),t.trigger("show text below button")}).on("set hint",function(e,i){if(!i&&"string"!=typeof i)throw"Invalid text type";this.$(".control-standard-hint").html(i),t.trigger("show hint")}).on("show primary button",function(){this.$(".primary").show()}).on("hide primary button",function(){this.$(".primary").hide()}).on("enable primary button",function(){this.$(".primary").removeAttr("disabled")}).on("disable primary button",function(){this.$(".primary").attr("disabled","disabled")}).on("focus on primary button",function(){this.$(".primary").focus()}).on("show secondary button",function(){this.$(".secondary").show()}).on("hide secondary button",function(){this.$(".secondary").hide()}).on("enable secondary button",function(){this.$(".secondary").removeAttr("disabled")}).on("disable secondary button",function(){this.$(".secondary").attr("disabled","disabled")}).on("show link",function(){this.$("a").show()}).on("hide link",function(){this.$("a").hide()}).on("show text below button",function(t,e){this.$(".text-below-button").show()}).on("hide text below button",function(t,e){this.$(".text-below-button").hide()}).on("show hint",function(t,e){this.$(".control-standard-hint").show()}).on("hide hint",function(t,e){this.$(".control-standard-hint").hide()})},clickPrimary:function(t){this.Eggshell.trigger("primary button clicked")},clickSecondary:function(t){this.Eggshell.trigger("secondary button clicked")},linkOnClick:function(){this.Eggshell.trigger("link clicked")}})),C.resource.add("C.Eggshell.viewfullsite.button.text","View mobile site &raquo;"),Eggshell.define("C.eggshell.viewfullsite.button",{inputs:["show","hide","view mobile site button clicked"],outputs:[]},C.View.extend({events:{"click .view-full-site-button":"viewMobileSiteButtonClicked"},initialize:function(){this.Eggshell.listen("show",function(t,e){this.$el.show()},this),this.Eggshell.listen("hide",function(t,e){this.$el.hide()},this),this.Eggshell.listen("view mobile site button clicked",function(t,e){var i=""+window.location;C.utility.setCookie("NO_MDT",0,-1e3),i.indexOf("no_mobile=1")>-1?window.location=i.replace(/(\?|&)no_mobile=1&?/,function(t,e){return"?"==e?"?":""}):C.utility.refresh()},this),this.render()},viewMobileSiteButtonTemplate:_.template('<div class="view-full-site-button"><span><%= text %></span></div>'),render:function(){this.$el.html(this.viewMobileSiteButtonTemplate({text:C.resource.fetch("C.Eggshell.viewfullsite.button.text")}))},viewMobileSiteButtonClicked:function(){this.Eggshell.trigger("view mobile site button clicked")}})),Eggshell.define("C.common.marker",{inputs:["show marker"],outputs:[],newNode:!1},function(t){var e=t.id,i=t.component,n=t.component;if(null!=n&&"string"==typeof n?i=$("#"+C.factory.createSafeCssName(n)):null!=n&&"object"==typeof n&&"function"==typeof n.getNamespace&&(i=$("#"+C.factory.createSafeCssName(n.getNamespace()))),!e)throw"Invalid automation marker ID";if(!i||!i.jquery)throw'Automation marker "'+e+'" error: invalid node';if(0==i.length)throw'Automation marker "'+e+'" error: node is no longer available';if(i.length>1)throw'Automation marker "'+e+'" error: cannot mark more than one node';this.showMarker=function(){i.addClass("C-test-"+C.factory.createSafeCssName(e))},Eggshell.find(this).on("show marker",this.showMarker),this.showMarker()}),C("global").profile&&console.profileEnd(),function(t){Eggshell.define("C.common.avatar",{inputs:["set avatar id","update avatar image url","update avatar image url with matching id","set size","set shape","set border","set avatar link url"],
outputs:["rendered"]},function(e){this.id=null,this.$el=e.el,this.$el.addClass("medium"),this.$el.append(t("<img>")),this.$el.hide(),this.setSize=function(t,e){this.$el.removeClass("xsmall small medium large xlarge").addClass(e),this.resizeImage()},this.setShape=function(t,e){this.$el.removeClass("circle square").addClass(e)},this.enableBorder=function(t,e){e?this.$el.addClass("border"):this.$el.removeClass("border")},this.setUserId=function(t,e){this.id=e},this.resizeImage=function(){var e=t("img",this.$el);e.naturalWidth()>0&&e.naturalHeight()>0?this.onLoadImage():e.on("load",t.proxy(this.onLoadImage,this))},this.onLoadImage=function(){var e=t("img",this.$el),i=e.naturalWidth(),n=e.naturalHeight(),s=this.$el.width(),o=this.$el.height();if(i>n){var r=o*i/n,a=r/o*100,l=(r-o)/2;e.css({position:"relative","max-width":"none",width:a.toFixed(0)+"%",left:"-"+l.toFixed(1)+"px"})}else if(n>i){var c=s*n/i,u=c/s*100,d=(c-s)/2;e.css({position:"relative","max-height":"none",height:u.toFixed(0)+"%",top:"-"+d.toFixed(1)+"px"})}},this.updateImageUrl=function(e,i){var n=i;this.resizeImage(),t("img",this.$el).attr("src",n),this.$el.show()},this.updateImageUrlWithMatchingId=function(t,e){var i=e.id,n=e.image;i?i==this.id&&this.updateImageUrl(null,n):this.updateImageUrl(null,n)},this.setLinkUrl=function(e,i){var n=t("img",this.$el);n.remove(),t("<a></a>").attr("href",i).append(n).appendTo(this.$el)},Eggshell.find(this).on("set avatar id",this.setUserId).on("set size",this.setSize).on("set shape",this.setShape).on("set border",this.enableBorder).on("set avatar link url",this.setLinkUrl).on("update avatar image url",this.updateImageUrl).on("update avatar image url with matching id",this.updateImageUrlWithMatchingId)})}(window.Zepto||window.jQuery),function(t){function e(t){var e=new Image;return e.src=t,e}function i(){return console.warn("naturalWidth: no image have been passed"),0}return"naturalWidth"in new Image?(t.fn.naturalWidth=function(){return this.length?this[0].naturalWidth:i()},void(t.fn.naturalHeight=function(){return this.length?this[0].naturalHeight:i()})):(t.fn.naturalWidth=function(){return this.length?e(this[0].src).width:i()},void(t.fn.naturalHeight=function(){return this.length?e(this[0].src).height:i()}))}(window.Zepto||window.jQuery),C.resource.add("C.common.autosuggest.placeholder","Begin your search"),C.resource.add("C.common.autosuggest.close","Close"),C.resource.add("C.common.autosuggest.submit","Submit"),C.resource.add("C.common.autosuggest.sellyourbooks","Sell your books"),C.resource.add("C.common.autosuggest.at","at "),C.resource.add("C.common.autosuggest.toptextbooks","Top Textbooks "),C.resource.add("C.common.autosuggest.topetextbooks","Top eTextbooks "),C.resource.add("C.common.autosuggest.topsolutions","Top Textbook Solutions "),C.resource.add("C.common.autosuggest.searchtextbooks","Search For Books"),C.resource.add("C.common.autosuggest.searchebooks","Search For eBooks"),C.resource.add("C.common.autosuggest.noresultsfound","No results found for"),C.resource.add("C.common.autosuggest.didyoumean","Did you mean"),C.resource.add("C.common.autosuggest.globalsearchheader","Search for a book or course"),Eggshell.define("C.common.autosuggestContextualContent",{inputs:["set contextual content","get contextual content"],outputs:["return contextual content"]},function(){var t=C.Model.extend({initialize:function(){this.set("searchTerm",null)}}),e=C.View.extend({model:new t,template:_.template('<ul class="contextualContent"><li><a href="/search/<%- search %>/books" class="autocomplete-show-more"><%- text.searchtextbooks %><span></span></a></li><li><a href="/search/<%- search %>/books#p=1&amp;eBook=1" class="autocomplete-show-more"><%- text.searchebooks %><span></span></a></li></ul>'),initialize:function(){this.registerListeners(),this.on("render",this.render())},events:{"click a":"getLink",keypress:"onKeyDown"},render:function(){var t={searchtextbooks:C.resource.fetch("C.common.autosuggest.searchtextbooks"),searchebooks:C.resource.fetch("C.common.autosuggest.searchebooks")};this.$el.html(this.template({text:t,search:this.model.get("searchTerm")}))},registerListeners:function(){this.Eggshell.listen("get contextual content",function(t,e){this.render()}),this.Eggshell.listen("set contextual content",function(t,e){this.model.set("searchTerm",e)})},getLink:function(t){t.preventDefault(),t.stopPropagation(),C.utility.navigate(t.currentTarget.href)},onKeyDown:function(){}});return e}()),Eggshell.defineInterface("C.common.autosuggest.interface",{inputs:["render","set sohp autosuggest","set full width","set result type","force prefetch pre-results data","set min chars","set first result","set last result","set no results override","set contextual content","set callback","set placeholder text","set value","set render as form","set input field class","set submit button class","set submit button text","set tracking","enable global session tracking","suppress result meta","suppress icons","set max majors","set max schools","delegate mouse over selection event","set disabled items","add disabled items","remove disabled items","disable ajax loader","focus on search input","hide results","inline submit button","disable input field","enable input field"],outputs:["rendered","rendered results","rendered contextual content","rendered no results","search input focused","search input blurred","clicked result","autosuggest clicked","callback fired","autosuggest form submitted"]}),Eggshell.define("C.common.autosuggest",{"interface":"C.common.autosuggest.interface"},function(){var t=Backbone.Model.extend({initialize:function(){this.set("minChars",3),this.set("placeholderText",C.resource.fetch("C.common.autosuggest.placeholder")),this.set("submitButtonText",C.resource.fetch("C.common.autosuggest.submit")),this.set("firstResult",null),this.set("lastResult",null),this.set("contextualContent",null),this.set("fullWidth",!1),this.set("lastQuery",null),this.set("renderAsForm",!1),this.set("submitButtonClass","btn-flat-sm"),this.set("inputFieldClass","form-input-sm"),this.set("delay",200),this.set("results",null),this.set("globalSessionTracking",!1),this.set("track",null),this.set("selectedResult",null),this.set("callback",null),this.set("resultContainerHeight",0),this.set("loadingIndicatorVisible",!1),this.set("suppressMeta",!1),this.set("maxMajors",null),this.set("maxSchools",null),this.set("suppressIcons",!1),this.set("disableAjaxLoader",!1),this.set("sohpAutosuggest",!1),this.set("hideResultsOnReload",!1),this.set("disabledItems",[]),this.set("maxResultsBlockHeight",!1)},preGetResults:function(t){clearTimeout(this.ajaxTimeout);var e=this;this.ajaxTimeout=setTimeout(function(){e.getResults(t)},this.delay)},getResults:function(t){this.trigger("showLoadingIndicator"),$.ajax({url:C.global.cheggSiteSecureUrl+"_ajax/autocomplete"+t,dataType:"json",context:this,xhrFields:{withCredentials:!0},success:function(t){t&&t[0]?(this.set("results",$.extend({},t[0].items)),this.trigger("processSuccessResponse")):(this.set("results",null),this.trigger("processErrorResponse")),this.trigger("hideLoadingIndicator")},error:function(t){this.set("results",null),this.trigger("processErrorResponse"),this.trigger("hideLoadingIndicator")}})}}),e=Backbone.View.extend({initialize:function(){this.render()},render:function(){this.hightLightText(this.model.attributes);var t=this.model.attributes.itemType;switch(t){case"book":var e=this.model.attributes.subtitle?c_common_result_3_lines(this.model.attributes):c_common_result_2_lines(this.model.attributes);break;case"dac":var e=this.model.attributes.subtitle?c_common_result_3_lines(this.model.attributes):c_common_result_2_lines(this.model.attributes);break;case"ebook":var e=this.model.attributes.subtitle?c_common_result_3_lines(this.model.attributes):c_common_result_2_lines(this.model.attributes);break;case"course":var e=c_common_result_course(this.model.attributes);break;case"major":var e=c_common_result_major(this.model.attributes);break;case"careerInterest":var e=c_common_result_careerInterest(this.model.attributes);break;case"academicInterest":var e=c_common_result_academicInterest(this.model.attributes);break;case"school":case"allschools":var e=c_common_result_school(this.model.attributes);break;case"highschools":var e=c_common_result_school(this.model.attributes);break;case"lastItemLink":var e=c_common_result_last_link(this.model.attributes);break;default:var e=this.model.attributes.subtitle?c_common_result_3_lines(this.model.attributes):c_common_result_2_lines(this.model.attributes)}var i=this.options.fullWidth?c_common_result_container_full({attributes:this.model.attributes,result:e}):c_common_result_container({attributes:this.model.attributes,result:e});this.$el.attr("data-url",this.model.attributes["data-url"]),this.$el.attr("data-ii",this.model.attributes["data-ii"]),1==this.options.suppressIcon&&this.$el.addClass("suppress-icon"),"lastItemLink"==this.model.attributes.itemType&&this.$el.addClass("last-item-link"),this.$el.html(i),("book"==t||"dac"==t||"ebook"==t)&&Eggshell.create("C.common.bookcover",{el:this.$el.find(".book-cover-container")}).trigger("set book image",this.model.attributes.img.url).trigger("turn off shadow").trigger("set book alt",this.model.attributes.img.alt)},events:{mousedown:"doClick"},doClick:function(t){return $(t.target).closest("li").hasClass("autosuggest-disabled-item")?(t.preventDefault(),t.stopPropagation(),!1):(this.options.eggshell.trigger("autosuggest form submitted"),void(this.options.callback&&(t.preventDefault(),t.stopPropagation(),this.options.eggshell.trigger("callback fired",this.model),this.options.eggshell.trigger("autosuggest clicked",this.model.toJSON()))))},hightLightText:function(){var t='<span class="chg-suggest-term">$1</span>',e=this.options.val,i=new RegExp("("+this.regExpQuote(e)+")","i"),n=$("<div/>").html(this.model.get("header")).text();if(this.model.get("header")){var s=n.replace(i,t);this.model.set("header",s)}if(this.model.get("subHeader")){var o=this.model.get("subHeader").replace(i,t);this.model.set("subHeader",o)}if(this.model.get("detail")){var r=this.model.get("detail").replace(i,t);this.model.set("detail",r)}},regExpQuote:function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}}),i=Backbone.Model.extend({initialize:function(){this.bulletSeperatorHTML="&nbsp;&bull;&nbsp;",this.on("change",this.transformData())},defaults:{header:null,subHeader:!1,detail:null,img:{alt:null,url:null},itemType:null,school:null,"data-url":null,"data-ii":null},transformData:function(){switch(this.get("itemType")){case"book":var t=this.get("title")+(this.get("editionNo")?' <span class="this-header-small">('+this.toOrdinal(this.get("editionNo"))+" Edition)</span>":""),e=$.extend({},this.get("itemPromo"));this.set("header",t),this.set("subHeader",this.get("subtitle")?this.get("subtitle"):!1),this.set("detail",this.get("author")+this.bulletSeperatorHTML+this.buildISBNText(this)),this.set("img",this.get("img")),this.set("itemType",this.get("itemType")),this.set("school",null),this.set("meta",this.buildBookPromoContent(e)),this.set("data-url",this.get("attributes")["data-url"]);break;case"ebook":var t=this.get("title")+(this.get("editionNo")?' <span class="this-header-small">('+this.toOrdinal(this.get("editionNo"))+" Edition)</span>":""),e=$.extend({},this.get("itemPromo"));e.isEbook=!0,this.set("header",t),this.set("subHeader",this.get("subtitle")?this.get("subtitle"):!1),this.set("detail",this.get("author")+this.bulletSeperatorHTML+this.buildISBNText(this)),this.set("img",this.get("img")),this.set("itemType",this.get("itemType")),this.set("school",null),this.set("meta",this.buildBookPromoContent(e)),this.set("data-url",this.get("attributes")["data-url"]);break;case"dac":var t=this.get("title")+(this.get("editionNo")?' <span class="this-header-small">('+this.toOrdinal(this.get("editionNo"))+" Edition)</span>":""),e=$.extend({},this.get("itemPromo"));this.set("header",t),this.set("subHeader",this.get("subtitle")?this.get("subtitle"):!1),this.set("detail",this.get("author")+this.bulletSeperatorHTML+this.buildISBNText(this)),this.set("img",this.get("img")),this.set("itemType",this.get("itemType")),this.set("school",null),this.set("meta",this.buildBookPromoContent(e)),this.set("data-url",this.get("attributes")["data-url"]);break;case"course":this.set("header",this.get("title")),this.set("subHeader",this.get("subtitle")),this.set("itemType",this.get("itemType")),this.set("school",this.get("attributes")["data-schoolName"]),this.set("data-url",this.get("attributes")["data-url"]);break;case"major":this.set("header",this.get("title")),this.set("data-url",this.get("attributes")["data-id"]),this.set("itemType",this.get("itemType"));break;case"careerInterest":this.set("header",this.get("title")),this.set("data-url",this.attributes["data-id"]),this.set("itemType",this.get("itemType"));break;case"academicInterest":this.set("header",this.get("title")),this.set("data-url",this.get("attributes")["data-id"]),this.set("itemType",this.get("itemType"));break;case"school":this.set("header",this.get("title")),this.set("data-url",this.get("attributes")["data-schoolId"]),this.set("itemType",this.get("itemType"));break;case"lastItemLink":this.set("header",this.get("title")),this.set("data-schoolId",this.get("attributes")["data-schoolId"]);break;case"solution":break;case"user":}},toOrdinal:function(t){var e=t%10;return 1==e&&11!=t?t+"st":2==e&&12!=t?t+"nd":3==e&&13!=t?t+"rd":t+"th"},buildISBNText:function(t){var e=t.get("isbnText");return e=e.replace("&amp;nbsp;",this.bulletSeperatorHTML),"ebook"==t.get("itemType")&&(e=e.replace("ISBN","eISBN"),e=e.replace("ISBN13","eISBN13")),e},buildBookPromoContent:function(t){if("object"==typeof t&&(t.hasTBS||t.isEbook||t.hasInstantAccess||t.hasEbook)){var e="",i=t.hasTBS?t.hasTBS:!1,n=t.hasInstantAccess?t.hasInstantAccess:!1,s=t.hasEbook?t.hasEbook:!1,o=t.isEbook?t.isEbook:!1;return(s===!0||i===!0||o===!0||n===!0)&&(n&&(e+='<span class="results-meta-item">',e+='<span class="results-meta-icon results-meta-icon-instant"></span> <span class="results-meta-label">Free 7-day eTextbook Access</span></span>'),s&&(e+='<span class="results-meta-item">',e+='<span class="results-meta-icon results-meta-icon-ebook"></span> <span class="results-meta-label"><strong>eTextbook</strong> available</span></span>'),i&&(e+='<span class="results-meta-item">',e+='<span class="results-meta-icon results-meta-icon-tbs"></span> <span class="results-meta-label"><strong>Guided Solutions</strong> available</span></span>'),o&&(e+='<span class="results-meta-item">',e+='<span class="results-meta-icon results-meta-icon-ebook"></span> <span class="results-meta-label"><strong>eTextbook</strong></span></span>')),e}}}),n=Backbone.Collection.extend({model:i}),s=Backbone.View.extend({model:new t,tmpl_field:_.template('<input name="autosuggest-input" class="autosuggest-input-field <%- text.inputFieldClass %>" type="text" placeholder="<%- text.placeholder %>" autocomplete="off"/><span class="loadingIndicator"></span><div class="autosuggest-results-container"><ul class="autosuggest-results-list"></ul><div class="autosuggest-contextual-content"></div></div>'),tmpl_form:_.template('<form class="chg-search-form" action="/search" onsubmit="return false"><a data-type="button" class="autosuggest-search-btn search-magnify-btn  <%- text.submitButtonClass %>" href="#"><%= text.submit %></a><a class="autosuggest-search-cancel search-magnify-btn-close autosuggest-search-cancel-<%- text.inputFieldClass %>" href="#"><span class="icon-x"><%- text.close %></span></a><input name="autosuggest-input" class="autosuggest-input-field <%- text.inputFieldClass %>" type="text" placeholder="<%- text.placeholder %>" autocomplete="off" /></form><div class="autosuggest-results-container"><ul class="autosuggest-results-list"></ul><div class="autosuggest-contextual-content"></div></div>'),initialize:function(){this.model=new t,this.model.on("processSuccessResponse",this.processSuccessResponse,this),this.model.on("processErrorResponse",this.processErrorResponse,this),this.model.on("showLoadingIndicator",this.showLoadingIndicator,this),this.model.on("hideLoadingIndicator",this.hideLoadingIndicator,this),this.registerListeners(),this.trackId=this.generateTrackId(),this.mouseInDropdown=!1},events:{"keyup .autosuggest-input-field":"onKeyUp","keydown .autosuggest-input-field":"onKeyDown","keydown .autosuggest-results-container":"onKeyDown","focus .autosuggest-input-field":"onTextboxFocus","blur .autosuggest-input-field":"onTextboxBlur","click .autosuggest-search-cancel":"resetSearch","click .autosuggest-search-btn":"clickSubmit","click li":"onSelectionClick","mouseenter .autosuggest-results-container":"onMouseEnter","mouseleave .autosuggest-results-container":"onMouseLeave"},mouseOverEvent:{"mouseover li":"onMouseOverSelection"},registerListeners:function(){this.Eggshell.listen("render",function(t,e){this.render()}),this.Eggshell.listen("set result type",function(t,e){this.model.set("resultType",e)}),this.Eggshell.listen("set min chars",function(t,e){e&&e===parseInt(e)&&this.model.set("minChars",e)}),this.Eggshell.listen("set first result",function(t,e){e&&this.model.set("firstResult",e)}),this.Eggshell.listen("set last result",function(t,e){e&&this.model.set("lastResult",e)}),this.Eggshell.listen("set full width",function(t,e){this.model.set("fullWidth",!0),this.$el.addClass("fullWidth")}),this.Eggshell.listen("set render as form",function(t,e){this.model.set("renderAsForm",!0),this.$el.addClass("form-display")}),this.Eggshell.listen("set tracking",function(t,e){e&&this.model.set("track",e)}),this.Eggshell.listen("enable global session tracking",function(t,e){this.model.set("globalSessionTracking",!0)}),this.Eggshell.listen("set callback",function(t,e){this.model.set("callback",!0)}),this.Eggshell.listen("set contextual content",function(t,e){e&&this.model.set("contextualContent",!0)}),this.Eggshell.listen("suppress result meta",function(t,e){this.model.set("suppressMeta",!0)}),this.Eggshell.listen("suppress icons",function(t,e){e&&"boolean"==typeof e&&this.model.set("suppressIcons",e)}),this.Eggshell.listen("set placeholder text",function(t,e){this.model.set("placeholderText",e),this.text=$.extend(this.text,{placeholder:this.model.get("placeholderText")})}),this.Eggshell.listen("set submit button text",function(t,e){this.model.set("submitButtonText",e)}),this.Eggshell.listen("set value",function(t,e){"string"==typeof e&&this.$inputField.val(e)}),this.Eggshell.listen("set input field class",function(t,e){e&&"string"==typeof e&&this.model.set("inputFieldClass",e)}),this.Eggshell.listen("set submit button class",function(t,e){e&&"string"==typeof e&&this.model.set("submitButtonClass",e)}),this.Eggshell.listen("set max majors",function(t,e){e&&"number"==typeof e&&this.model.set("maxMajors",e)}),this.Eggshell.listen("set max schools",function(t,e){e&&"number"==typeof e&&this.model.set("maxSchools",e)}),this.Eggshell.listen("disable ajax spinner",function(t,e){e&&"boolean"==typeof e&&this.model.set("disableAjaxLoader",e)}),this.Eggshell.listen("set sohp autosuggest",function(t,e){e&&"boolean"==typeof e&&this.model.set("sohpAutosuggest",e)}),this.Eggshell.listen("delegate mouse over selection event",function(t,e){this.delegateEvents(e?_.extend(this.events,this.mouseOverEvent):this.events)}),this.Eggshell.listen("set disabled items",function(t,e){this.setDisabledItems(e)}),this.Eggshell.listen("add disabled items",function(t,e){this.addDisabledItems(e)}),this.Eggshell.listen("remove disabled items",function(t,e){this.removeDisabledItems(e)}),this.Eggshell.listen("hide results",function(t){this.hideResults()}),this.Eggshell.listen("inline submit button",function(t){this.inlineSubmitButton()}),this.Eggshell.listen("set max results block height",function(t,e){this.model.set("maxResultsBlockHeight",e)}),Eggshell.find(this).on("focus on search input",function(){this.$inputField&&this.$inputField.focus()})},render:function(){var t=this.model.get("fullWidth"),e=this.model.get("renderAsForm"),i=this.model.get("sohpAutosuggest");if(this.submitButton='<span class="icn-magnify">'+this.model.get("submitButtonText")+"</span>",this.text={placeholder:this.model.get("placeholderText"),close:C.resource.fetch("C.common.autosuggest.close"),submit:this.submitButton,submitButtonClass:this.model.get("submitButtonClass"),inputFieldClass:this.model.get("inputFieldClass")},this.$el.html(1==e?this.tmpl_form({text:this.text}):this.tmpl_field({text:this.text})),this.$inputField=this.$el.find(".autosuggest-input-field"),this.$resultsContainer=this.$el.find(".autosuggest-results-container"),this.$resultsList=this.$el.find("ul.autosuggest-results-list"),this.$searchButton=this.$el.find(".autosuggest-search-btn"),this.$cancelButton=this.$el.find(".autosuggest-search-cancel"),this.$form=this.$el.find(".chg-search-form"),this.$loadingIndicatorContainer=this.$el.find(".loadingIndicator"),this.$contextualContentContainer=this.$el.find(".autosuggest-contextual-content"),this.$curLi=null,this.submitButtonWidth=this.$searchButton.outerWidth(),this.model.get("suppressMeta")&&this.$resultsList.addClass("suppress-result-meta"),1==e&&0==t){var n="";if(1==i){var n="5px",s="5px";this.$form.css("margin-right","0px"),this.$searchButton.css({background:"#F07D00",right:n,top:s,width:this.submitButtonWidth});var o=this.submitButtonWidth+5+"px";this.$cancelButton.css({right:o})}else{var n="-"+(this.submitButtonWidth+5)+"px";this.$form.css("margin-right",this.submitButtonWidth),this.$searchButton.css({right:n,width:this.submitButtonWidth})}}this.Eggshell.trigger("rendered")},processSuccessResponse:function(){if(!this.blockAllResponses){var t=this.model.get("lastResult"),e=this.model.get("results");if(e){var s="object"==typeof e?e:jQuery.parseJSON(e),o=new n;$.each(s,$.proxy(function(t,e){var n=new i(e);n.set("data-ii",parseInt(t)+1),o.add(n)},this));var r="";if(o.length>0){r=this.buildResultSet(o),this.renderResultSet(r);var a=this.$resultsContainer.height()+this.$contextualContentContainer.height();this.model.set("resultContainerHeight",a),1!=this.model.get("hideResultsOnReload")&&(this.showResults(),this.model.set("hideResultsOnReload",!1))}else{r=this.buildResultSet(""),this.renderResultSet(r);var a=this.$resultsContainer.height()+this.$contextualContentContainer.height();this.model.set("resultContainerHeight",a),t&&this.showResults()}}}},getInputValue:function(){var t=function(t){return t.length?$.trim(t):""},e=this.$inputField.val()||"";return t(e).replace(/([.?*+^$[\]\\/()"{}<>|])/g,"")},processErrorResponse:function(){var t=this.model.get("lastResult"),e=c_common_result_none({query:this.getInputValue(),noresults:C.resource.fetch("C.common.autosuggest.noresultsfound"),didyoumean:C.resource.fetch("C.common.autosuggest.didyoumean")}),i=this.options.fullWidth?c_common_result_container_full({attributes:{"data-url":"#"},result:e}):c_common_result_container({attributes:{"data-url":"#"},result:e});if(this.renderResultSet(i),t){var n=this.buildLastResult(t);this.$resultsList.append(n)}var s=this.$resultsContainer.height()+this.$contextualContentContainer.height();this.model.set("resultContainerHeight",s),this.showResults()},buildResultSet:function(t){var i=this.model.get("firstResult"),n=this.model.get("lastResult"),s=this.model.get("contextualContent"),o=this.model.get("fullWidth");if(this.$resultsList.html(""),i&&this.$resultsList.prepend(i),t.length>0&&t.each($.proxy(function(t,i){var n=$('<li class="result"></li>'),s=this.getInputValue(),r=this.model.get("callback")?this.model.get("callback"):!1,a=this.model.get("suppressIcons");this.isItemDisabled(t.attributes)&&n.addClass("autosuggest-disabled-item"),resultHTML=new e({model:t,el:n,val:s,callback:r,fullWidth:o,eggshell:Eggshell.find(this),suppressIcon:a}),this.$resultsList.append(n)},this)),n){var r=this.buildLastResult(n);this.$resultsList.append(r)}s&&this.buildContextualContent()},buildLastResult:function(t){var n=$('<li class="result"></li>');this.isItemDisabled(t.attributes)&&n.addClass("autosuggest-disabled-item");var s=new i(t),o=this.model.get("callback")?this.model.get("callback"):!1,r=new e({model:s,el:n,eggshell:Eggshell.find(this),callback:o});return this.$resultsList.append(n),n},buildContextualContent:function(){this.$contextualContentContainer.html("");var t=Eggshell.create("C.common.autosuggestContextualContent",{el:this.$contextualContentContainer});Eggshell.trigger(t,"set contextual content",this.getInputValue()),Eggshell.trigger(t,"get contextual content"),this.Eggshell.trigger("rendered contextual content")},renderResultSet:function(t){this.$resultsList.html(t)},showResults:function(){if(this.model.get("maxResultsBlockHeight")&&!_.isNaN(parseInt(this.model.get("maxResultsBlockHeight")))&&this.$resultsContainer.css({"overflow-y":"scroll","max-height":this.model.get("maxResultsBlockHeight")}),0==this.model.get("fullWidth")||0==this.model.get("renderAsForm")){var t=this.$inputField.outerWidth();this.$resultsContainer.width(t)}this.$resultsContainer.height()>0&&(this.$resultsContainer.slideDown(300),Eggshell.find("C.common.overlay.tooltip").trigger("hide"));var e=this.getInputValue();parseInt(e.length)>0&&this.$cancelButton.show()},hideResults:function(){this.$resultsContainer.hide();var t=this.getInputValue();0==parseInt(t.length)&&this.$cancelButton.hide();var e=$(this.$resultsList).find("li");e.removeClass("selected")},inlineSubmitButton:function(){this.$searchButton=this.$el.find(".autosuggest-search-btn"),this.$searchButton.css({right:"0px"})},onKeyDown:function(t){if(40==t.keyCode){this.doNextSelection(t);var e=$(this.$resultsList).find("li.selected");this.scroll("down",e),t.preventDefault()}else if(38==t.keyCode){this.doPrevSelection(t);var e=$(this.$resultsList).find("li.selected");this.scroll("up",e),t.preventDefault()}else if(27==t.keyCode)this.$inputField.val(""),this.$inputField.blur(),this.hideResults(),this.$curLi=null;else if(13==t.keyCode)this.doSessionLogging(t),this.onSubmit(t);else{var i=$(this.$resultsList).find("li").not($(this.$resultsList).find("li li"));i.removeClass("selected"),this.$curLi=null}},scroll:function(t,e){var i=this.$resultsContainer,n=e,s=$(i).height(),o=$(n).height(),r=n.position().top+o,a=r;switch(t){case"up":if(0>=r){var l=this.scrollCounter.dec();$(i).scrollTop(s*l)}else if(r>s){var c=$(this.$resultsList).find("li").not($(this.$resultsList).find("li li")).length;$(i).scrollTop(9999),this.scrollCounter.set(Math.round(o*c/s))}break;case"down":if(r>s){var l=this.scrollCounter.inc();$(i).scrollTop((a-o)*l)}else 0>r&&($(i).scrollTop(0),this.scrollCounter.reset())}},scrollCounter:function(){var t=0;return{inc:function(){return t+=1},dec:function(){return t-=1},reset:function(){t=0},set:function(e){t=e}}}(),onKeyUp:function(t){if(13==t.keyCode)return this.hideResults(),this.$curLi=null,void this.setResponseBlocker();var e=this.getInputValue(),i=this.model.get("lastQuery");i!=e&&this.evalQuery(e)},setResponseBlocker:function(){this.blockAllResponses=!0,setTimeout($.proxy(function(){this.blockAllResponses=!1},this),1e3)},evalQuery:function(t){var e=this.model.get("minChars"),i=this.model.get("lastQuery");if(""===t||t.length<e)return this.hideResults(),void(this.$curLi=null);if(t.length>=e&&t!=i){var n=this.buildUrl(t);this.model.preGetResults(n),this.$curLi=null}else t.length>=e&&(this.showResults(),this.$curLi=null);this.model.set("lastQuery",t)},buildUrl:function(t){var e=this.model.get("resultType"),i=this.model.get("maxMajors"),n=this.model.get("maxSchools"),s="";if(e&&"[object Array]"===Object.prototype.toString.call(e)){var o,r,e;for(s+="type=",o=0,r=e.length;r>o;o++)s+=e[o],r>o&&1!=r&&o+1!=r&&(s+="|");s+=e.length>1?"&combine_results=items&":"&",null!=i&&"number"==typeof i&&(s+="majors_max="+i+"&"),null!=n&&"number"==typeof n&&(s+="schools_max="+n+"&")}else s="type=all&";return"?search_by="+encodeURIComponent(t)+"&"+s+"trackid="+this.trackId},resetSearch:function(t){t.preventDefault(),t.stopPropagation(),this.$inputField.val(""),this.$resultsList.html(""),this.hideResults(),this.$curLi=null},onTextboxFocus:function(){var t=this.getInputValue();this.model.set("lastQuery",t),this.evalQuery(t),Eggshell.find(this).trigger("search input focused")},onTextboxBlur:function(){this.mouseInDropdown||this.$inputField.is(":focus")||(this.hideResults(),this.$curLi=null),Eggshell.find(this).trigger("search input blurred")},onMouseEnter:function(){this.mouseInDropdown||(this.mouseInDropdown=!0)},onMouseLeave:function(){var t=$(this.$resultsList).find("li").not($(this.$resultsList).find("li li"));t.removeClass("selected"),this.$curLi=null},doNextSelection:function(t){var e=$(this.$resultsList).find("li").not($(this.$resultsList).find("li li")),i=e.index($(this.$resultsList).find("li.selected")),n;return e.removeClass("selected"),n=-1==i||i>=e.length-1?e.eq(0).addClass("selected"):e.eq(i+1).addClass("selected"),n.hasClass("autosuggest-disabled-item")?void this.doNextSelection(t):void this.changeSelection(n)},doPrevSelection:function(t){var e=$(this.$resultsList).find("li").not($(this.$resultsList).find("li li")),i=e.index($(this.$resultsList).find("li.selected")),n;return e.removeClass("selected"),n=-1==i||0===i?e.eq(e.length-1).addClass("selected"):e.eq(i-1).addClass("selected"),n.hasClass("autosuggest-disabled-item")?void this.doPrevSelection(t):void this.changeSelection(n)},onMouseOverSelection:function(t){var e=$(t.target).closest("li");if(0!=e.not($(this.$resultsList).find("li li")).length&&!e.hasClass("autosuggest-disabled-item")){var i=t.currentTarget;e.length&&(this.$resultsList.find("li").removeClass("selected"),e.addClass("selected")),this.changeSelection(e)}},changeSelection:function(t){this.$curLi=t;var e=this.$curLi.find(".result-header");e.length?this.model.set("selectedResult",e.text()):this.model.set("selectedResult",null)},evaluateSchoolData:function(t){return savedId=C.utility.getLocal("schoolId"),savedName=C.utility.getLocal("schoolName"),t?t&&savedId&&savedName&&t==savedId?(this.schoolInfo={schoolName:savedName,schoolId:savedId},!0):void this.getSchool(t):!1},clickSubmit:function(t){this.onSubmit(t),this.doSessionLogging(t)},onSubmit:function(t){t.preventDefault(),t.stopPropagation();var e=this.model.get("renderAsForm"),i=this.model.get("track"),n=this.model.get("selectedResult"),s=this.model.get("callback"),o=$(this.$resultsList).find("li.selected");if(this.Eggshell.trigger("autosuggest form submitted"),this.hideResults(),!s){if(e&&!this.$curLi){if(i&&"string"==typeof i){var r=i.split("=");this.$form.append('<input type="hidden" name="'+r[0]+'" value="'+r[1]+'" />')}return C.utility.navigate(C.global.cheggSiteUrl+"search/"+encodeURIComponent(this.getInputValue())+"/books"),!0}return void this.navigateToNewPage(this.$curLi)}e&&!this.$curLi?(this.Eggshell.trigger("callback fired",{inputValue:this.getInputValue()}),this.Eggshell.trigger("autosuggest clicked",{inputValue:this.getInputValue()})):o.mousedown()},navigateToNewPage:function(t){var e=this.model.get("track"),i=this.model.get("lastQuery");if(null!=this.$curLi){var n=this.$curLi.attr("data-url");n=_.unescape(n);var s=this.$curLi.attr("data-ii");if(this.updateInputVal(),void 0!=s)n=-1==n.indexOf("?")?n+"?ii="+s:n+"&ii="+s,e&&(n+="&"+e);else{if(void 0!=n)return C.utility.navigate(n),!0;n="/search/"+i+"/books"}return C.utility.navigate(n),!1}var n=this.$curLi.find("a").attr("href");return C.utility.navigate(n),!1},onSelectionClick:function(t){var e=this.model.get("callback");if(1===t.which){var i=$(t.target).closest("li");return i.hasClass("autosuggest-disabled-item")?(t.preventDefault(),void t.stopPropagation()):(this.$curLi=i,this.changeSelection(this.$curLi),this.hideResults(),e||this.navigateToNewPage(this.$curLi),this.doSessionLogging(t),this.Eggshell.trigger("clicked result"),!1)}},updateInputVal:function(){var t=this.model.get("selectedResult");if(t){this.$inputField.val(t),this.$inputField.blur(),this.$resultsList.html("");var e=this.buildUrl(t);this.model.set("hideResultsOnReload",!0),this.model.preGetResults(e),
this.model.set("selectedResult",null)}},showLoadingIndicator:function(){if(!this.model.get("disableAjaxLoader")&&!this.model.get("loadingIndicatorVisible")){var t='<canvas class="loading" width="15" height="15"><img src="//c.cheggcdn.com/s/_global/images/ajax-loader.gif"></canvas>';if(this.model.get("renderAsForm")){this.$searchButton.html(t);var e=this.$searchButton.find("canvas.loading")}else{this.$loadingIndicatorContainer.html(t);var e=this.$loadingIndicatorContainer.find("canvas.loading")}if(this.model.get("fullWidth")&&this.model.get("renderAsForm"))var i="#ffffff";else var i="#666666";var n=new C.widget.spinner({canvas:e,color:i});this.model.set("loadingIndicatorVisible",!0)}},hideLoadingIndicator:function(){this.model.get("disableAjaxLoader")||this.model.get("loadingIndicatorVisible")&&(this.$searchButton.html(this.submitButton),this.$loadingIndicatorContainer.html(""),this.model.set("loadingIndicatorVisible",!1))},generateTrackId:function(){var t=Math.abs(4294967295*Math.random()<<0).toString(16);return("000000000"+t).slice(-8)},doSessionLogging:function(t){t.preventDefault();var e=this.model.get("selectedResult"),i=this.model.get("globalSessionTracking");i&&($(t.currentTarget).hasClass("autosuggest-input-field")&&C.logger.doSessionLog(null!=e?{src:"header"}:{src:"header",action:"enter"}),$(t.currentTarget).hasClass("autosuggest-search-btn")&&C.logger.doSessionLog({src:"header",action:"button"}),$(t.currentTarget).hasClass("result")&&C.logger.doSessionLog({src:"header"}))},getDisabledItems:function(){var t=this.model.get("disabledItems");return t&&"object"==typeof t?t:[]},setDisabledItems:function(t){return this.model.set("disabledItems",this.convertItemsToArray(t)),this},addDisabledItems:function(t){var e=_.union(this.getDisabledItems(),this.convertItemsToArray(t));return this.setDisabledItems(e)},removeDisabledItems:function(t){var e=_.difference(this.getDisabledItems(),this.convertItemsToArray(t));return this.setDisabledItems(e)},convertItemsToArray:function(t){return t?"object"!=typeof t?[t]:t:[]},isItemDisabled:function(t){var e=t&&t["data-url"]?t["data-url"]:null;return e&&"string"==typeof e?_.indexOf(this.getDisabledItems(),e)>-1:!1}});return s}());var c_common_result_container=_.template('<a href="<%= attributes["data-url"] %>"><%= result %></a>'),c_common_result_container_full=_.template('<a href="<%= attributes["data-url"] %>"><span class="autosuggest-width"><span class="autosuggest-row row"><span class="col-12 col-first col-last"><%= result %></span></span></span></a>'),c_common_result_3_lines=_.template('<div class="result-data result-3-lines result-<%- itemType %> <% if(typeof(meta)!= "undefined"){ %> result-data-margin-right<% } %>"><span class="book-cover-container"></span><div class="result-info"><span class="result-header"><%= header %></span><span class="result-sub-header"><%= subHeader %></span><span class="result-detail"><%= detail %></span><% if(typeof(meta)!= "undefined" && _.size(meta) != 0){ %><div class="results-meta"><%= meta %></div><% } %></div></div>'),c_common_result_2_lines=_.template('<div class="result-data result-2-lines result-<%- itemType %> <% if(typeof(meta)!= "undefined"){ %> result-data-margin-right<% } %>"><span class="book-cover-container"></span><div class="result-info"><span class="result-header"><%= header %></span><span class="result-detail"><%= detail %></span><% if(typeof(meta)!= "undefined" && _.size(meta) != 0){ %><div class="results-meta"><%= meta %></div><% } %></div></div>'),c_common_result_course=_.template('<div class="result-data result-2-lines result-<%- itemType %> <% if(typeof(meta)!= "undefined"){ %> result-data-margin-right<% } %>"><span class="img-wrapper autosuggest-icon autosuggest-icon-course"> <% if(typeof(img) != "undefined" && typeof(img.url) != "undefined" && typeof(img.alt) != "undefined"){ %> <img src="<%- img.url %>" alt="<%- img.alt %>"> <% } %></span><div class="result-info"><div class="result-bookinfo"><span class="result-header"><%= header %><span class="light"> at <%= school %> </span></span><span class="result-sub-header"><%= subHeader %></span><% if(typeof(meta)!= "undefined" && _.size(meta) != 0){ %><div class="result-meta"><%= meta %></div><% } %></div></div></div>'),c_common_result_major=_.template('<div class="result-data result-1-lines result-<%- itemType %>"><span class="img-wrapper autosuggest-icon autosuggest-icon-major"><% if(typeof(img) != "undefined" && typeof(img.url) != "undefined" && typeof(img.alt) != "undefined"){ %> <img src="<%- img.url %>" alt="<%- img.alt %>"> <% } %></span><div class="result-info"><span class="result-header"><%= header %></span></div></div>'),c_common_result_careerInterest=_.template('<div class="result-data result-1-lines result-<%- itemType %>"><div class="result-info"><span class="result-header"><%= header %></span></div></div>'),c_common_result_academicInterest=_.template('<div class="result-data result-1-lines result-<%- itemType %>"><div class="result-info"><span class="result-header"><%= header %></span></div></div>'),c_common_result_school=_.template('<div class="result-data result-2-lines result-<%- itemType %>"><span class="img-wrapper autosuggest-icon autosuggest-icon-school"><% if(typeof(img) != "undefined" && typeof(img.url) != "undefined" && typeof(img.alt) != "undefined"){ %> <img src="<%- img.url %>" alt="<%- img.alt %>"> <% } %></span><div class="result-info"><div class="result-bookinfo"><span class="result-header"><%= header %></span></div></div></div>'),c_common_result_1_1_1=_.template('<div class="result-data result-<%- itemType %>"><span class="img-wrapper">  <% if(typeof(img) != "undefined" && typeof(img.url) != "undefined" && typeof(img.alt) != "undefined"){ %> <img src="<%- img.url %>" alt="<%- img.alt %>"> <% } %></span><div class="result-info"><div class="result-bookinfo"><span class="result-header"><%= header %> <% if(typeof(school) != "undefined" && typeof(school.schoolName) != "undefined"){ %><span class="light"> at <%= school.schoolName %></span> <% } %></span></div></div></div>'),c_common_result_last_link=_.template("<%= header %>"),c_common_result_none=_.template('<div class="result-data result-2-lines result-noresults"><div class="result-info"><div class="result-bookinfo"><span class="result-header"><%= noresults %> <span class="chg-suggest-term"><%= query %></span></span></div></div></div>');C("addbook"),C.addbook.bookView=C.View.extend({objName:"C.addbook.bookView",className:"book clearfix",tmpl:_.template('<div class="book-img-1"><img class="book-cover" src="<%=img.url%>"/></div><div class="mini-biblio"><p class="txt-body-bold book-title"><%=title%></p><p class="book-author"><%=author%></p><p>ISBN: <span class="txt-body"><%-isbn%></span>&nbsp;ISBN13: <span class="txt-body"><%-ean%></span></p></div>'),initialize:function(){this.model.on("destroy",this.destroy,this)},render:function(){return this.$el.append($(this.tmpl(this.model.toJSON()))),this},destroy:function(){this.remove()}}),C.addbook.course=C.Model.extend({objName:"C.addbook.course"}),C.addbook.courses=Backbone.Collection.extend({objName:"C.addbook.courses",model:C.addbook.course}),C.addbook.courseView=C.View.extend({objName:"C.addbook.courseView",className:"courseRow clearfix",tmpl:_.template('<div class="selector"><input type="radio" id="<%=schoolId%><%=subjectCode%><%=catalogNumber%>" name="header" <%if(checked){%>checked="checked"<%}%>/><label for="<%=schoolId%><%=subjectCode%><%=catalogNumber%>" class="form-radio">&nbsp;</label></div><div class="course"><div class="dept-icon"><img src="/s/_global/images/dept-icons/0.png" alt=""></div><div class="course-title"><span class="txt-body-bold subject"><%=title%></span><br/><span class="subtitle"><%=subtitle%></span></div></div>'),events:{"click input":"onClickRadio"},initialize:function(){this.model.on("destroy",this.destroy,this)},render:function(){return this.$el.append($(this.tmpl({schoolId:this.model.get("schoolId"),subjectCode:this.model.get("subjectCode"),catalogNumber:this.model.get("catalogNumber"),title:this.model.get("title"),subtitle:this.model.get("subtitle")||"",checked:!1}))),this},onClickRadio:function(){this.model.trigger("select",this.model)},destroy:function(){this.remove()}}),C.addbook.coursesView=C.View.extend({objName:"C.addbook.coursesView",className:"courses",tmpl:_.template('<h2 class="txt-hdr-sec">Which course is this book for?</h2><h3>(Get access to Q&A, Notes and more for your course)</h3><div class="courseRow courseInputRow"><div class="selector"><input type="radio" id="userCourse" name="header" checked="checked"><label for="userCourse" class="form-radio">&nbsp;</label></div><input type="text" name="courseName" class="courseInput chg-form-lg" placeholder="Enter course name."/></div>'),initialize:function(){this.collection.on("add",this.onAdd,this)},render:function(){return this.$el.append($(this.tmpl())),this},setupAutoComplete:function(){new C.widget.autoComplete({el:this.$("input.courseInput"),type:"courses",callback:_.bind(this.onSelectCourse,this)})},onSelectCourse:function(t,e){var i=e.data("itemDetail");this.$(".courseInputRow").hide(),this.collection.add({schoolId:i.attributes["data-schoolId"],subjectCode:i.attributes["data-subjectCode"],catalogNumber:i.attributes["data-catalogNumber"],title:i.title,subtitle:i.subtitle,checked:!0})},onAdd:function(t){var e=new C.addbook.courseView({model:t});e.render().$el.insertBefore(this.$(".courseInputRow"))}}),C.addbook.model=C.Model.extend({objName:"C.addbook.model",initialize:function(){this.courses=new C.addbook.courses,this.courses.on("select",this.onSelectCourse,this),this.courses.on("add",this.onAddCourse,this)},destroy:function(){this.trigger("destroy")},onSelectCourse:function(t){this.selectedCourse=t},onAddCourse:function(t){t.get("checked")&&(this.selectedCourse=t)},fetchCourse:function(){var t="/_ajax/book/course",e={year:this.get("year"),term:this.get("term"),ean:this.get("ean")};$.ajax({context:this,type:"post",dataType:"json",url:t,data:e,success:function(t){this.trigger("fetchCourse:success"),this.courses.add(t.courses)}})},submit:function(){if(!this.selectedCourse)return!1;var t="/_ajax/course/combined/ratingbookownership/add",e={year:this.get("year"),term:this.get("term"),ean:this.get("ean"),subject:this.selectedCourse.get("subjectCode"),code:this.selectedCourse.get("catalogNumber"),owned:!0,token:C.global.csrfToken};$.ajax({context:this,type:"post",dataType:"json",url:t,data:e,success:function(t){this.trigger("submit:success")}})}}),C.addbook.view=C.View.extend({objName:"C.addbook.view",tmpl:_.template('<div id="addbook-container" class="dialog-4"><div class="dialog-hdr"><h2 class="dialog-title"><%- title%></h2><div class="dialog-close-wrapper"><button class="btn-secondary-sm chg-dialog-close"><span class="icn-cross">Close</span> </button></div></div><form class="find-books"><div class="dialog-content"><fieldset class="chg-util-autosuggest-form"><input type="text" class="chg-form-sm has-default" placeholder="Enter ISBN, Title or Author\'s Name" name="search_by" autocomplete="off" /></fieldset></div><div class="dialog-ftr"></div></form></div>'),events:{"click .chg-dialog-close":"onClickCancel"},initialize:function(t){this.options=t,this.model.on("destroy",this.destroy,this),this.model.on("fetchCourse:success",this.onFetchCourseSuccess,this),this.model.on("submit:success",this.options.onSubmitSuccess||this.onSubmitSuccess,this),this.model.on("error",this.onError,this)},destroy:function(){this.remove(),this.dialog&&this.dialog.destroy()},render:function(){return this.$el.html(this.tmpl({btnTxt:this.options.btnTxt||"Add",title:this.options.title||"Add book"})),this.showDialog(),this},showDialog:function(){this.log("showDialog"),this.dialog&&this.dialog.destroy(),this.dialog=new C.widget.dialog({content:this.$el}),this.autoComplete&&this.autoComplete.destroy(),this.autoComplete=new C.widget.autoComplete({el:".chg-util-autosuggest-form input",type:this.options.type||"books",onTextboxBlur:_.bind(this.onTextboxBlur,this),callback:_.bind(this.options.autoCompleteCallback||this.onSelectBook,this),overrideSolutionsImage:!0})},onTextboxBlur:function(t){},onSelectBook:function(t,e){this.$(".chg-util-autosuggest-form").hide();var i=e.data("itemDetail");this.model.set(i);var n=new C.addbook.bookView({model:this.model});this.$(".dialog-content").append(n.render().$el),this.model.selectedCourse||this.model.fetchCourse()},onClickCancel:function(t){t.preventDefault(),this.autoComplete&&this.autoComplete.destroy(),this.destroy()},onClickSubmit:function(t){t.preventDefault(),this.model.submit()},onFetchCourseSuccess:function(){var t=new C.addbook.coursesView({collection:this.model.courses});t.render().$el.appendTo(this.$(".dialog-content")),t.setupAutoComplete()},onSubmitSuccess:function(){this.destroy(),this.reloadPage()},reloadPage:function(){window.location.reload()},onError:function(t,e){}}),Eggshell.define("C.common.rating",{inputs:["set rating","set large version","enable interaction","set non-interactable star color"],outputs:["rated"]},Backbone.View.extend({initialize:function(){this.model=new Backbone.Model({stars:0}),this.render(),this.$el.addClass("interaction"),Eggshell.find(this).on("enable interaction",this.enableInteraction).on("set large version",this.setLargeSize).on("set non-interactable star color",this.setColor).on("set rating",this.setRating)},enableInteraction:function(t,e){e?this.$el.addClass("interaction"):this.$el.removeClass("interaction")},setLargeSize:function(){this.$(".star-rating-input").addClass("large")},setRating:function(t,e){if("number"!=typeof e||null===e)throw"Invalid payload. Payload needs to be a number";this.model.set("stars",Math.min(parseInt(e),5)),this.updateStarsDisplay(this.model.get("stars"))},setColor:function(t,e){if(this.$el.hasClass("interaction"))throw"Cannot set interactable star color. Please disable interaction first.";if("gray"!==e&&"yellow"!==e)throw"Invalid color. Only gray and yellow are allowed.";"gray"===e?this.$el.addClass("gray"):this.$el.removeClass("gray")},render:function(t){this.$el.html(this.template()),this.updateStarsDisplay(this.model.get("stars"))},template:_.template('<div class="rate-my-course-input-container"><ul class="star-rating-input"><li data-id="1"></li><li data-id="2"></li><li data-id="3"></li><li data-id="4"></li><li data-id="5"></li></ul></div>'),events:{"hover .interaction .star-rating-input li":"mouseOver","mouseout .interaction .star-rating-input":"mouseOut","click .interaction .star-rating-input li":"click"},mouseOver:function(t){var e=$(t.currentTarget).attr("data-id");this.updateStarsDisplay(e)},mouseOut:function(){this.updateStarsDisplay(this.model.get("stars"))},click:function(t){var e=$(t.currentTarget).attr("data-id");this.model.set("stars",parseInt(e)),this.updateStarsDisplay(e),Eggshell.find(this).trigger("rated",e)},updateStarsDisplay:function(t){var e=$(this.el).find(".star-rating-input"),i=$(e).find("li");$.each(i,function(e,i){$(i).removeClass("active"),t-1>=e&&$(i).addClass("active")})}})),Eggshell.define("C.common.advertisements",{inputs:["render","setup ads","clear adDivIds","setup custom targeting","display ads"],outputs:{"slot rendered":{payload:null},"has adBlock":{payload:null},"advertisement rendered":{}},singleton:!0},function(){window.googletag&&window.googletag.hasOwnProperty("destroySlots")?window.googletag.destroySlots():window.googletag=null;var t="/7223/",e="chg-bp-",i="//pubads.g.doubleclick.net/gampad/ad?iu=",n=!1,s=!1,o={},r=0,a=0,l=0,c=!1,u=!1,d=!1,h={},g=[],p=[],f=Eggshell.create("C.common.log"),m=!1;Eggshell.shell(this).on("render",function(t){this.initRender()}).on("destroy",function(t){this.destruct()}),this.render=function(){o=$(".chg-display"),o.length>0&&(n!==!0&&(n=!0,this.initialize(),this._setListeners(),this.setUserData()),Eggshell.shell(this).trigger("setup ads",{obj:o}).trigger("setup custom targeting").trigger("display ads")),s===!1&&c===!1&&(s=!0,Eggshell.find(this).trigger("advertisement rendered"))},this.initRender=function(){u===!1&&c===!1&&d===!1?(this.detectFF42()&&this.detectIncognitoMode(),this.checkForAdBlocker()):u===!0&&c===!1&&d===!0&&this.render()},this._setListeners=function(){var t=this;Eggshell.shell(this).on("clear adDivIds",this.clearAdDivIds).on("setup ads",function(e,i){t.setupAdSlots(i.obj)}).on("setup custom targeting",this.setupCustomTargeting).on("display ads",this.displayAds)},this.clearAdDivIds=function(){g=[]},this.reset=function(){o={},g=[],p=[]},this.initialize=function(){var t=this;C.global.gptLoadsEarlier||C.utility.loadScript("//www.googletagservices.com/tag/js/gpt.js",$.proxy(function(){this.onScriptLoad()},this)),googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],googletag.cmd.push(function(){googletag.pubads().enableSingleRequest(),googletag.pubads().collapseEmptyDivs(),googletag.enableServices(),googletag.pubads().addEventListener("slotRenderEnded",$.proxy(t.slotRendered,t)),C.global.adsDebugging&&googletag.pubads().addEventListener("slotOnload",function(){console.timeEnd("from slot rendered to slot load")})})},this.countElement=function(){return $(".chg-display").length},this.setUserData=function(){if(c===!1&&this.countElement()>0){var t=this;$.ajax({url:"/_ajax/adTargeting",type:"POST",context:this,dataType:"json",async:!1,success:function(e,i){t.userData=$.parseJSON(e)}})}},this.getUserData=function(){return this.userData},this.setupAdSlots=function(t){this.reset(),$.each(t,$.proxy(function(t,e){this.setupElement(e)},this))},this.setupElement=function(i){r++;var n=$(i);if(void 0!==n.attr("id"))return void(-1==g.indexOf(n.attr("id"))&&g.push(n.attr("id")));var s=t+n.data("unit"),o=e+r,l=n.data("size").toLowerCase().split(","),c=[];l.forEach(function(t){var e=t.toLowerCase().split("x"),i=parseInt(e[0],10),n=parseInt(e[1],10);c.push([i,n])}),1==c.length&&(c=c[0]),n.attr("id",o);var u=n.data("nojs");if(u)return void this.addNonJSAd(n);g.push(o),a++,n.is("[data-autoresize]")?n.addClass("autoresize").css({paddingBottom:Math.round(1e3*height/width)/10+"%"}):n.is("[data-fullwidth]")&&n.addClass("fullwidth");var d=n.data("onload");void 0!==d&&(h[o]=d),googletag.cmd.push(function(){googletag.defineSlot(s,c,o).addService(googletag.pubads()).set("container-id",o)})},this.getLinkCustomTargeting=function(){var t=this.getCustomTargeting(),e=[];return null!=t&&void 0!==t?($.each(t,function(t,i){e.push(t+"="+i)}),"&t="+encodeURIComponent(e.join("&"))):""},this.getCustomTargeting=function(){null==this.userData&&this.setUserData();var t=null!=this.getUserData()?this.getUserData():{};return $.extend({},C.global.adTargeting,t)},this.setupCustomTargeting=function(){var t=this.getCustomTargeting();null!=t&&this.setupDFPTargeting(t)},this.setupDFPTargeting=function(t){null!=t&&$.each(t,function(t,e){googletag.cmd.push(function(){googletag.pubads().setTargeting(t,e+"")})})},this.slotRendered=function(t){var e=t.slot.getName(),i=t.slot.get("container-id"),n=t.isEmpty===!0?"no":"yes";C.global.adsDebugging&&(console.timeEnd("from render ads to slot render"),console.time("from slot rendered to slot load")),l++,this._queueAdLogData(e,"js",n),t.isEmpty===!1&&void 0!==h[i],a===l&&this._logAds(),Eggshell.find(this).trigger("slot rendered",{id:i,name:e,nonempty:!t.isEmpty,event:t})},this.displayAds=function(){var t=this;$.each(g,function(e,i){t.displayAdsAction(i),googletag.cmd.push(function(){googletag.display(i)})})},this.executeOnLoadAction=function(t){switch(t){case"tower-slider":m||(C.utility.showTower(),m=!0)}},this.displayAdsAction=function(t){void 0!==h[t]&&this.executeOnLoadAction(h[t])},this._queueAdLogData=function(t,e,i){p.push({ad_slot:t,ad_type:e,ad_displayed:i})},this._logAds=function(){var t={dfp_ads:JSON.stringify(p)};f.trigger("session log",t)},this.onScriptLoad=function(){},this.checkForAdBlocker=function(){if(u===!1){var t=document.createElement("script");t.async=!0,t.type="text/javascript",t.src="/s/_common/advertisements/adsense.js",u=!0;var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e);var i=this;t.onerror=function(){i._hasBlocker()},t.onload=function(){},i.setAdBlockTest(!0),i.render()}},this.setAdBlockTest=function(t){d=t},this.addNonJSAd=function(t){var e=$(t);$(t).append(this._defaultAdTemplate({adImageSrc:this.getLinkAds()+this.getProvider()+e.data("unit"),size:e.data("size"),time:this.getUnixTimeStamp(),targeting:this.getLinkCustomTargeting()})),this._queueAdLogData(t.data("unit"),"html","unknown")},this.getProvider=function(){return t},this.getLinkAds=function(){var t="https:"===document.location.protocol;return(t?"https:":"http:")+i},this.getUnixTimeStamp=function(){return Math.round(+new Date/1e3)},this._defaultAdTemplate=function(t){return'<img src="'+t.adImageSrc+"&sz="+t.size+"&c="+t.time+t.targeting+'" />'},this._hasBlocker=function(){c=!0;var t={ad_blocker_detected:c};f.trigger("session log",t),Eggshell.find(this).trigger("has adBlock")};var v;this.detectIncognitoMode=function(){var t,e=this;try{t=window.indexedDB.open("test")}catch(i){v=!0}"undefined"==typeof v&&this.retry(function n(){return"done"===t.readyState?!0:!1},function s(e){e||(v=t.result?!1:!0)}),this.retry(function o(){return"undefined"!=typeof v?!0:!1},function r(t){v&&e._hasBlocker()})},this.retry=function(t,e){var i=0,n=50,s=10,o=!1,r=window.setInterval(function(){t()&&(window.clearInterval(r),e(o)),i++>n&&(window.clearInterval(r),o=!0,e(o))},s)},this.detectFF42=function(){var t=42;if(navigator.userAgent.search("Firefox")>=0){var e=navigator.userAgent.search("Firefox")+8,i=navigator.userAgent.substring(e);if(parseFloat(i)>=parseFloat(t))return!0}return!1},this.destruct=function(){window.googletag&&window.googletag.hasOwnProperty("destroySlots")&&window.googletag.destroySlots(),m&&(C.utility.hideTower(),m=!1),h={}}}),Eggshell.define("C.common.bookcover.centered",{inputs:["set book image","set book link","set book alt","turn on shadow","turn off shadow","add class"],outputs:["ready","error","clicked"]},Backbone.View.extend({initialize:function(){console.log("C.common.bookcover.centered is deprecated, use C.common.bookcover instead"),this.model=new Backbone.Model,this.enableShadow(),Eggshell.find(this).on("set book image",this.setBookImage).on("set book link",this.setBookLink).on("turn on shadow",this.enableShadow).on("turn off shadow",this.disableShadow).on("set book alt",this.setBookAlt).trigger("ready")},enableShadow:function(){this.$el.addClass("shadow-enabled")},disableShadow:function(){this.$el.removeClass("shadow-enabled")},setBookAlt:function(t,e){var i=this.$("img");$(i).attr("alt",e)},setBookImage:function(t,e){if(!e&&"string"!=typeof e)throw"Invalid book image url. Image url needs to be a non-empty string";this.model.set("image",e),this.render()},setBookLink:function(t,e){if(!e&&"string"!=typeof e)throw"Invalid book link url. Link needs to be a non-empty string";this.model.set("link",e),this.render()},render:function(){this.$el.empty();var t=this.$el;if(this.model.get("image")){this.model.get("link")&&(t=$("<a></a>").attr("href",this.model.get("link")).appendTo(this.$el)),t.addClass("img-wrapper");var e=$("<img/>").appendTo(t);e.error($.proxy(function(){this.$el.addClass("error"),this.$("img").remove(),this.Eggshell.trigger("error")},this)),e.attr("src",this.model.get("image"))}},events:{"click a":"bookOnClick"},bookOnClick:function(t){Eggshell.find(this).trigger("clicked")}})),Eggshell.define("C.common.bookcover.enhance",{inputs:[],outputs:["ready","error","clicked"],newNode:!1},Backbone.View.extend({events:{"click a":"bookOnClick"},initialize:function(){},bookOnClick:function(t){this.Eggshell.trigger("clicked")}})),Eggshell.define("C.common.bookcover",{inputs:["show","hide","set book image","set book alt","set book link","set book cover size","set book cover type","set book data","get book data","turn on shadow","turn off shadow","add class"],outputs:["ready","error","clicked","returned book data"]},Backbone.View.extend({events:{"click a":"bookOnClick"},initialize:function(){this.model=new Backbone.Model,this.$el.addClass("centered shadow-enabled"),"undefined"!=typeof $.browser&&$.browser&&$.browser.msie&&$.browser.version<=8&&this.$el.addClass("ie-old"),Eggshell.find(this).on("set book cover type",this.setBookCoverType).on("set book cover size",this.setBookCoverSize).on("set book image",this.setBookImage).on("set book alt",this.setBookAlt).on("set book link",this.setBookLink).on("add class",this.setBookClassName).on("turn on shadow",this.enableShadow).on("turn off shadow",this.disableShadow).on("set book data",this.setData).on("get book data",this.getData).trigger("ready")},setData:function(t,e){this.model.set("data",e)},getData:function(){Eggshell.find(this).trigger("returned book data",this.model.get("data"))},render:function(){this.$el.removeClass("img-wrapper"),this.$el.empty();var t=this.$el;if(this.model.get("image")){this.model.get("link")&&(t=$("<a></a>").attr("href",this.model.get("link")).appendTo(this.$el)),this.$el.hasClass("centered")&&t.addClass("img-wrapper");var e=$("<img/>").appendTo(t);e.error($.proxy(function(){this.$el.addClass("error"),this.$("img").remove(),this.Eggshell.trigger("error")},this)),e.attr("src",this.model.get("image"))}},setBookCoverType:function(t,e){if(!e||"string"!=typeof e)throw"Invalid book cover type. Type needs to be a string value.";this.$el.removeClass("flexible centered shadow-enabled img-wrapper"),"flexible"===e?this.$el.addClass("flexible"):"centered"===e&&this.$el.addClass("centered shadow-enabled")},setBookCoverSize:function(t,e){if(!e||"string"!=typeof e)throw"Invalid book cover size. Size needs to be a string value.";this.$el.removeClass("large medium small"),"small"===e?this.$el.addClass("small"):"medium"===e?this.$el.addClass("medium"):"large"===e&&this.$el.addClass("large")},setBookImage:function(t,e){if(!e&&"string"!=typeof e)throw"Invalid book image url. Url needs to be a string value.";this.model.set("image",e),this.render()},setBookAlt:function(t,e){if(!e&&"string"!=typeof e)throw"Invalid book alt. Alt needs to be a string value.";this.$("img").attr("alt",e)},setBookLink:function(t,e){if(!e&&"string"!=typeof e)throw"Invalid link. Link needs to be a string value.";this.model.set("link",e),this.render()},setBookClassName:function(t,e){if(!e&&"string"!=typeof e)throw"Invalid class name";this.$("img").addClass(e)},enableShadow:function(){this.$el.addClass("shadow-enabled")},disableShadow:function(){this.$el.removeClass("shadow-enabled")},bookOnClick:function(t){this.Eggshell.trigger("clicked")}})),Eggshell.defineInterface("C.common.dialog.interface",{inputs:["set id","set headline","set sub headline","set icon","set icon size","set content html","set content component","get content area","destroy content","set control","get control area","show","hide","show headline","hide headline","show sub headline","hide sub headline","show icon","hide icon","enable default control","show control","set primary button","set secondary button","set link","show primary button","hide primary button","disable primary button","enable primary button","show secondary button","hide secondary button","disable secondary button","enable secondary button","show link","hide link","hide control","enable screen blocker click","disable screen blocker click","disable default padding","hide close button","configure dialog","configure controls","set content","show loading","hide loading"],outputs:["content component created","content area","control component created","control area","before show","shown","hidden","headline clicked","sub headline clicked","icon clicked","close button clicked","screen blocker clicked","primary button clicked","secondary button clicked","link clicked","content clicked"]}),Eggshell.define("C.common.dialog",{"interface":"C.common.dialog.interface"},Backbone.View.extend({componentNS:null,controlNS:null,options:{icon:!1,iconSize:!1,headline:"",subHeadline:"",controls:{primaryText:"Ok",secondaryText:"Cancel",primaryCallback:$.noop,secondaryCallback:$.noop},screenBlockerClickEnabled:!0,screenBlockerScrollEnabled:!1,noPadding:!1,hideClose:!1,closeTitle:C.resource.fetch("C.Eggshell.dialog.close.title"),html:""},initialize:function(t){this.bindEvents(),this.bindV2Interface(),this.configureDialog(t),t&&t.control&&this.configureControls(t.control),t&&t.html&&this.setContent(t.html),this.render(),Eggshell.find(this).on("destroy",this.destroy)},render:function(){this.renderDialog(),this.$(".screenBlocker").css("z-index",C.utility.getMaxIndex()),this.$(".dialog").css("z-index",C.utility.getMaxIndex()+1)},renderDialog:function(){var t=this.templates.dialog(this.options);this.$el.html(t),this.renderHeader(),this.renderContent(),this.renderControls()},renderHeader:function(){var t=this.templates.header(this.options);this.$(".header").first().html(t)},renderContent:function(){this.$(".content").first().show().removeClass("disabled").html(this.options.html),this.options.html||this.$(".content").hide().addClass("disabled")},renderControls:function(){this.controlNS&&this.controlNS.destroy(),this.controlNS=Eggshell.create("C.Eggshell.dialog.control.standard",{el:$.extend({},this.$(".control"))}).trigger("set primary button",this.options.controls.primaryText).trigger("set secondary button",this.options.controls.secondaryText).on("primary button clicked",this.options.controls.primaryCallback,this).on("secondary button clicked",this.options.controls.secondaryCallback,this),this.loading||(this.loading=Eggshell.create("C.Eggshell.loading.inline",{el:$.extend({},this.$(".control"))})),this.loading.trigger("hide")},bindV2Interface:function(){Eggshell.find(this).on("configure dialog",function(t,e){this.configureDialog(e),this.render()},this).on("configure controls",function(t,e){this.configureControls(e),this.renderControls()},this).on("set content",function(t,e){this.setContent(e),this.renderContent()},this)},configureDialog:function(t){var e;for(e in t)t.hasOwnProperty(e)&&"controls"!==e&&(this.options[e]=t[e])},configureControls:function(t){var e;for(e in t)t.hasOwnProperty(e)&&(this.options.controls[e]=t[e])},setContent:function(t){t&&(this.options.html=t)},destroy:function(){this.hide(),this.destroyContent(),this.destroyControl()},bindEvents:function(){Eggshell.find(this).on("set id",function(t,e){this.$(".dialog").attr("id",e)}).on("add class",function(t,e){this.$(".dialog").addClass(e)}).on("set headline",function(t,e){if("string"!=typeof e)throw"Invalid headline";this.configureDialog({headline:e}),this.renderHeader()}).on("set sub headline",function(t,e){if("string"!=typeof e)throw"Invalid sub headline";this.configureDialog({subHeadline:e}),this.renderHeader()}).on("set icon",function(t,e){if("boolean"!=typeof e&&"string"!=typeof e)throw"Invalid icon class name";this.configureDialog({icon:e}),this.renderHeader()}).on("set icon size",function(t,e){if("boolean"!=typeof e&&"string"!=typeof e)throw"Invalid icon class name";this.configureDialog({iconSize:e}),this.renderHeader()}).on("set content html",function(t,e){if("string"!=typeof e)throw"Invalid content html";this.destroyContent(),this.setContent(e),this.renderContent()}).on("disable screen blocker click",function(t,e){this.configureDialog({screenBlockerClickEnabled:!1})}).on("enable screen blocker click",function(t,e){this.configureDialog({screenBlockerClickEnabled:!0})}).on("enable screen blocker scroll",function(t,e){this.configureDialog({screenBlockerScrollEnabled:!0}),this.$(".screenBlocker").addClass("scrollable"),this.$(".content").css("max-height","none")}).on("disable screen blocker scroll",function(t,e){this.configureDialog({screenBlockerScrollEnabled:!1}),this.$(".screenBlocker").removeClass("scrollable"),this.resize()}).on("disable default padding",function(t,e){this.configureDialog({noPadding:!0}),this.render()}).on("hide close button",function(t,e){this.configureDialog({hideClose:!0}),this.renderHeader()}).on("enable default control",function(t,e){if(!e&&"boolean"!=typeof e)throw"Invalid control enable flag";this.$(".control").show().removeClass("disabled"),this.destroyControl(),
this.controlNS=Eggshell.create("C.Eggshell.dialog.control.standard",{el:$.extend({},this.$(".control"))}),Eggshell.connect(Eggshell.find(this).getNamespace(),"set primary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"set secondary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"set link",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"show primary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"hide primary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"disable primary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"enable primary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"show secondary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"hide secondary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"disable secondary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"enable secondary button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"set text below button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"show text below button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"hide text below button",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"show link",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"hide link",this.controlNS),Eggshell.connect(Eggshell.find(this).getNamespace(),"enable screen blocker",this.controlNS),Eggshell.connect(this.controlNS,"primary button clicked",Eggshell.find(this).getNamespace()),Eggshell.connect(this.controlNS,"secondary button clicked",Eggshell.find(this).getNamespace()),Eggshell.connect(this.controlNS,"link clicked",Eggshell.find(this).getNamespace()),this.controlNS.trigger("show")}).on("set content component",function(t,e){if(!e&&"string"!=typeof e)throw"Invalid content component constructor";this.destroyContent(),this.componentNS=Eggshell.create(e,$.extend({},this.$(".content"))),Eggshell.find(this).trigger("content component created",this.componentNS)}).on("get content area",function(t,e){Eggshell.find(this).trigger("content area",$.extend({},this.$(".content")))}).on("destroy content",function(t,e){this.destroyContent()}).on("set control",function(t,e){if(!e||"string"!=typeof e)throw"Invalid control constructor";this.controlNS&&this.controlNS.destroy(),this.controlNS=Eggshell.create(e,{el:$.extend({},this.$(".control"))}),this.$(".control").show().removeClass("disabled"),Eggshell.find(this).trigger("control component created",this.controlNS)}).on("get control area",function(t,e){Eggshell.find(this).trigger("control area",$.extend({},this.$(".control")))}).on("show",function(){this.show()}).on("hide",function(){this.hide()}).on("show headline",function(t,e){this.$(".headline").show()}).on("hide headline",function(t,e){this.$(".headline").hide()}).on("show sub headline",function(t,e){this.$(".subHeadline").show()}).on("hide sub headline",function(t,e){this.$(".subHeadline").hide()}).on("show icon",function(t,e){this.$(".icon").show()}).on("hide icon",function(t,e){this.$(".icon").hide()}).on("show control",function(t,e){this.$(".control").show().removeClass("disabled")}).on("hide control",function(t,e){this.$(".control").hide().addClass("disabled")}).on("show loading",function(t,e){this.controlNS.trigger("hide"),this.loading.trigger("show")}).on("hide loading",function(t,e){this.loading.trigger("hide"),this.controlNS.trigger("show")}).on("scroll to top",function(){this.$(".content").offset().top<0&&$(".screenBlocker",this.$el).animate({scrollTop:0},100)});var t=Eggshell.create("C.Eggshell.window.resize.tracker");t.on("resize",$.proxy(this.resize,this))},destroyContent:function(){this.componentNS&&this.componentNS.destroy(),this.$(".content").html("")},destroyControl:function(){this.controlNS&&this.controlNS.destroy(),this.$(".control").html("")},show:function(){var t=navigator.userAgent.match(/iPad/i)?!1:!0;Eggshell.find("C.common.overlay.tooltip").trigger("acitvate tooltip"),this.resizable=!0,t&&this.lockViewport(),this.$el.show(),this.$(".dialog").show(),this.resize(),this.$(".dialog").hide(),this.$(".dialog").fadeIn(300,$.proxy(function(){Eggshell.find(this).trigger("shown"),this.resize()},this))},hide:function(){this.resizable=!1,this.$(".dialog").fadeOut(300,$.proxy(function(){this.unlockViewport(),this.$el.hide(),Eggshell.find(this).trigger("hidden")},this)),Eggshell.find("C.common.overlay.tooltip").trigger("deacitvate tooltip")},lockViewport:function(){$("html, body").css({overflow:"hidden"})},unlockViewport:function(){$("html, body").css({overflow:"visible"})},resize:function(){if(!this.options.screenBlockerScrollEnabled){var t=this.$(".dialog"),e=this.$(".control"),i=t.height(),n=$(window).height(),s=n-2*parseInt(t.css("top"),10),o=this.$(".header").height();o&&(s-=o),e.is(":visible")&&(s-=e.outerHeight(!0));var r=t.css("padding");r||(r=t.css("padding-top")),r&&(s-=2*parseInt(r.replace("px"))),0>=s&&(s=0),this.$(".content").css("max-height",s)}},events:{"click .close":"closeOnClick","click .screenBlocker":"screenBlockerOnClick","click .headline":"headlineOnClick","click .subHeadline":"subHeadlineOnClick","click .icon":"iconOnClick","click .content":"contentOnClick"},closeOnClick:function(t){t.preventDefault(),t.stopPropagation(),Eggshell.find(this).trigger("close button clicked"),this.hide()},screenBlockerOnClick:function(t){this.options.screenBlockerClickEnabled!==!1&&$(t.target).hasClass("screenBlocker")&&(Eggshell.find(this).trigger("screen blocker clicked"),this.hide())},headlineOnClick:function(){Eggshell.find(this).trigger("headline clicked")},subHeadlineOnClick:function(){Eggshell.find(this).trigger("sub headline clicked")},iconOnClick:function(){Eggshell.find(this).trigger("icon clicked")},contentOnClick:function(t){Eggshell.find(this).trigger("content clicked",t)},templates:{dialog:_.template('<div class="screenBlocker"><div class="dialog<% if (noPadding) { %> no-padding<% } %>"><div class="header"></div><div class="content"></div><div class="control"></div></div></div>'),header:_.template('<div class="close<% if (hideClose) { %> hidden<% } %>" title="<%- closeTitle %>"></div><div class="icon<% if (icon) { %> <%= icon %><% } else { %> hidden<% } %><% if (iconSize) { %><%= iconSize %><% } %>"></div><h3 class="headline<% if (!headline) { %> hidden<% } %>"><%= headline %></h3><p class="subHeadline<% if (!subHeadline) { %> hidden<% } %>"><%= subHeadline %></p>')}})),C.resource.add("C.common.dialog.close.title","Close"),function(){var t={};t.escapeCss=function(t){return t=t.replace(/[!\"#$%&'\(\)\*\+,\.\/:;<=>\?\@\[\\\]\^`\{\|\}~]/g,"-")},t.escapeHtml=function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(t).replace(/[&<>"']/g,function(t){return e[t]})},t.hasClass=function(t,e){return e&&new RegExp("\\b"+e+"\\b").test(t.className)},t.addClass=function(e,i){var n=i.split(/\s+/),s;for(s=0;s<n.length;s++)t.hasClass(e,n[s])||(e.className+=(e.className?" ":"")+n[s])},t.removeClass=function(t,e){for(var i=e.split(/\s+/),n=t.className.split(/\s+/),s=0;s<i.length;s++){var o=n.indexOf(i[s]);o>-1&&n.splice(o,1)}t.className=n.join(" ")},t.getElement=function(t){var e=null;return"string"==typeof t?e=document.getElementById(t):"object"==typeof t&&(e=t[0]||t),e},t.getClassElement=function(t){var e=null;return e=document.getElementsByClassName(t)},t.removeElement=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},t.scrollTop=function(){var t=document.body,e=document.documentElement;return window.pageYOffset||e.scrollTop||t.scrollTop},t.scrollLeft=function(){var t=document.body,e=document.documentElement;return window.pageXOffset||e.scrollLeft||t.scrollLeft};var e="getBoundingClientRect"in document.documentElement;t.getOffset=e?function(e,i){var n=e.getBoundingClientRect(),s=document.body,o=document.documentElement,r=i?0:t.scrollTop(),a=i?0:t.scrollLeft(),l=o.clientTop||s.clientTop||0,c=o.clientLeft||s.clientLeft||0;return{top:Math.round(n.top+r-l),left:Math.round(n.left+a-c)}}:function(e,i){for(var n=0,s=0;e;)n+=parseFloat(e.offsetTop),s+=parseFloat(e.offsetLeft),e=e.offsetParent;return i&&(n-=t.scrollTop(),s-=t.scrollLeft()),{top:n,left:s}},t.getWidth=e?function(t){var e=t.getBoundingClientRect();return e.width}:function(t){return t.offsetWidth},t.getHeight=e?function(t){var e=t.getBoundingClientRect();return e.height}:function(t){return t.offsetHeight},t.createQueryString=function(t){var e="";if("string"==typeof t)e=t;else if(t){var i=[];for(key in t)t.hasOwnProperty(key)&&i.push(encodeURIComponent(key)+"="+encodeURIComponent(t[key]));e=i.join("&")}return e},t.ajax=function(e){var i=new XMLHttpRequest,n=e.url,s=e.method&&e.method.toUpperCase()||"GET",o="",r="undefined"!=typeof e.async?!!e.async:!0;if("GET"==s){var a=t.createQueryString(e.data);a&&(n+=-1===n.indexOf("?")?"?":"",n+="?"!==n.substr(-1)?"&":"",n+=a)}return i.onreadystatechange=function(){if(i.readyState==XMLHttpRequest.DONE)if(200==i.status){var t=i.responseText;try{t=JSON.parse(t)}catch(n){}e.success&&e.success.call(e.context||null,t,i)}else e.error&&e.error.call(e.context||null,i)},i.open(s,n,r),"POST"==s&&(i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o=t.createQueryString(e.data)),i.send(o),i},t.isMobileDevice=function(){var t=navigator.userAgent.toLowerCase();return-1!==t.indexOf("android")&&-1!==t.indexOf("mobile")||/webos|iphone|ipod|blackberry|iemobile|windows phone|windows ce|opera mini/i.test(t)},t.isMobileExperience=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)<768},t.isMobile=function(){return this.isMobileDevice()&&this.isMobileExperience()};var i=function(e){if(e&&!this.initialized){this.initialized=!0;var i=function(i){if(this.el=i.el?i.el[0]||i.el:null,this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",t.escapeCss(e.find(this).getNamespace())),this.el.setAttribute("class",t.escapeCss(e.find(this).getConstructorNamespace()))),this.bound=function(t){if(!this.bound[t]){if(!this[t])return;this.bound[t]=this[t].bind(this)}return this.bound[t]},this.bind)for(var n=0,s;s=this.bind[n];n++)this.bound(s);e.find(this).on("initialize",this.initialize)};e.define("C.common.crosspromo",{inputs:{render:{payload:"object"}},outputs:{},strict:!1},function(){var t=function(){i.apply(this,arguments)};return t.prototype={initialize:function(){e.find(this).on("render",this.render).on("destroy",this.destroy)},render:function(t,i){this.interrupt&&this.interrupt.trigger("destroy"),this.interrupt=e.create(i.type,{el:this.el}).trigger("render",i)},destroy:function(){this.interrupt&&this.interrupt.trigger("destroy")}},t}()),e.define("C.common.crosspromo.modal",{inputs:{render:{payload:{overlay:"object",tooltip:"object"}},hide:{payload:null}},outputs:{"action clicked":{payload:null},"cancel clicked":{payload:null},"outside clicked":{payload:null}},singleton:!0,immuneToDestroyAll:!0},function(){var t=function(){i.apply(this,arguments)};return t.prototype={initialize:function(){e.find(this).on("destroy",this.destroy).on("render",this.render).on("hide",this.hide),this.overlay=e.create("C.common.crosspromo.overlay"),this.tooltip=e.create("C.common.crosspromo.tooltip")},render:function(t,e){this.overlay.trigger("render",e.overlay),this.tooltip.trigger("render",e.tooltip),this.doConnects()},doConnects:function(){this.overlay.on("clicked",this.overlayClicked,this),this.tooltip.on("action clicked",this.actionClicked,this),this.tooltip.on("cancel clicked",this.cancelClicked,this)},doDisconnects:function(){this.overlay.off("clicked",this.overlayClicked,this),this.tooltip.off("action clicked",this.actionClicked,this),this.tooltip.off("cancel clicked",this.cancelClicked,this)},overlayClicked:function(){this.hide(),e.find(this).trigger("outside clicked")},actionClicked:function(){this.hide(),e.find(this).trigger("action clicked")},cancelClicked:function(){this.hide(),e.find(this).trigger("cancel clicked")},hide:function(){this.overlay.trigger("hide"),this.tooltip.trigger("hide"),this.doDisconnects()},destroy:function(){this.hide()}},t}()),e.define("C.common.crosspromo.overlay",{inputs:{render:{payload:{opacity:"float",zIndex:"integer",gap:{el:"HTMLElement",top:"number",left:"number",width:"number",height:"number"},parentEl:"HTMLElement",blockScroll:"bool"}},hide:{payload:null}},outputs:{clicked:{payload:null}},singleton:!0,immuneToDestroyAll:!0},function(){var n=function(){i.apply(this,arguments)};return n.prototype={bind:["onClick","locateGapOverTarget"],zIndexDefault:1500,gapShadowWidth:10,template:'<div class="content"><div class="gap"></div></div>',initialize:function(){this.bodyOverflow=null,this.gapTarget=null,this.gapElement=null,e.find(this).on("destroy",this.destroy).on("render",this.render).on("hide",this.hide)},render:function(e,i){this.needScrollBlock=void 0!==i.blockScroll?!!i.blockScroll:!0,this.blockScroll(),this.el.innerHTML=this.template,this.el.style.zIndex=void 0!==i.zIndex?i.zIndex:this.zIndexDefault,void 0!==i.opacity&&(this.el.getElementsByClassName("content")[0].style.opacity=i.opacity),i.gap?this.setupGap(i.gap):this.setupNoGap(),(t.getElement(i.parentEl)||document.body).appendChild(this.el),this.el.addEventListener("click",this.bound.onClick)},setupNoGap:function(){t.removeElement(this.gapElement),this.gapElement=null},setupGap:function(e){this.gapElement=this.el.getElementsByClassName("gap")[0],this.gapElement.style.width=(parseFloat(e.width)||0+2*this.gapShadowWidth)+"px",this.gapElement.style.height=(parseFloat(e.height)||0+2*this.gapShadowWidth)+"px",e.el?(this.gapTarget=t.getElement(e.el)?t.getElement(e.el):t.getClassElement(e.el)[0],this.gapTarget?(this.addWindowEvents(),this.locateGapOverTarget()):this.setupNoGap()):this.setGapPos(parseFloat(e.left),parseFloat(e.top))},locateGapOverTarget:function(){var e=t.getOffset(this.gapTarget,!0),i=e.left,n=e.top;i+=t.getWidth(this.gapTarget)/2,n+=t.getHeight(this.gapTarget)/2,this.setGapPos(i,n)},setGapPos:function(t,e){this.gapElement.style.left=t+"px",this.gapElement.style.top=e+"px"},addWindowEvents:function(){window.addEventListener("resize",this.bound.locateGapOverTarget),window.addEventListener("scroll",this.bound.locateGapOverTarget)},removeWindowEvents:function(){window.removeEventListener("resize",this.bound.locateGapOverTarget),window.removeEventListener("scroll",this.bound.locateGapOverTarget)},hide:function(){this.removeWindowEvents(),this.unblockScroll(),t.removeElement(this.el)},blockScroll:function(){this.needScrollBlock&&null===this.bodyOverflow&&(this.bodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden")},unblockScroll:function(){this.needScrollBlock&&null!==this.bodyOverflow&&(document.body.style.overflow=this.bodyOverflow||"visible",this.bodyOverflow=null)},onClick:function(){e.find(this).trigger("clicked")},destroy:function(){this.hide()}},n}()),e.define("C.common.crosspromo.fullPageInterrupt",{inputs:{render:{payload:{statusMessage:"string",icon:"string",bodyBg:"string",bodyPlain:"bool",title:"string",subTitle:"string",body:"string",image:"string",action:"string",actionText:"string",actionType:"string",legaleseText:"string",cancelText:"string",parentEl:"string",bodyImg:"string",titleInverse:"bool",bodyInverse:"bool",actionColor:"bool",inline:"bool"}}},outputs:{"action clicked":{payload:null},"cancel clicked":{payload:null}},singleton:!0,immuneToDestroyAll:!0},function(){var n=function(){i.apply(this,arguments)};return n.prototype={bind:["onOK","onCancel"],classnames:"",template:'<div class="fullPage"><div class="tempHeader"><div class="chg-hdr-content-temp"><a class="chg-logo-temp" href="/">Chegg</a></div></div><div class="fullContent"><div class="statusOverall"><div class="icon"><img src=""></div><div class="status"> </div></div><div class = "promo"><div class="imageContainer"><div class="image"><img src=""></div></div><div class="textPassage"><div class="title"></div><div class="sub-title"></div><div class="content"></div><div class="buttons"><div class="cancel"><a href="#">No, thanks</a></div><div class="CTA"><div class="action"><button>Show me</button></div><div class="sub-text"></div></div></div></div></div></div></div>',templateWeb:'<div class="fullPage"><div class="tempHeader"><div class="chg-hdr-content-temp"><a class="chg-logo-temp" href="/">Chegg</a></div></div><div class="fullContent"><div class="statusOverall"><div class="icon"><img src=""></div><div class="status"> </div></div><div class="promo"><div class="title"></div><div class="image"><img src=""></div><div class="sub-title"></div><div class="content"></div><div class="action"><button>Show me</button></div><div class="sub-text"></div><div class="cancel"><a href="#">No, thanks</a></div></div></div></div>',initialize:function(){e.find(this).on("render",this.render).on("destroy",this.destroy).on("hide",this.hide)},render:function(e,i){var n=void 0!==i.mobile?!!i.mobile:t.isMobile();if(n?(this.el.innerHTML=this.templateWeb,this.classnames+="mobile"):this.el.innerHTML=this.template,i.inline&&(this.classnames+="inline"),this.classnames&&t.addClass(this.el,this.classnames),this.el.style.zIndex=1501,i.bodyBg||i.bodyImg){var s=this.el.getElementsByClassName("promo")[0];i.bodyImg?(s.style.backgroundImage="url('"+i.bodyImg+"')",s.style.backgroundRepeat="no-repeat"):s.style.backgroundColor=i.bodyBg,this.el.getElementsByClassName("promo")[0]=s}i.statusMessage&&(this.el.getElementsByClassName("status")[0].innerHTML=t.escapeHtml(i.statusMessage)),i.icon&&(this.el.getElementsByClassName("icon")[0].getElementsByTagName("img")[0].src="check"==i.icon?"https://c.cheggcdn.com/assets/icons/success-large.png":"https://c.cheggcdn.com/assets/icons/info-large.png"),(i.statusMessage||i.icon)&&(this.el.getElementsByClassName("statusOverall")[0].className="statusOverallFilled",this.el.getElementsByClassName("status")[0].className="statusFilled",this.el.getElementsByClassName("icon")[0].className="iconFilled");var o=this.el.getElementsByClassName("title")[0];o.innerHTML=t.escapeHtml(i.title);var r=this.el.getElementsByClassName("sub-title")[0];r.innerHTML=t.escapeHtml(i.subTitle);var a=this.el.getElementsByClassName("content")[0],l=i.body||"";i.bodyPlain&&(l=t.escapeHtml(l)),a.innerHTML=l,this.el.getElementsByClassName("image")[0].getElementsByTagName("img")[0].src=i.image,this.actionURL=i.action,this.actionType=i.actionType;var c=this.el.getElementsByClassName("action")[0].getElementsByTagName("button")[0];i.actionText&&(c.innerHTML=t.escapeHtml(i.actionText)),c.addEventListener("click",this.bound.onOK);var u=this.el.getElementsByClassName("cancel")[0].getElementsByTagName("a")[0];i.cancelText&&(u.innerHTML=t.escapeHtml(i.cancelText)),u.addEventListener("click",this.bound.onCancel);var d=this.el.getElementsByClassName("sub-text")[0];d.innerHTML=i.legaleseText,i.titleInverse&&(t.addClass(o,"inverse"),t.addClass(r,"inverse"),t.addClass(d,"inverse")),i.bodyInverse&&t.addClass(a,"inverse"),i.actionColor||(t.addClass(u,"inverse"),t.addClass(c,"inverseButton")),(t.getElement(i.parentEl)||document.body).appendChild(this.el)},onOK:function(i){if(this.actionURL){var n="string"==typeof this.actionType&&this.actionType||"";switch(n.toLowerCase()){case"ajax":t.ajax({url:this.actionURL});break;default:window.location=this.actionURL}}e.find(this).trigger("action clicked")},onCancel:function(t){t.preventDefault(),this.hide(),e.find(this).trigger("cancel clicked")},hide:function(){this.classnames&&(t.removeClass(this.el,this.classnames),this.classnames=""),t.removeElement(this.el)},destroy:function(){this.hide()}},n}()),e.define("C.common.crosspromo.tooltip",{inputs:{render:{payload:{title:"string",subTitle:"string",action:"string",image:"string",actionText:"string",actionType:"string",cancelText:"string",zIndex:"integer",position:{top:"number",left:"number"},caret:"string",parentEl:"HTMLElement",tutorsBypass:"bool"}},hide:{payload:null}},outputs:{"action clicked":{payload:null},"cancel clicked":{payload:null}},singleton:!0,immuneToDestroyAll:!0},function(){var n=function(){i.apply(this,arguments)};return n.prototype={bind:["onOK","onCancel"],zIndexDefault:1501,defaultWidth:540,defaultHeight:540,template:'<div class="content"><div class="title"></div><div class="sub-title"></div><div class="image"><img src=""></div><div class="action"><button>Show me</button></div><div class="cancel"><a href="#">No, thanks</a></div><div class="caret"></div></div>',initialize:function(){e.find(this).on("destroy",this.destroy).on("render",this.render).on("hide",this.hide)},render:function(e,i){if(this.gapTarget=t.getClassElement("gap")[0],this.parentEl=t.getElement(i.parentEl)?t.getElement(i.parentEl):t.getClassElement(i.parentEl)[0],i.tutorsBypass){var n=t.getOffset(this.gapTarget,!0);window.scrollBy(0,n.top-300)}this.el.innerHTML=this.template,this.el.style.zIndex=void 0!==i.zIndex?i.zIndex:this.zIndexDefault;var s=this.el.getElementsByClassName("content")[0];"fit_to_content"!==i.contentSizeType&&(i.contentSizeType.width&&(s.style.width=i.contentSizeType.width),i.contentSizeType.height&&(s.style.height=i.contentSizeType.height));var o=t.getOffset(this.parentEl,!0),r=o.left,a=o.top;i.position={left:r,top:a},i.position=this.positionTooltip(this.parentEl,i.position,s,this.gapTarget,i.tutorsBypass),i.position?(s.style.left=(parseFloat(i.position.left)||0)+"px",s.style.top=(parseFloat(i.position.top)||0)+"px"):t.addClass(s,"center"),i.caret&&t.addClass(s,"caret-"+i.caret),this.el.getElementsByClassName("title")[0].innerHTML=t.escapeHtml(i.title||""),this.el.getElementsByClassName("sub-title")[0].innerHTML=t.escapeHtml(i.subTitle||""),i.image&&(this.el.getElementsByClassName("image")[0].getElementsByTagName("img")[0].src=i.image.replace(/^https?:/i,"")),this.actionURL=i.action,this.actionType=i.actionType;var l=this.el.getElementsByClassName("action")[0].getElementsByTagName("button")[0];i.actionText&&(l.innerHTML=t.escapeHtml(i.actionText)),l.addEventListener("click",this.bound.onOK);var c=this.el.getElementsByClassName("cancel")[0].getElementsByTagName("a")[0];i.cancelText&&(c.innerHTML=t.escapeHtml(i.cancelText)),c.addEventListener("click",this.bound.onCancel),(t.getElement(i.parentEl)||document.body).appendChild(this.el)},positionTooltip:function(e,i,n,s,o){var r=i.left,a=i.top;if(o){i.left=r-t.getWidth(n),i.top=a-t.getHeight(n)/2,t.addClass(n,"caret-right");var l=t.getClassElement("caret")[0];return l.style.postion="absolute",l.style.top="65px",i}if(this.defaultHeight<=a)i.top=a-this.defaultHeight,t.addClass(n,"caret-bottom");else if(this.defaultWidth<document.documentElement.clientWidth-(r+t.getWidth(e))){i.left=r+t.getWidth(e),t.addClass(n,"caret-left");var l=t.getClassElement("caret")[0];l.style.postion="absolute",l.style.top=t.getHeight(n)/-2+t.getHeight(s)/2+"px"}else if(this.defaultHeight<document.documentElement.clientHeight-(a+t.getHeight(e)))i.top=a+t.getHeight(e),t.addClass(n,"caret-top");else if(this.defaultWidth<=r){i.left=r-this.defaultWidth,t.addClass(n,"caret-right");var l=t.getClassElement("caret")[0];l.style.postion="absolute",l.style.top=t.getHeight(n)/-2+t.getHeight(s)/2+"px"}return i},hide:function(){t.removeElement(this.el)},onOK:function(i){if(this.actionURL){var n="string"==typeof this.actionType&&this.actionType||"";switch(n.toLowerCase()){case"ajax":t.ajax({url:this.actionURL});break;default:window.location=this.actionURL}}e.find(this).trigger("action clicked")},onCancel:function(t){t.preventDefault(),e.find(this).trigger("cancel clicked")},destroy:function(){this.hide()}},n}()),e.define("C.common.crosspromo.popup",{inputs:{render:{payload:{title:"string",subTitle:"string",body:"string",action:"string",image:"string",titleInverse:"bool",titleBg:"string",subTitleInverse:"bool",bodyPlain:"bool",bodyInverse:"bool",bodyBg:"string",bodyImg:"string",actionText:"string",actionType:"string",actionColor:"string",cancelText:"string",cancelColor:"string",legaleseText:"string",zIndex:"integer",inline:"bool",customClassname:"string",parentEl:"HTMLElement",overlay:"object"}},hide:{payload:null}},outputs:{"action clicked":{payload:null},"cancel clicked":{payload:null},"close clicked":{payload:null},"overlay clicked":{payload:null}},singleton:!0,immuneToDestroyAll:!0},function(){var n=function(){i.apply(this,arguments)};return n.prototype={zIndexDefault:1501,classnames:"",template:'<div class="content"><div class="body"><div class="title"></div><div class="sub-title"></div><div class="image"><img src=""></div><div class="text"></div></div><div class="footer"><div class="cancel"><span>Cancel</span></div><div class="button"><button>Continue</button><div class="legalese"></div></div></div><div class="close"></div></div>',initialize:function(){e.find(this).on("destroy",this.destroy).on("render",this.render).on("hide",this.hide)},render:function(i,n){var s=void 0!==n.mobile?!!n.mobile:t.isMobile();"undefined"==typeof n.overlay&&(n.overlay={}),n.inline&&(n.overlay=!1),n.overlay&&(this.overlay=e.create("C.common.crosspromo.overlay").trigger("render","object"==typeof n.overlay?n.overlay:{}),this.overlayAutohide=void 0===n.overlay.autoHide||!!n.overlay.autoHide),s&&(this.classnames+=" mobile"),n.inline&&(this.classnames+=" inline"),n.customClassname&&(this.classnames+=" "+n.customClassname),this.classnames&&t.addClass(this.el,this.classnames),this.el.innerHTML=this.template,this.el.style.zIndex=void 0!==n.zIndex?n.zIndex:n.inline?"auto":this.zIndexDefault;var o=this.el.getElementsByClassName("title")[0];o.innerHTML=n.title,n.titleInverse&&t.addClass(o,"inverse"),n.titleBg&&(o.style.background=n.titleBg,t.addClass(o,"bg"));var r=this.el.getElementsByClassName("sub-title")[0];r.innerHTML=n.subTitle,n.subTitleInverse&&t.addClass(r,"inverse");var a=this.el.getElementsByClassName("text")[0],l=n.body||"";n.bodyPlain&&(l=t.escapeHtml(l)),a.innerHTML=l,n.bodyInverse&&t.addClass(a,"inverse");var c=this.el.getElementsByClassName("body")[0];n.bodyImg?c.style.backgroundImage="url("+n.bodyImg.replace(/^https?:/i,"")+")":n.bodyBg&&(c.style.background=n.bodyBg);var u=this.el.getElementsByClassName("image")[0].getElementsByTagName("img")[0];n.image?u.src=n.image.replace(/^https?:/i,""):t.removeElement(u),this.actionURL=n.action,this.actionType=n.actionType;var d=this.el.getElementsByClassName("button")[0].getElementsByTagName("button")[0];n.actionText&&(d.innerHTML=t.escapeHtml(n.actionText)),n.actionColor&&(d.style.backgroundColor=n.actionColor),d.addEventListener("click",this.bound("onOK"));var h=this.el.getElementsByClassName("cancel")[0].getElementsByTagName("span")[0];n.cancelText&&(h.innerHTML=t.escapeHtml(n.cancelText)),n.cancelColor&&(h.style.color=n.cancelColor),h.addEventListener("click",this.bound("onCancel")),n.legaleseText&&(legalese.innerHTML=n.legaleseText),this.el.getElementsByClassName("close")[0].addEventListener("click",this.bound("onClose")),(t.getElement(n.parentEl)||document.body).appendChild(this.el),this.doConnects()},doConnects:function(){this.overlay&&this.overlay.on("clicked",this.overlayClicked,this)},doDisconnects:function(){this.overlay&&(this.overlay.off("clicked",this.overlayClicked,this),this.overlay=null)},overlayClicked:function(){this.overlayAutohide&&this.hide(),e.find(this).trigger("overlay clicked")},hide:function(){this.classnames&&t.removeClass(this.el,this.classnames),this.classnames="",t.removeElement(this.el),this.overlay&&this.overlay.trigger("hide"),this.doDisconnects()},onOK:function(i){if(this.actionURL){var n="string"==typeof this.actionType&&this.actionType||"";switch(n.toLowerCase()){case"ajax":t.ajax({url:this.actionURL});break;default:window.location=this.actionURL}}e.find(this).trigger("action clicked")},onCancel:function(t){this.hide(),e.find(this).trigger("cancel clicked"),t.preventDefault(),t.stopPropagation()},onClose:function(t){this.hide(),e.find(this).trigger("close clicked")},destroy:function(){this.hide()}},n}())}};i(window.Eggshell),window.requirejs&&window.define&&define(function(){return i})}(),$(function(){var t=Eggshell.create("C.report.GA"),e=function(e,i,n,s){if(t.trigger("report custom event",{page:e,section:i,link:n}),s){var o=$(s.currentTarget).attr("href");if(o&&(s.stopImmediatePropagation(),Eggshell.find("C.global.header.rightsection.usermenu").trigger("hide menu"),Eggshell.find("C.global.header.searchbox").trigger("collapse search box")),o&&(0===o.indexOf("mailto:")||0===o.indexOf("//")||0===o.indexOf("#")||-1!==o.indexOf("/#"))){if(0===o.indexOf("#")&&$(o).length>0){var r=$(o).offset().top,a=r-60;window.location.replace(o),window.scrollTo(0,a),s.preventDefault()}return}!o||s.ctrlKey||s.metaKey||(s.preventDefault(),setTimeout(function(t,e){return function(){if($(s.target).hasClass("chg-global-nav-home")||$(s.target).hasClass("chg-global-nav-list-section-home")?C.utility.openGlobalNav(animate=!0):$(s.target).hasClass("chg-logo")?$(s.target).next()&&$(s.target).next().hasClass("chg-menu")&&C.utility.openGlobalNav(animate=!0):C.utility.closeGlobalNav(animate=!0),null!=t.attr("data-noajax")){if(null!=t.attr("data-noredirect"))return;self.location=e}else C.utility.navigate(e)}}($(s.currentTarget),o),200))}};$(".chg-global-nav .track-nav-profile").on("click",function(t){e("SIHP","Menu","Profile",t)}),$(".chg-global-nav .track-nav-courses").on("click",function(t){e("SIHP","Menu","Courses",t)}),$(".chg-global-nav .track-nav-qna").on("click",function(t){e("SIHP","Menu","Q&A",t)}),$(".chg-global-nav .track-nav-solutions").on("click",function(t){e("SIHP","Menu","Solutions",t)}),$(".chg-global-nav .track-nav-books").on("click",function(t){e("SIHP","Menu","Books",t)}),$(".chg-global-nav .track-nav-scholarships").on("click",function(t){e("SIHP","Menu","Scholarships",t)}),$(".chg-global-nav .track-nav-internship").on("click",function(t){e("SIHP","Menu","Internships",t)}),$(".chg-global-nav .track-career-center").on("click",function(t){e("SIHP","Menu","Career Center",t)}),$(".chg-global-nav .track-nav-freshmen").on("click",function(t){e("SIHP","Menu","Freshmen",t)}),$(".chg-global-nav .track-nav-live-tutors").on("click",function(t){e("SIHP","Menu","Live Tutors",t)}),$(".chg-global-nav .track-nav-admission").on("click",function(t){e("SIHP","Menu","Admissions",t)}),$(".chg-global-nav .track-nav-deal-center").on("click",function(t){e("SIHP","Menu","Deal Center",t)}),$(".chg-global-nav .track-nav-online-courses").on("click",function(t){e("SIHP","Menu","Online Courses",t)}),$(".chg-global-nav .track-nav-home").on("click",function(t){e("SIHP","Menu","Home",t)}),$(".chg-global-nav .track-nav-home-icon").on("click",function(t){e("SIHP","Menu","Home Icon",t)}),C.dom.$content.observe("click",".apple-store-btn",function(t){e("SIHP","App Promo","iOS",t)},this),C.dom.$content.observe("click",".google-play-btn",function(t){e("SIHP","App Promo","Android",t)},this),C.dom.$content.observe("click",".recent-books .sellbook",function(t){e("SIHP","Books & Solutions","Buyback",t)},this),C.dom.$content.observe("click",".recent-books li.track-instant",function(t){e("SIHP","Books & Solutions","Instant Access",t)},this),C.dom.$content.observe("click",".recent-books li.track-ebook",function(t){e("SIHP","Books & Solutions","eTextbook",t)},this),C.dom.$content.observe("click","li.solution",function(t){e("SIHP","Books & Solutions","TBS",t)},this),C.dom.$content.observe("click","li.potentialSolution",function(t){e("SIHP","Books & Solutions","Potential TBS",t)},this),C.dom.$content.observe("click","li.track-book",function(t){e("SIHP","Books & Solutions","Physical Book",t)},this),C.dom.$content.observe("click","a.track-see-all-books",function(t){e("SIHP","Books & Solutions","See All Books",t)},this),C.dom.$content.observe("click","div#courses .course.view",function(t){e("SIHP","Courses","Course",t)},this),C.dom.$content.observe("click","div#courses .course.add",function(t){e("SIHP","Courses","Add Course",t)},this),C.dom.$content.observe("click","a.see-all-courses",function(t){
e("SIHP","Courses","See All Courses",t)},this),C.dom.$content.observe("click","#whats-next .track-view-order",function(t){e("SIHP","What's Next","View Order",t)},this),C.dom.$content.observe("click","#whats-next .track-early-return",function(t){e("SIHP","What's Next","Early Return",t)},this),C.dom.$content.observe("click","#whats-next .track-enter-school",function(t){e("SIHP","What's Next","Enter School",t)},this),C.dom.$content.observe("click","#whats-next .track-add-courses",function(t){e("SIHP","What's Next","Enter Courses",t)},this),C.dom.$content.observe("click","#whats-next .track-review-course",function(t){e("SIHP","What's Next","Review Course",t)},this),C.dom.$content.observe("click","#whats-next .track-scholarships",function(t){e("SIHP","What's Next","Scholarships",t)},this),C.dom.$content.observe("click","#whats-next .track-return-books",function(t){e("SIHP","What's Next","Return Books",t)},this),C.dom.$content.observe("click","a.track-find-tbs",function(t){e("SIHP","TBS and Q&A","Find Solutions",t)},this),C.dom.$content.observe("click",".tbs-row",function(t){e("SIHP","TBS and Q&A","TBS",t)},this),C.dom.$content.observe("click",".tbs-show-more",function(t){e("SIHP","TBS and Q&A","TBS Show More",t)},this),C.dom.$content.observe("click","a.track-ask",function(t){e("SIHP","TBS and Q&A","Ask a Question",t)},this),C.dom.$content.observe("click","a.track-answer",function(t){e("SIHP","TBS and Q&A","Answer Questions",t)},this),C.dom.$content.observe("click","a.track-my-questions",function(t){e("SIHP","TBS and Q&A","My Questions",t)},this),C.dom.$content.observe("click","a.track-my-answers",function(t){e("SIHP","TBS and Q&A","My Answers",t)},this),C.dom.$content.observe("click",".my-scholarships .scholarship",function(t){e("SIHP","Scholarships","Scholarship",t)},this),C.dom.$content.observe("click",".my-scholarships .more",function(t){e("SIHP","Scholarships","More Matches",t)},this),C.dom.$content.observe("click",".my-scholarships .see-all-scholarships",function(t){e("SIHP","Scholarships","See All Scholarships",t)},this);var i=C.global.userId;i&&""!=i?($("a.chg-global-nav-home").on("click",function(t){e("Header","House","Signed In",t)}),$("a.chg-logo").on("click",function(t){e("Header","Chegg Logo","Signed In",t)}),$("a.track-homework-help-signedin").on("click",function(t){e("Header","Homework Help","Signed In",t)}),$("a.chg-cart-area.chg-menu-item.track-cart").on("click",function(t){e("Header","Cart","Signed In",t)}),$("div.track-coupon").on("click",function(t){e("Header","Coupon","Signed In",t)}),C.dom.$header.observe("click",".chg-header-username",function(t){var i=t.currentTarget;$(i).hasClass("pop-active")||e("Header","Dropdown","Open Dropdown",t)},this),C.dom.$header.observe("click",".hdr-nav .track-my-account",function(t){e("Header","Dropdown","My Account",t)},this),C.dom.$header.observe("click",".hdr-nav .track-my-profile",function(t){e("Header","Dropdown","My Profile",t)},this),C.dom.$header.observe("click",".hdr-nav .track-user-avatar",function(t){console.log("coming here"),e("Header","Dropdown","User Avatar",t)},this),C.dom.$header.observe("click",".hdr-nav .track-track-books",function(t){e("Header","Dropdown","Track Books",t)},this),C.dom.$header.observe("click",".hdr-nav a.track-return-books",function(t){e("Header","Dropdown","Return Books",t)},this),C.dom.$header.observe("click",".hdr-nav a.track-extend",function(t){e("Header","Dropdown","Extend/Purchase",t)},this),C.dom.$header.observe("click",".hdr-nav a.track-sell-books",function(t){e("Header","Dropdown","Sell Books",t)},this),C.dom.$header.observe("click",".hdr-nav a.track-view-orders",function(t){e("Header","Dropdown","View Orders",t)},this),C.dom.$header.observe("click",".hdr-nav a.track-help",function(t){e("Header","Dropdown","Help",t)},this),C.dom.$header.observe("click",".hdr-nav a.track-signout",function(t){e("Header","Dropdown","Sign Out",t)},this)):($("a.chg-global-nav-home").on("click",function(t){e("Header","House","Signed Out",t)}),$("a.chg-logo").on("click",function(t){e("Header","Chegg Logo","Signed Out",t)}),$("a.track-homework-help-signedout").on("click",function(t){e("Header","Homework Help","Signed Out",t)}),$("a.chg-cart-area.chg-menu-item.track-cart").on("click",function(t){e("Header","Cart","Signed Out",t)}),$("div.track-coupon").on("click",function(t){e("Header","Coupon","Signed Out",t)}),$("a.track-signin").on("click",function(t){e("Header","Signed In","",t)}),C.dom.$header.observe("click",".chg-menu-item.chg-header-more",function(t){var i=t.currentTarget;$(i).hasClass("pop-active")||e("Header","More","Open Dropdown",t)},this),C.dom.$header.observe("click",".hdr-list .track-signup",function(t){e("Header","More","Sign Up",t)},this),C.dom.$header.observe("click",".hdr-list .track-selltextbooks",function(t){e("Header","More","Sell your books",t)},this),C.dom.$header.observe("click",".hdr-list .track-help",function(t){e("Header","More","Help",t)},this),C.dom.$header.observe("click",".hdr-list .track-returnbooks",function(t){e("Header","More","Return your books",t)},this)),$(".chg-footer .sell-textbooks").on("click",function(t){e("Footer","Help","Sell Textbooks",t)}),C.dom.$content.observe("click",".courseCollector .continue-btn-container .btn-continue",function(t){var i=$(t.currentTarget).closest(".courseCollector"),n=$(i).find("form.courses"),s=$(n).find("input[type=radio]");s.each(function(i){$(this).attr("checked")&&e("Post-Checkout","Course Collection","Added Courses",t)});var o=$(i).find("ul#otherCourseContainer"),r=$(o).find("li").length;r>=1&&e("Post-Checkout","Course Collection","Other Courses",t)},this)}),C("global"),C.global.cachedJS=[],C.global.pageObject={},C.global.instanceCounter=C.global.instanceCounter||0,C.global.pageCounter=C.global.pageCounter||0,C.global.adTargeting=C.global.adTargeting||{},$(function(){var t=function(){var t=Eggshell.find("C.common.advertisements");void 0==t.getId()&&(t=Eggshell.create("C.common.advertisements")),Eggshell.trigger(t,"render"),C.global.adsDebugging&&console.time("from render ads to slot render")};C.global.adsDebugging&&console.log("C.global.adsRenderEarlier",C.global.adsRenderEarlier),C.global.adsRenderEarlier&&t();var e=Eggshell.create("C.global.tutors.embed").trigger("render");Eggshell.immuneToDestroyAll(e);var i=Eggshell.create("C.common.crosspromo");Eggshell.immuneToDestroyAll(i),Eggshell.enableErrorHandling(!C.global.disableErrorhandling),setInterval(C.utility.updateCsrfToken,18e5);var n=[],s=0,o={},r=!1,a=!1,l=[],c=[],u,d=C.utility.showSpinner=function(){h(),C.dom.$content.stop().css({visibility:"hidden",opacity:0}),u=setTimeout(function(){$(".chg-global-content").append('<div class="chg-page-loading" style="display: none"><div class="chg-load"></div></div>'),$(".chg-page-loading").fadeIn()},0)},h=C.utility.hideSpinner=function(){clearTimeout(u),$(".chg-page-loading").remove(),C.dom.$content.stop().css("visibility","visible").animate({opacity:1})},g=function(t){var e=t.currentTarget.getAttribute("href");if(!e||0!==e.indexOf("mailto:")&&0!==e.indexOf("//")&&0!==e.indexOf("#")&&-1===e.indexOf("/#"))t.ctrlKey||t.metaKey||($(t.target).hasClass("chg-global-nav-home")||$(t.target).hasClass("chg-global-nav-list-section-home")?C.utility.openGlobalNav(animate=!0):$(t.target).hasClass("chg-logo")?$(t.target).next()&&$(t.target).next().hasClass("chg-menu")&&C.utility.openGlobalNav(animate=!0):C.utility.closeGlobalNav(animate=!0),t.preventDefault(),C.utility.navigate(e));else if(0===e.indexOf("#")&&$(e).length>0){var i=$(e).offset().top,n=i-60;window.location.replace(e),window.scrollTo(0,n),t.preventDefault()}},p=C.utility._handleRequest=function(t){C.dom.$html.find("*").off(".chg-page-widget"),C.logger.referrer_url=History.getStateByIndex(-2)?History.getStateByIndex(-2).url:location.href,setTimeout(d,0),window.scrollTo(0,0),C.dom.$html.css("cursor","progress"),n.push($.ajax({type:"post",url:t,data:{orig_referrer:C.logger.referrer_url},dataType:"json",success:m,error:function(){C.log("Failed to load page: "+t),location.replace(t)}})),C.global.adTargeting={},C.utility.hideTower(),C.utility.profiler.reset(),C.global.navigationStart=(new Date).getTime(),"function"==typeof C.global.pageObject.destroy&&C.global.pageObject.destroy(),Eggshell.destroyAll();var e=Eggshell.create("C.eggshell.component.ajax.client");Eggshell.trigger(e,"flush all"),C.dom.$window.trigger("pageunload")},f=function(t){var e,i;"undefined"==typeof C.global.adobe&&C("global.adobe"),C.global.adobe=t.adobeDataObject||{},C.global.adobe.pageType=t.pageType,(e=C.utility.access("adobe_track.pre",t))&&C.adobeAnalytics.track(e),t&&t.digitalData&&C.adobeAnalytics.setData(t.digitalData),(i=C.utility.access("adobe_track.post",t))&&C.adobeAnalytics.track(i),C.adobeAnalytics.track("pageView")},m=function(t,e,i){C.global.clusterPrefix=t.clusterPrefix?t.clusterPrefix:"",C.support.touch||($(window).off("scroll"),$(window).scroll(function(){$(".chg-header, .chgg-hdr").css({left:-$(this).scrollLeft()})})),Eggshell.find("C.search.trackid").trigger("page refreshed"),C.global.headerAutosuggest&&!C.global.webConstellation?Eggshell.find(C.global.headerAutosuggest).trigger("disable all overrides").trigger("render",{ajaxEndpoint:"/_ajax/search/globallist",target:$(".chg-header .autosuggest-input-field"),filters:{type:"group"}}):Eggshell.find(C.global.headerAutosuggest).trigger("disable all overrides").trigger("render",{ajaxEndpoint:"/_ajax/search/globallist",target:$(".chgg-hdr .autosuggest-input-field"),filters:{type:"group"}});var u=Eggshell.find("C.global.coupon");u&&u.trigger("ajax page loaded");var d=window.location.pathname;if(-1!==d.indexOf("/test-prep")&&t.headerMarkup&&!C.global.webConstellation){$(".chg-hdr-v3").remove(),$(".chg-body").prepend(t.headerMarkup);var h=Eggshell.create("C.global.header").trigger("render");Eggshell.immuneToDestroyAll(h)}if(C.global.webConstellation){var g=!1,p=!1,f=!1,m=!1,w=!1,S=!1,E="home";"/"===d&&(f=!0,m=!0,g=!0),(-1!==d.indexOf("/books")||-1!==d.indexOf("/sell-textbooks"))&&(E="books",f=!0,m=!0,g=!0),(-1!==d.indexOf("/sell-textbooks/payment")||-1!==d.indexOf("/sell-textbooks/return"))&&(g=!1),(-1!==d.indexOf("/bookstore")||-1!==d.indexOf("/occp")||-1!==d.indexOf("/etextbooks")||-1!==d.indexOf("/shoppingcart")||-1!==d.indexOf("/used-textbooks")||-1!==d.indexOf("/cheap-textbooks")||-1!==d.indexOf("/college-textbooks"))&&(E="books",f=!1,m=!1,g=!1),-1!==d.indexOf("/search")&&-1===d.indexOf("/sell-textbooks/search")&&(E="home",g=!1,S=!0,f=!1,m=!1),-1!==d.indexOf("/textbooks")&&(E="books",f=!1,m=!1),("/study"===d||-1!==d.indexOf("/study/"))&&(E="study",f=!0,m=!0,g=!0),-1!==d.indexOf("/study/qa/post")&&(g=!1),(-1!==d.indexOf("/csorderconfirm")||-1!==d.indexOf("/my/expertqa")||-1!==d.indexOf("/homework-help"))&&(E="study"),-1!==d.indexOf("/tutoringpolicy")&&(E="tutors"),-1!==d.indexOf("/test-prep")&&(E="testprep",g=!0,f=!0,w=!0),(-1!==d.indexOf("/test-prep/pricing/")||-1!==d.indexOf("/test-prep/orderconfirmation"))&&(g=!1),(-1!==d.indexOf("/app/internships")||-1!==d.indexOf("/career-center"))&&(E="internships",f=!0,w=!0,g=!0),(-1!==d.indexOf("/career-center/explore/")&&"/career-center/explore/"!==d||-1!==d.indexOf("/career-center/advice/")&&"/career-center/advice/"!==d)&&(g=!1),(-1!==d.indexOf("/schools")||-1!==d.indexOf("/admissions")||-1!==d.indexOf("/scholarships")||-1!==d.indexOf("/majors"))&&(E="colleges",f=!0,w=!0,g=!1),(-1!==d.indexOf("/auth")&&-1===d.indexOf("/author")||-1!==d.indexOf("/checkout")||-1!==d.indexOf("/guidedsolutions"))&&(p=!0,g=!1),window.globalChggHeader.trigger(p?"hide user distractions":"show user distractions"),window.globalChggHeader.trigger("page refreshed"),window.globalChggHeader.trigger("update type",E),window.globalChggHeader.trigger(f?"hide search box":"show search box"),window.globalChggHeader.trigger("set no search",w),window.globalChggHeader.trigger("set search on scroll",m),window.globalChggHeader.trigger(g?"enable translucent background":"disable translucent background"),window.globalChggHeader.trigger(S?"expand search":"collapse search")}else{var T=Eggshell.find("C.global.header");T.trigger("show user distractions").trigger("enable auto collapse of searchbox").trigger("collapse search box").trigger("page refreshed")}Eggshell.find("C.global.tutors.chat").trigger("page refreshed");var I=0;for(I=0;I<n.length&&n[I]!==i;I++);if(I>=s){if(s=I,o=t,o.redirect||(o.hasHiddenSearchBox===!0?(C.global.webConstellation?Eggshell.find("C.global.cheggheader").trigger("hide search box"):Eggshell.find("C.global.header").trigger("hide search box"),C.global.hasHiddenSearchBox=!0):(C.global.webConstellation?Eggshell.find("C.global.cheggheader").trigger("show search box"):Eggshell.find("C.global.header").trigger("show search box"),C.global.hasHiddenSearchBox=!1)),C.global.domLoading=(new Date).getTime(),l[s]=0,c[s]=0,r=!1,a=!1,"undefined"!=typeof o.cssName&&$(".chg-content").attr("class","").addClass("chg-content "+o.cssName),C.logger.loadTime=o.loadTime,C.logger.pageTrackId=o.pageTrackId,C("global.cs"),o.redirect)return void C.utility.replace(o.redirect);C.dom.$content.empty(),$('link[data-scope="content"]').each(function(){this.disabled=!0}),$("title").html(o.title),o.fixedWidth?C.dom.$container.addClass("no-resize"):C.dom.$container.removeClass("no-resize"),o.hiddenGlobalNav?$(".chg-body").addClass("no-nav"):$(".chg-body").removeClass("no-nav"),!o.nav||jQuery.isEmptyObject(o.nav)?$(".chg-body").addClass("no-subnav"):$(".chg-body").removeClass("no-subnav"),o.showViewMobileSiteButton&&_(),v(o.nav),l[s]+=o.css.length,c[s]+=o.js.length,y();for(var N in o.css){N=o.css[N];var j=s;x(N,function(){b("css",j)})}for(var L in o.js)L=o.js[L],function(t,e){C.dom.$window.queue("chg-js-"+e,function(i){k(t,function(){b("js",e)})})}(L,s);$(function(){timer=setTimeout(function(){Eggshell.find("C.global.coupon").trigger("show coupon tooltip")},1e3)}),C.dom.$window.dequeue("chg-js-"+s)}},v=function(t){if(!t||jQuery.isEmptyObject(t))return void C.dom.$nav.html("");var e="",i="main";t.main.selected&&(i="main selected");var n=t.main.label;n&&n.length>20&&(n=n.substr(0,17)+"..."),n=C.utility.escapeHtml(n);var s=C.utility.escapeHtml(t.main.url);if(e+='<a href="'+s+'" class="'+i+'"><span class="nav-label">'+n+"</span></a> ",t.list)for(var o in t.list){o=t.list[o],i="",o.selected&&(i="selected");var r=C.utility.escapeHtml(o.url),a=C.utility.escapeHtml(o.img),l=C.utility.escapeHtml(o.label);e+='<a href="'+r+'" class="'+a+" "+i+'"><span class="nav-label">'+l+"</span></a> "}e='<div class="row"><div class="col-12 col-first col-last">'+e+"</div></div>",C.dom.$nav.html(e)},b=function(t,e){"css"==t?l[e]--:"js"==t&&(C.dom.$window.dequeue("chg-js-"+e),c[e]--),y()},y=function(){0==l[s]&&S(),0==c[s]&&0==l[s]&&E()},w={},x=function(t,e){var i,n,s;w[t]?(w[t][0].disabled=!1,e()):(s=$('<link id="css_'+t+'" rel="stylesheet" type="text/css" href="'+t+'" media="all" data-scope="content" />').appendTo(document.head),w[t]=s,n=setTimeout(function(){n=null,e()},1e3),i=new Image,i.src=t,i.onerror=function(){n&&(clearTimeout(n),setTimeout(function(){e()},250))})},k=function(t,e){C.global.cachedJS[t]?e():C.utility.loadScript(t,function(){C.global.cachedJS[t]=!0,e()})},S=function(){r||(r=!0,C.dom.$content.html(o.html),setTimeout(h,0))},E=function(){a||(a=!0,C.utility.closeGlobalNav(animate=!1),C.global.domInteractive=(new Date).getTime(),o.init?($.globalEval("C.global.pageObject = "+o.init),"function"==typeof C.global.pageObject.postConstruct&&C.global.pageObject.postConstruct()):C.global.pageObject={},C.global.pageOnload(),C.dom.$html.css("cursor","auto"),window.navigateEvent||(window.navigateEvent=document.createEvent("Event"),window.navigateEvent.initEvent("navigatePage",!0,!0)),window.dispatchEvent(window.navigateEvent),f(o))};try{C.global.navigationStart=performance.timing.navigationStart,C.global.domLoading=performance.timing.domLoading,C.global.domInteractive=performance.timing.domInteractive,C.dom.$window.load(function(){setTimeout(function(){C.global.domComplete=performance.timing.domComplete},0)})}catch(T){C.global.navigationStart=0,C.global.domLoading=0,C.global.domInteractive=0,C.global.domComplete=0}C.global.pageOnload=function(){C.utility.reflowSubNav(),C.support.touch&&C.dom.$nav.css("position","absolute"),this.coupon=Eggshell.create("C.global.coupon",{el:$(".chg-hdr-coupon-area",this.$el)}),Eggshell.immuneToDestroyAll(this.coupon),C.utility.showCouponDialog=$.proxy(function(t,e,i){var n={title:t,disclaimer:e,code:i};this.trigger("open coupon dialog",n)},this.coupon),C.global.domComplete=(new Date).getTime(),C.utility.profiler.show(),C.utility.checkPollution(),C.global.adsRenderEarlier||t()},History.enabled&&C.global.ajaxPageLoading&&(C.dom.$body.observe("click.cheggNavigation","a:not([data-noajax]):not([href^=javascript]):not([target=_blank])",g,C.dom.$window),C.dom.$window.on("statechange",function(){p(History.getState().url)}),setTimeout(function(){C.dom.$body.unobserve("click.cheggNavigation",C.dom.$window)},18e5)),C.logger.referrer_url=document.referrer,C.dom.$window.observe("resize",C.utility.reflowSubNav,C.dom.$window),C.dom.$nav.observe("click","a",function(t){C.dom.$nav.find(".selected").removeClass("selected"),$(t.currentTarget).addClass("selected"),History.enabled||d()},C.dom.$window),$(".chg-banner").observe("click",function(){new C.widget.dialog({type:"ajax",content:"/_ajax/dialog/browserupgrade"})},C.dom.$window),C.support.touch?$(".chg-header, .chgg-hdr").addClass("chg-pos-absolute"):$(window).scroll(function(){$(".chg-header, .chgg-hdr").css({left:-$(this).scrollLeft()})}),C.dom.$body.observe("click",".chg-dialog-link",function(t){return t.preventDefault(),new C.widget.dialog({type:"ajax",content:t.currentTarget.href,fixed:!1}),!1},this);var _=function(){$(".C-eggshell-viewfullsite-button").length<1&&(this.viewFullSiteButtonNS=Eggshell.create("C.eggshell.viewfullsite.button",{el:$(".chg-container-content")}).getNs(),Eggshell.output(this.viewFullSiteButtonNS,"show"))};C.global.showViewMobileSiteButton&&_()}),$(function(){this.parseUrl=function(t){for(var e=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],i=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,n=i.exec(t),s={},o=14,r=!1;o--;)n[o]&&(s[e[o]]=n[o]);if(s.path){var a=s.path.split("/");s.splits=a,"_ajax"===a[1]&&(r=!0)}return s.isAjax=r,s},$.ajaxPrefilter($.proxy(function(t){if("jsonp"!==t.dataType){var e=this.parseUrl(t.url),i=C.global.clusterPrefix;if(e.isAjax&&i&&""!==i){var n="/"+i+e.path;e.query&&(n+="?"+e.query),t.url=n}}},this)),$("document").ready(function(){$.each($("[data-img-src]"),function(t,e){var e=$(e),i=e.attr("data-img-src");e.attr("src",i),e.removeAttr("data-img-src")})})}),Eggshell.define("C.global.tutors.embed",{inputs:["render"],output:["rendered"]},function(t){window.lightningjs||function(t){function e(e,n){var s="1";return n&&(n+=(/\?/.test(n)?"&":"?")+"lv="+s),t[e]||function(){var s=window,o=document,r=e,a=o.location.protocol,l="load",c=0;!function(){function e(){u.P(l),u.w=1,t[r]("_load")}t[r]=function(){function e(){return e.id=o,t[r].apply(e,arguments)}var i=arguments,n=this,o=++c,a=n&&n!=s?n.id||0:0;return(u.s=u.s||[]).push([o,a,i]),e.then=function(t,i,n){var s=u.fh[o]=u.fh[o]||[],r=u.eh[o]=u.eh[o]||[],a=u.ph[o]=u.ph[o]||[];return t&&s.push(t),i&&r.push(i),n&&a.push(n),e},e};var u=t[r]._={};u.fh={},u.eh={},u.ph={},u.l=n?n.replace(/^\/\//,("https:"==a?a:"http:")+"//"):n,u.p={0:+new Date},u.P=function(t){u.p[t]=new Date-u.p[0]},u.w&&e(),s.addEventListener?s.addEventListener(l,e,!1):s.attachEvent("on"+l,e);var d=function(){function t(){return["<head></head><",e,' onload="var d=',f,";d.getElementsByTagName('head')[0].",a,"(d.",l,"('script')).",c,"='",u.l,"'\"></",e,">"].join("")}var e="body",n=o[e];if(!n)return setTimeout(d,100);u.P(1);var s,a="appendChild",l="createElement",c="src",h=o[l]("div"),g=h[a](o[l]("div")),p=o[l]("iframe"),f="document",m="domain",v="contentWindow";h.style.visibility="hidden",h.style.height="0px",n.insertBefore(h,n.firstChild).id=i+"-"+r,p.frameBorder="0",p.id=i+"-frame-"+r,/MSIE[ ]+6/.test(navigator.userAgent)&&(p[c]="javascript:false"),p.allowTransparency="true",g[a](p);try{p[v][f].open()}catch(b){u[m]=o[m],s="javascript:var d="+f+".open();d.domain='"+o.domain+"';",p[c]=s+"void(0);"}try{var y=p[v][f];y.write(t()),y.close()}catch(C){p[c]=s+'d.write("'+t().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}u.P(2)};u.l&&d()}()}(),t[e].lv=s,t[e]}var i="lightningjs",n=window[i]=e(i);n.require=e,n.modules=t}({});var e=C.global.tutorsCdnUrl||"/tutors/",i=window.lightningjs.require("embed",e+"publish/static/js/embed.js");this.render=function(){i("config",{uid:C.global.userUuid,CHEGG_UUID_CHECKSUM:C.global.uuidChecksum,CSS_URL:e+"publish/static/css/embed-chegg.css"}),i("on",{redirect:function(t){window.location.href=t}});var t=Eggshell.create("C.global.tutors.chat").trigger("render");Eggshell.immuneToDestroyAll(t)},this.setListeners=function(){Eggshell.find(this).on("render",this.render)},this.initialize=function(){C.global.instaEdu&&this.setListeners()},this.initialize()}),Eggshell.define("C.global.tutors.chat",{inputs:["render","page refreshed","toggle chat list","auth loaded"],output:["rendered"]},function(t){var e=$("<div class='embed-js' id='chat-component'></div>");$("body").append(e);var i=window.lightningjs.require("chat"),n=new RegExp(["^[/]login","^[/]auth"].join("|")),s=!1,o=function(){if(!s){var t=Eggshell.find("C.common.auth");t.getId()&&(t.trigger("disable redirect",!0).on("authentication successful",l),s=!0)}},r=function(){return n.test(window.location.pathname)?(i("hasDeferred",function(t){t&&o()}),i("minimizeWindows"),!0):!1},a=function(){"/signout"===window.location.pathname&&(C.utility.setCookie("sessionid","",-1),i("signOut"))},l=function(){i("deferFinish",function(){Eggshell.find("C.common.auth").trigger("do redirect")})},c=function(t,e){i("deferSave",t,e,function(){C.utility.navigate("/auth")})};this.authLoaded=function(){r()},this.start=function(){a(),r(),i("onChegg",{"sign-up":function(t){c("queueMessage",t)},"sign-up:meet-now":function(t){c("saveMeetNow",t)}}),i("start")},this.render=function(){i("render",e[0],{OMNIBAR_MINIMIZE:!0}),this.start()},this.pageRefreshed=function(){a(),r()||C.global.userUuid||i("deferSave",null),i("hideOmnibar")},this.toggleChatList=function(t,e){i("toggleOmnibar",!!e)},this.setListeners=function(){Eggshell.find(this).on("render",this.render).on("toggle chat list",this.toggleChatList).on("page refreshed",this.pageRefreshed).on("auth loaded",this.authLoaded)},this.initialize=function(){C.global.instaEdu&&this.setListeners()},this.initialize()}),Eggshell.define("C.common.message",{inputs:["set type","set size","set header","set body","set call to action link","enable close button","scrollOnShow"],outputs:["call to action link clicked","close button clicked"]},C.View.extend({initialize:function(){this.model=new C.Model({type:"information",size:"lg",header:"",body:"",linkText:"",linkUrl:"",closeButton:!1,scrollOnShow:!1}),this.model.on("change",this.render,this),Eggshell.find(this).on("set type",this.setType).on("set size",this.setSize).on("set header",this.setHeader).on("set body",this.setBody).on("set call to action link",this.setLink).on("enable close button",this.enableCloseButton).on("scrollOnShow",this.setScrollOnShow)},setType:function(t,e){if("information"!=e&&"error"!=e&&"success"!=e&&"important"!=e&&"custom"!=e)throw"Invalid message type.";e="information"==e?"info":e,this.model.set("type",e)},setSize:function(t,e){if("large"!=e&&"small"!=e)throw"Invalid message size.";this.model.set("size","large"==e?"lg":"sm")},setHeader:function(t,e){if(!e||"string"!=typeof e)throw"Invalid message header.";this.model.set("header",e)},setBody:function(t,e){if(!e||"string"!=typeof e)throw"Invalid message body.";this.model.set("body",e)},setLink:function(t,e){if(!e||!e.text||"string"!=typeof e.text)throw"Invalid link text.";if(!e||!e.url||"string"!=typeof e.url)throw"Invalid link URL.";this.model.set("linkText",e.text),this.model.set("linkUrl",e.url)},enableCloseButton:function(t,e){if("boolean"!=typeof e)throw"Invalid close button flag.";this.model.set("closeButton",e)},setScrollOnShow:function(t,e){if("boolean"!=typeof e)throw"Invalid close button flag.";this.model.set("scrollOnShow",e),this.model.get("scrollOnShow")?Eggshell.find(this).on("show",function(){this.$el.show(),C.utility.isIE()?window.scroll(0,0):$("body").animate({scrollTop:"0px"},300)}):Eggshell.find(this).on("show",function(){this.$el.show()})},render:function(){var t=this.model.get("body")||this.model.get("linkUrl")?"":"msg-header-only";return this.$el.empty().html(this.template($.extend(this.model.toJSON(),{headerClass:t}))),this.model.get("linkUrl")||this.$("a.message-call-to-action").remove(),this.model.get("header")&&"sm"!=this.model.get("size")||this.$(".msg-header").remove(),this.model.get("closeButton")||this.$(".msg-close").remove(),this},template:_.template('<div class="msg-<%- type %>-<%- size %>">	<div class="msg-icon">		<div class="msg-header <%- headerClass %>"><%= header %></div>		<div class="msg-text"><%= body %>			<a class="message-call-to-action" href="<%- linkUrl %>"><%= linkText %></a> 			<span class="msg-close"></span>		</div>	</div></div>'),events:{"click a.message-call-to-action":"handleLinkOnClicked","click .msg-close":"closeMessage"},handleLinkOnClicked:function(t){Eggshell.find(this).trigger("call to action link clicked")},closeMessage:function(t){this.$el.slideUp("fast"),Eggshell.find(this).trigger("close button clicked")}})),Eggshell.define("C.global.coupon",{inputs:{render:{payload:null},"open coupon dialog":{payload:null},"apply coupon and open coupon dialog":{payload:"string"},"show coupon tooltip":{payload:null},"refresh coupon":{payload:null},"apply headline button clicked":{payload:null},"apply coupon headline on checkout":{payload:null},"get coupon status":{payload:null},"ajax page loaded":{payload:null}},outputs:{"active coupon":{payload:null},"applied coupon successfully":{cpnCode:null},"failed to apply coupon":{payload:null}},newNode:!1,singleton:!0,strict:!0},function(){var t=Backbone.Model.extend({initialize:function(){},fetchCoupon:function(t){$.ajax({url:"/_ajax/global/coupon/get",type:"post",dataType:"json",context:this,success:$.proxy(function(t){t.id&&(this.set("couponNode",t),this.trigger("loaded"))},this),error:function(t){}})},addCoupon:function(t,e){$.ajax({url:"/_ajax/global/coupon/apply",type:"get",data:{cp:t,token:C.global.csrfToken},context:this,success:function(i){if(i.id&&null!=i.id){var n=digitalData.page.category.subCategory2||"core";if(digitalData={},C.adobeAnalytics.setData("page",{pageInfo:{pageType:"promotion",pageName:"coupon modal",pageNameDetailed:t},category:{primaryCategory:"Chegg",subCategory1:"Web",subCategory2:n}}),C.adobeAnalytics.track("pageView"),e)return this.set("couponNode",i),this.trigger("couponApplied"),void this.trigger("coupon",i);this.set("couponNode",i),this.trigger("couponApplied")}},error:function(t){}})}}),e=Backbone.View.extend({initialize:function(){this.sessionLogger=Eggshell.create("C.common.log"),Eggshell.immuneToDestroyAll(this.sessionLogger),this.model=new t,this.model.on("loaded",this.render,this),this.model.on("couponApplied",this.handleCouponApplied,this),this.model.fetchCoupon(),Eggshell.find(this).on("refresh coupon",function(t,e){this.model.fetchCoupon()}).on("show coupon tooltip",this.createCpnHeadline).on("open coupon dialog",this.openCouponDialogBox).on("get coupon status",this.checkStatus).on("apply coupon and open coupon dialog",function(t,e){this.options.openAppliedCouponInDialog=!0,this.model.addCoupon(e)}).on("ajax page loaded",function(){this.dialog&&(this.dialog.destroy(),this.dialog=null)})},handleCouponApplied:function(){this.options.openAppliedCouponInDialog&&this.couponDialogBox(this.model.get("couponNode")),Eggshell.find(this).trigger("applied coupon successfully",{cpnCode:this.model.get("couponNode").code})},render:function(){this.createCpnHeadline()},createCpnHeadline:function(){this.checkURLcoupon();var t=this.model.get("couponNode");this.headlineCpn=Eggshell.create("C.global.coupon.headline",{el:$(".chg-content")}).on("coupon headline displayed",function(){if(t.applied===!1){var e={couponCode:t.code,action:"Coupon Displayed"};this.sessionLogger.trigger("session log",e)}},this).trigger("render",t).on("apply headline button clicked",this.applyCoupon,this)},checkStatus:function(){var t=this.model.get("couponNode");t.applied===!0&&Eggshell.find(this).trigger("active coupon")},reportApplyEvent:function(){var t=this.model.get("couponNode"),e={couponCode:t.code,action:"Coupon Applied"};this.sessionLogger.trigger("session log",e)},openCouponDialogBox:function(t,e){var i=e.title,n=e.disclaimer,s=e.code,o=C.utility.getParams();"undefined"==typeof o.noApply&&this.model.addCoupon(e.code,!0),this.model.on("coupon",$.proxy(function(t,e){this.couponDialogBox(this.model.get("couponNode"),i,n),t.stopPropagation()},this))},applyCoupon:function(){Eggshell.find(this).trigger("active coupon");var t=this.model.get("couponNode");"undefined"!=typeof t?(this.couponDialogBox(this.model.get("couponNode")),this.headlineCpn.trigger("show applied msg")):this.model.on("couponApplied",$.proxy(function(){this.couponDialogBox(this.model.get("couponNode")),this.headlineCpn.trigger("show applied msg")},this)),this.model.addCoupon(t.code),this.reportApplyEvent()},checkURLcoupon:function(){var t=this.getQueryVariable("cp");"noCp"!=t&&(""==t?C.utility.setCookie("HeadlineNoShow","true",1):(this.model.addCoupon(t,!0),this.model.on("coupon",this.couponDialogBox,this)))},getQueryVariable:function(t){for(var e=window.location.search.substring(1),i=e.split("&"),n=0;n<i.length;n++){var s=i[n].split("=");if(s[0]==t)return s[1]}return"noCp"},couponDialogBox:function(t,e,i){if(e&&i)var n=e,s=i;else var n=t.title,s=t.disclaimer;var o='<div class="coupon-added-msg"><span class="coupon-icon icon-chegg-Deal"></span>Coupon</div>',r='<div class="auto-apply-coupon-dialog"><div class="coupon-message">'+n+'</div><div class="coupon-expiration">'+s+'</div><div id="msg-success-sm"></div></div>';this.dialog?Eggshell.trigger(this.dialog,"show"):(this.dialog=Eggshell.create("C.Eggshell.dialog").trigger("set headline",o).trigger("disable default padding").trigger("hide sub headline").trigger("hide icon").trigger("set content html",r).trigger("show").on("close button clicked",$.proxy(function(){$.ajax({url:"/_ajax/coupon/shown"})},this)),Eggshell.create("C.common.message",{el:$(".auto-apply-coupon-dialog #msg-success-sm")}).trigger("set type","success").trigger("set size","small").trigger("set body","Coupon will be applied at checkout")),$(".auto-apply-coupon-dialog button").on("click",$.proxy(function(){var t=window.location.pathname.split("/");"checkout"!==t[1]||"sp"!==t[2]&&"spc"!==t[2]?"checkout"!==t[1]||"confirm"!==t[2]&&"review"!==t[2]?Eggshell.trigger(this.dialog,"hide"):(Eggshell.trigger(this.dialog,"hide"),C.utility.refresh()):Eggshell.trigger(this.dialog,"hide")},this))}});return e}()),Eggshell.define("C.global.promo",{inputs:{render:{payload:null},"open dialog":{payload:null}},outputs:{},newNode:!1,singleton:!0,strict:!0},function(){var t=Backbone.Model.extend({initialize:function(){},fetchPromo:function(){var t=C.utility.getParams();return t.mep?void $.ajax({url:"/_ajax/global/promo/get",type:"POST",dataType:"json",data:{promoCode:t.mep},context:this,success:$.proxy(function(e){null!=e&&(this.set("promoInfo",e),this.set("promoCode",t.mep),this.trigger("loaded"))},this),error:function(t){}}):void this.set("promoInfo",null)}}),e=Backbone.View.extend({initialize:function(){this.model=new t,this.model.on("loaded",this.render,this),this.model.fetchPromo(),Eggshell.find(this).on("open dialog",this.openDialog).on("render",this.render)},render:function(){this.openDialog()},openDialog:function(t,e){var i=this.model.get("promoInfo");i.title&&i.body&&i.btnText&&this.promoDialogBox(i);

},promoDialogBox:function(t){var e='<div class="auto-apply-coupon-dialog"><div class="coupon-message">'+t.title+'</div><div class="coupon-expiration">'+t.body+'</div><button class="btn-primary-sm">'+t.btnText+'</button><div class="coupon-disclaimer">'+t.disclaimer+"</div></div>";this.dialog?Eggshell.trigger(this.dialog,"show"):(this.dialog=Eggshell.create("C.common.dialog").trigger("disable default padding").trigger("hide sub headline").trigger("hide icon").trigger("hide control").trigger("set content html",e).trigger("show"),this.dialogShown(this.model.get("promoCode"))),$(".auto-apply-coupon-dialog button").on("click",$.proxy(function(){Eggshell.trigger(this.dialog,"hide")},this))},dialogShown:function(t){$.ajax({url:"/_ajax/global/promo/shown",type:"POST",dataType:"json",data:{promoCode:t},context:this})}});return e}()),Eggshell.define("C.global.coupon.headline",{inputs:{render:{payload:{id:"string",code:"string",title:"string",disclaimer:"string",applied:"boolean",path:"string"}},"show headline coupon":{payload:null},"show applied msg":{payload:null}},outputs:{"apply headline button clicked":{payload:null},"coupon headline displayed":{payload:null}}},Backbone.View.extend({initialize:function(){Eggshell.find(this).on("render",this.render).on("show headline coupon",this.showCpnHeadline).on("show applied msg",this.showAppliedMsg)},render:function(t,e){this.showCpnHeadline(e),this.delegateEvents()},tmplCouponHeadline:_.template('<div class="C-global-coupon-headline"><div class="headline-wrapper"><div class="apply-coupon"><div class="coupon-icon icon-chegg-Deal"></div><h1><strong><%- coupon.title %></strong><a href="javascript:void(0)" class="show-disclaimer">See details...</a></h1></div><div class="coupon-code"><div class="coupon-code-wrapper"><% if (coupon.applied) { %><h2><span class="icon-chegg-Check"></span>Coupon will be applied at checkout</h2><% }else{ %><h2>Code: <strong><%- coupon.code %></strong></h2><button class="btn-special-outline btn-sm coupon-btn">Apply coupon</button><% } %></div></div><div class="disclaimer"><h3><%- coupon.disclaimer %></h3></div></div></div>'),showCpnHeadline:function(t){var e=C.utility.getCookie("HeadlineNoShow");if("true"!=e&&this.isCorrectPath(t.path)&&($(".C-global-coupon-headline")&&$(".C-global-coupon-headline").remove(),$(".chg-content").prepend(this.tmplCouponHeadline({coupon:{title:t.title,code:t.code,disclaimer:t.disclaimer,expireDate:t.expireDate,id:t.id,applied:t.applied}})),this.registerHealineListerner(t),Eggshell.find(this).trigger("coupon headline displayed"),C.global.stickyCoupon)){$(".C-global-coupon-headline .show-disclaimer").hide();var i=C.utility.getCookie("bookstore_school");if(!t.applied&&"/"!=window.location.pathname&&"bowdoin"!==i&&!$(".C-common-heroimg").length){var n=$(".C-global-coupon-headline"),s=n.parent(),o=parseInt(s.css("padding-top"),10);$(window).scroll(function(t){var e=$(window).scrollTop();!n.hasClass("fix-coupon")&&e>30?(n.addClass("fix-coupon"),s.css("padding-top",o+n.outerHeight(!0)+"px"),n.slideDown("fast")):n.hasClass("fix-coupon")&&30>e&&(s.css("padding-top",o+"px"),n.removeClass("fix-coupon"),n.show())})}}},isCorrectPath:function(t){if(t)for(var e=window.location.pathname,i=t.split(" "),n=0,s=i.length;s>n;n++){if(i[n]==e)return!0;var o="^"+C.utility.escapeRegEx(i[n]).replace("\\*",".*")+"$",r=new RegExp(o);if(r.test(e)||"/"!=e.substr(-1)&&r.test(e+"/"))return!0}return!1},showAppliedMsg:function(){$(".C-global-coupon-headline .coupon-code h2").html("<span class='icon-chegg-Check'></span>Coupon will be applied at checkout"),$(".C-global-coupon-headline .coupon-code button").hide()},registerHealineListerner:function(t){var e=window.location.pathname.split("/");(""==e[1]||"books"==e[1])&&$(".C-global-coupon-headline .apply-coupon").click($.proxy(function(e){e.stopPropagation(),this.checkHowApply(t)},this)),$(".C-global-coupon-headline button").click($.proxy(function(e){e.stopPropagation(),this.checkHowApply(t)},this)),C.global.stickyCoupon&&($(".C-global-coupon-headline").css("cursor","pointer"),$(".C-global-coupon-headline").click($.proxy(function(e){e.stopPropagation(),this.checkHowApply(t)},this))),$(".C-global-coupon-headline .show-disclaimer").click($.proxy(function(){this.showDisclaimer()},this))},showDisclaimer:function(t){$(".C-global-coupon-headline .disclaimer").css("display","block"),$(".C-global-coupon-headline .show-disclaimer").css("display","none"),$(".C-global-coupon-headline .apply-coupon").css("padding-bottom","0px"),$(".C-global-coupon-headline .headline-wrapper").css("height","67px")},checkHowApply:function(t){Eggshell.find(this).trigger("apply headline button clicked")}})),Eggshell.define("C.common.overlay.tooltip",{inputs:{"set target":{payload:"jquery"},"set tooltip size":{payload:"string"},"position caret on top right":{payload:null},"add custom css class":{payload:null},"position caret center":{payload:null},"set tooltip border color":{payload:"string"},"get tooltip content node":{payload:null},show:{payload:null},hide:{payload:null},toggle:{payload:null},"enable tooltip on hover":{payload:null},"disable tooltip on hover":{payload:null},"set tooltip below target":{payload:null},"set tooltip above target":{payload:null},"set tooltip on the left of target":{payload:null},"set tooltip on the right of target":{payload:null},"set text":{payload:"string"},"hide tooltip when user click anywhere else":{payload:null},"acitvate tooltip":{payload:null},"deacitvate tooltip":{payload:null},"enable tooltip slide with screen resize":{payload:null},"position tooltip relative to target":{payload:null},"set tooltip the width":{payload:"number"},"set tooltip color":{payload:"string"},"set title text":{payload:"string"},"enable close button":{payload:null},disable_max_z_index:{payload:null},"set animation":{payload:"string"},fix_position:{payload:null}},outputs:{"return tooltip content node":{payload:"jquery"}}},Backbone.View.extend({position:"bottom",tooltipWidthDefault:200,events:{"click .close-btn":"hide"},initialize:function(){this.tooltipWidth=this.tooltipWidthDefault,Eggshell.find(this).on("destroy",this.destroy).on("set target",this.setTarget).on("set tooltip size",this.setSize).on("get tooltip content node",this.getContentNode).on("enable tooltip on hover",this.enableHover).on("disable tooltip on hover",this.disableHover).on("show",this.show).on("hide",this.hide).on("toggle",this.toggle).on("set text",this.setText).on("set tooltip color",this.setBackgroundColor).on("position caret on top right",this.positionCaretRight).on("position caret center",this.positionCaretCenter).on("set tooltip border color",this.setBorderColor).on("set title text",this.setTitle).on("enable close button",this.setCloseBtn).on("disable_max_z_index",this.disableMaxZIndex).on("add custom css class",this.addCustomCssClass).on("enable tooltip slide with screen resize",function(){this.moveWithScreen=!0}).on("set tooltip zindex",function(t,e){this.zindex=e}).on("position tooltip relative to target",function(){this.positionRelative=!0}).on("acitvate tooltip",function(){this.dialogOpen=!0}).on("deacitvate tooltip",function(){this.dialogOpen=!1}).on("hide tooltip when user click anywhere else",function(){this.clickWindow=!0}).on("set tooltip below target",function(){this.setPosition(null,"bottom")}).on("set tooltip above target",function(){this.setPosition(null,"top")}).on("set tooltip on the left of target",function(){this.setPosition(null,"left")}).on("set tooltip on the right of target",function(){this.setPosition(null,"right")}).on("set tooltip the width",function(t,e){this.tooltipWidth=e}).on("set animation",function(t,e){this.tooltipAnimationClass=e}).on("fix_position",function(){this.fixedPosition=!0,this.fixTooltipPosition()}),this.render()},destroy:function(){this.hide()},stopParentEvent:function(t){t.stopPropagation()},render:function(){return this.$el.html(this.template()),this.$el.on("mouseover",$.proxy(this.stopWait,this)),this.$el.on("mouseleave",$.proxy(this.waitAndHide,this)),this.hide(),this.addResizeAbility(),this.addScrollDetection(),this},positionCaretRight:function(){this.$(".tooltip-arrow-top").css("margin-left","240px"),this.caretRight=!0},positionCaretCenter:function(){this.$(".tooltip-arrow-top, .tooltip-arrow-bottom").css("margin","auto"),this.caretCenter=!0},fixTooltipPosition:function(){this.$el.addClass("fixed")},setSize:function(t,e){if("small"!==e&&"large"!==e)throw"Invalid tooltip size. Only large and small are supported";this.$el.removeClass("large small").addClass(e),this.shown&&(this.hide(),this.show())},setBorderColor:function(t,e){if("orange"!==e&&"teal"!==e)throw"Invalid tooltip border color. Only orange or teal is supported";this.$(".tooltip-content").removeClass("orange-border grey-border").addClass(e+"-border"),"bottom"===this.position?this.$(".tooltip-arrow-top").removeClass("tooltip-arrow-top-grey").addClass("tooltip-arrow-top-"+e):("top"===this.position||"right"===this.position||"left"===this.position)&&this.$(".tooltip-arrow-bottom").removeClass("tooltip-arrow-bottom-grey").addClass("tooltip-arrow-bottom-"+e)},addResizeAbility:function(){$(window).resize($.proxy(function(){this.shown&&(this.hide(),this.show())},this))},addScrollDetection:function(){$(window).scroll($.proxy(function(){this.shown&&!this.fixedPosition&&(this.hide(),this.show())},this))},template:_.template('<div class="tooltip">   <div class="tooltip-arrow-top tooltip-arrow-top-grey"></div>   <div class="tooltip-content grey-border"></div>   <div class="tooltip-left-shadow"></div><div class="tooltip-arrow-bottom tooltip-arrow-bottom-grey"></div><div class="tooltip-right-shadow"></div></div>'),setTarget:function(t,e){if(this.$target)throw"Target can only be set once";if(e&&e.jquery)this.$target=e;else{if(!e||"string"==typeof e)throw"Invalid target node";this.$target=$(e)}this.$target=$.extend({},this.$target),this.enableHover()},setPosition:function(t,e){if("top"!=e&&"bottom"!=e&&"left"!=e&&"right"!=e)throw"Invalid position. Position value has to be either top, bottom, left, or right.";this.position=e},enableHover:function(){if(!this.$target)throw"Please set the target element first";this.disableHover(),this.$target.on("mouseover",$.proxy(this.handleTargetMouseOverEvent,this)),this.$target.on("mouseleave",$.proxy(this.waitAndHide,this)),this.$el.on("mouseover",$.proxy(this.stopWait,this)),this.$el.on("mouseleave",$.proxy(this.waitAndHide,this))},disableHover:function(){if(!this.$target)throw"Please set the target element first";this.$target.off("mouseover"),this.$target.off("mouseleave"),this.$el.off("mouseover"),this.$el.off("mouseleave")},getContentNode:function(){Eggshell.find(this).trigger("return tooltip content node",$.extend({},this.$(".tooltip-content")))},setText:function(t,e){e.length>0&&this.$(".tooltip-content").html(e)},setTitle:function(t,e){var i=$('<div class="tooltip-title"></div>');i.html(e).insertBefore(this.$(".tooltip-content")),this.$el.addClass("header-enabled")},setCloseBtn:function(){this.$(".tooltip").append('<span class="close-btn"></span>')},disableMaxZIndex:function(){this.disableMaxZIndexFlag=!0},addCustomCssClass:function(t,e){e&&this.$(e.cssSelector).size()>0&&this.$el.addClass(e.cssClass)},fadeIn:function(){this.$el.show().css("opacity",1)},fadeOut:function(){this.$el.show().css("opacity",0)},hide:function(){this.shown=!1,this.$el.css({visibility:"hidden",opacity:0})},show:function(){if(1!=this.dialogOpen&&"none"!==this.$target.css("display")&&"hidden"!==this.$target.css("visibility")&&(0!==this.$target.offset().top||0!==this.$target.offset().left)){this.shown=!0;var t=this.tooltipWidth!==this.tooltipWidthDefault;if(t&&(this.$el.addClass("custom-width"),this.$(".tooltip").css({width:this.tooltipWidth+"px"})),this.$(".tooltip-arrow-bottom").css({"margin-top":"0px"}),this.$el.show().removeClass("tooltip-top tooltip-bottom tooltip-left tooltip-right"),1==this.positionRelative)var e=this.$target.position();else var e=this.$target.offset();if(this.disableMaxZIndexFlag||this.$el.css({"z-index":this.zindex||C.utility.getMaxIndex()+1}),"bottom"===this.position){this.$el.addClass("tooltip-bottom");var i=e.left-Math.floor(this.$el.outerWidth()/2)+Math.floor(this.$target.outerWidth()/2)+4,n=e.top+this.$target.outerHeight();i+this.$el.width()>$(window).width()&&1==this.moveWithScreen&&(i=$(window).width()<700?700-this.$el.width():$(window).width()-this.$el.width()),this.caretRight?i-=100:this.caretCenter&&this.$el.addClass("center-caret"),this.tooltipAnimationClass&&this.$el.addClass(this.tooltipAnimationClass),this.$el.css({top:n+"px",left:i+"px",visibility:"visible",opacity:1}),this.$(".tooltip-arrow-bottom").css({"margin-top":"0px"})}else if("top"===this.position){this.$el.addClass("tooltip-top");var i=e.left-Math.floor(this.$el.outerWidth()/2)+Math.floor(this.$target.outerWidth()/2)+4,n=e.top-this.$el.outerHeight()+1;i+this.$el.width()>$(window).width()&&1==this.moveWithScreen&&(i=$(window).width()<700?700-this.$el.width():$(window).width()-this.$el.width()),this.$el.css({top:n+"px",left:i+"px",visibility:"visible",opacity:1}),this.$(".tooltip-arrow-bottom").css({"margin-top":"0px"}),this.caretCenter&&this.$el.addClass("center-caret")}else if("left"===this.position){this.$el.addClass("tooltip-left");var i=e.left-this.tooltipWidth-15+1,n=Math.floor(e.top+this.$target.outerHeight()/2-(this.$el.outerHeight()-20)/2);this.$el.css({top:n+"px",left:i+"px",visibility:"visible",opacity:1}),this.$(".tooltip-arrow-bottom").css({"margin-top":-1*Math.floor(this.$el.outerHeight()/2)+"px"})}else if("right"===this.position){this.$el.addClass("tooltip-right");var i=e.left+this.$target.outerWidth()+14,n=Math.floor(e.top+this.$target.outerHeight()/2-(this.$el.outerHeight()-20)/2);this.$el.css({top:n+"px",left:i+"px",visibility:"visible",opacity:1}),this.$(".tooltip-arrow-bottom").css({"margin-top":-1*Math.floor(this.$el.outerHeight()/2)+"px"})}1==this.clickWindow&&this.windowClickHide()}},windowClickHide:function(){this.$el.off("click").on("click",this.stopParentEvent),$("*").on("click."+this.$el.attr("id"),$.proxy(function(){0!=this.$(".tooltip:hover").length||this.$target.is(":hover")||this.hide()},this))},toggle:function(){"hidden"===this.$el.css("visibility")?this.show():this.hide()},waitAndHide:function(){this.timer=setTimeout($.proxy(function(){this.hide()},this),100)},stopWait:function(){clearTimeout(this.timer)},handleTargetMouseOverEvent:function(){Eggshell.find("C.common.overlay.tooltip").trigger("hide"),this.show(),this.stopWait()},setBackgroundColor:function(t,e){this.$el.addClass(e)}})),function(){function t(){var t=a.shift();t&&s(t)}function e(){o=+new Date}function i(){c=setTimeout(function(){t(),a.length?i():c=null},r)}function n(n){var s=+new Date,r=s-o;return e(),a.push(n),c?void 0:r>100?void t():void i()}function s(t){function i(t){var i;if(e(),t){try{i=JSON.parse(n.responseText)}catch(s){i={}}t(i)}}var n=new XMLHttpRequest,s=[];if(n.open("POST",l+"/_ajax/odinconcat"),n.withCredentials=!0,n.setRequestHeader("Content-Type","application/json"),n.onload=i.bind(this,t.success),n.onerror=i.bind(this,t.error),t.requests){if(t.requests.length>10)throw"can only use up to 10 requests at a time";t.requests.forEach(function(t){s.push({url:t.url,method:t.method||"get",payload:t.payload||null,action:t.action,child_request:t.child_request||null,use_board:!!t.use_board,headers:t.headers||{},timeout:t.timeout||null})}),n.send(JSON.stringify({requests:s,headers:t.headers}))}}var o=0,r=100,a=[],l="",c;Eggshell.define("C.odin.concat",{inputs:["fetch","set base url"]},function(){this.Eggshell.listen("fetch",function(t,e){n(e)}),this.Eggshell.listen("set base url",function(t,e){l=e.url})})}(),Eggshell.define("C.common.guarantee.badge",{inputs:["render"],outputs:[]},function(){var t=C.View.extend({tmpl:_.template('<div class="badge"><span class="badge-icon"></span></div>'),tooltipTmpl:_.template('<div class="guarantee-tooltip"><span class="badge-icon"></span><h1 class="title">Rental Price Guarantee</h1><span class="description">Find a lower price, we\'ll match it. <span class="show-modal">See details</span></span></div>'),initialize:function(){this.render()},render:function(){this.$el.html(this.tmpl()),this.renderTooltip(),this.renderGuaranteeModel()},renderTooltip:function(){this.badgeTooltip=Eggshell.create("C.common.overlay.tooltip").trigger("set target",this.$(".badge")).trigger("set tooltip the width",300).trigger("set tooltip above target").trigger("enable tooltip on hover").trigger("set tooltip color","green").on("return tooltip content node",function(t,e){var i=e;i.html(this.tooltipTmpl())},this).trigger("get tooltip content node")},renderGuaranteeModel:function(){this.pricematchmodal=Eggshell.create("C.common.pricematchmodal").trigger("render");var t=this.badgeTooltip.getId();t=t.replace(".","-"),$("#"+t+" .guarantee-tooltip .show-modal").click($.proxy(function(t){this.showModal()},this))},showModal:function(){this.pricematchmodal.trigger("show")}});return t}());